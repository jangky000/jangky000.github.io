<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="%PUBLIC_URL%/logo.svg"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>기존 프로젝트에 다국어 처리를 적용해보자(react-i18next)</title><meta name="title" content="기존 프로젝트에 다국어 처리를 적용해보자(react-i18next)"/><meta name="keywords" content="FE, ReactJS, NextJS, javascript, typescript"/><meta name="description" content="회사에서 사업의 해외 진출을 준비하면서 영문 버전의 사이트가 필요해졌다. 대시보드라는 기존의 프로젝트에 어떻게 다국어 처리를 적용했는지에 대한 경험을 공유한다. 또한 두 번의 다국어 처리 작업 과정을 소개하고 업무 프로세스를 개선했던 경험을 이야기해보고자 한다."/><meta http-equiv="Title" content="기존 프로젝트에 다국어 처리를 적용해보자(react-i18next)"/><meta http-equiv="Subject" content="회사에서 사업의 해외 진출을 준비하면서 영문 버전의 사이트가 필요해졌다. 대시보드라는 기존의 프로젝트에 어떻게 다국어 처리를 적용했는지에 대한 경험을 공유한다. 또한 두 번의 다국어 처리 작업 과정을 소개하고 업무 프로세스를 개선했던 경험을 이야기해보고자 한다."/><meta property="og:type" content="article"/><meta property="og:url" content="https://jangky000.github.io"/><meta property="og:title" content="기존 프로젝트에 다국어 처리를 적용해보자(react-i18next)"/><meta property="og:image" content="https://user-images.githubusercontent.com/46799722/170039589-53960bc6-5d7c-4558-a752-1a426e63b7d5.png"/><meta property="og:description" content="회사에서 사업의 해외 진출을 준비하면서 영문 버전의 사이트가 필요해졌다. 대시보드라는 기존의 프로젝트에 어떻게 다국어 처리를 적용했는지에 대한 경험을 공유한다. 또한 두 번의 다국어 처리 작업 과정을 소개하고 업무 프로세스를 개선했던 경험을 이야기해보고자 한다."/><meta property="og:site_name" content="FE는 철"/><meta property="og:locale" content="ko_KR"/><meta property="og:image:width" content="316"/><meta property="og:image:height" content="562"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="기존 프로젝트에 다국어 처리를 적용해보자(react-i18next)"/><meta name="twitter:description" content="회사에서 사업의 해외 진출을 준비하면서 영문 버전의 사이트가 필요해졌다. 대시보드라는 기존의 프로젝트에 어떻게 다국어 처리를 적용했는지에 대한 경험을 공유한다. 또한 두 번의 다국어 처리 작업 과정을 소개하고 업무 프로세스를 개선했던 경험을 이야기해보고자 한다."/><meta name="twitter:image" content="https://user-images.githubusercontent.com/46799722/170039589-53960bc6-5d7c-4558-a752-1a426e63b7d5.png"/><meta name="next-head-count" content="23"/><meta name="google-site-verification" content="DPsgjCONuCmXo7g20zSkClsSwOef21VzS4Ihvwgjna0"/><meta name="naver-site-verification" content="e5e67bc35f28f45a7fcf3ee3ea2f5b081ea5ad87"/><link rel="preload" href="/_next/static/css/3f081657a0e1e97c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3f081657a0e1e97c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cb5a7feca3fcc903.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cb5a7feca3fcc903.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-dc9b5fe4736780d1.js" defer=""></script><script src="/_next/static/chunks/framework-beeb81ad8570a989.js" defer=""></script><script src="/_next/static/chunks/main-6057cf5d137ac113.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e80974514508b350.js" defer=""></script><script src="/_next/static/chunks/ea88be26-3a3d5e1902b6f677.js" defer=""></script><script src="/_next/static/chunks/689-21aad9bb91ba8b27.js" defer=""></script><script src="/_next/static/chunks/920-f0105d192cf6e544.js" defer=""></script><script src="/_next/static/chunks/46-545578ec1db3644e.js" defer=""></script><script src="/_next/static/chunks/107-4805ee4300a0d61e.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Btitle%5D-a098b202ee45d413.js" defer=""></script><script src="/_next/static/bQcpHPUJVgYV3XLMVBb_b/_buildManifest.js" defer=""></script><script src="/_next/static/bQcpHPUJVgYV3XLMVBb_b/_ssgManifest.js" defer=""></script><style id="__jsx-a6af0e2473afc2ae">footer.jsx-a6af0e2473afc2ae{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;border-top:1px solid#eaeaea;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:20px;width:100%}.copyright.jsx-a6af0e2473afc2ae{margin-bottom:12px}.hits.jsx-a6af0e2473afc2ae{margin-bottom:8px}</style></head><body><div id="__next"><div class="Posts_container__VfzHC"><style data-emotion="css 162alkr-scroll-progress-bar">.css-162alkr-scroll-progress-bar{position:fixed;top:0;left:0;width:100%;height:3px;background:linear-gradient(
    110deg,
    red,
    orange,
    yellow,
    green,
    indigo,
    purple,
    black
  );opacity:0.5;z-index:10;}.css-162alkr-scroll-progress-bar .bar{position:absolute;top:0;right:0;width:100%;height:3px;background:#fff;}</style><div class="css-162alkr-scroll-progress-bar"><div class="bar" style="width:100%"></div></div><style data-emotion="css 1eou086">.css-1eou086{width:90%;max-width:850px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-1eou086 .theme-switch{-webkit-align-self:flex-end;-ms-flex-item-align:flex-end;align-self:flex-end;}.css-1eou086 .wrapper{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff;border-bottom:1px solid #ddd;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:140px;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:0 16px;position:relative;}.css-1eou086 .lottie-wrapper{position:absolute;top:0;bottom:0;left:0;right:0;opacity:0.7;}.css-1eou086 .title{margin-bottom:12px;z-index:1;color:#000;}.css-1eou086 b{font-size:1.4rem;font-weight:bold;}.css-1eou086 .desc{color:#333;font-size:0.9rem;margin-top:0.5rem;}.css-1eou086 a{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><header class="css-1eou086"><style data-emotion="css ecvcn9">.css-ecvcn9{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:58px;height:38px;overflow:hidden;padding:12px;box-sizing:border-box;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;z-index:0;vertical-align:middle;}@media print{.css-ecvcn9{-webkit-print-color-adjust:exact;color-adjust:exact;}}</style><span class="MuiSwitch-root MuiSwitch-sizeMedium theme-switch css-ecvcn9"><style data-emotion="css jl41ik">.css-jl41ik{position:absolute;top:0;left:0;z-index:1;color:#fff;-webkit-transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,-webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-jl41ik.Mui-checked{-webkit-transform:translateX(20px);-moz-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px);}.css-jl41ik.Mui-disabled{color:#f5f5f5;}.css-jl41ik.Mui-checked+.MuiSwitch-track{opacity:0.5;}.css-jl41ik.Mui-disabled+.MuiSwitch-track{opacity:0.12;}.css-jl41ik .MuiSwitch-input{left:-100%;width:300%;}.css-jl41ik:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-jl41ik:hover{background-color:transparent;}}.css-jl41ik.Mui-checked{color:#556cd6;}.css-jl41ik.Mui-checked:hover{background-color:rgba(85, 108, 214, 0.04);}@media (hover: none){.css-jl41ik.Mui-checked:hover{background-color:transparent;}}.css-jl41ik.Mui-checked.Mui-disabled{color:rgb(190, 199, 239);}.css-jl41ik.Mui-checked+.MuiSwitch-track{background-color:#556cd6;}</style><style data-emotion="css niqsiq">.css-niqsiq{padding:9px;border-radius:50%;position:absolute;top:0;left:0;z-index:1;color:#fff;-webkit-transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,-webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-niqsiq.Mui-checked{-webkit-transform:translateX(20px);-moz-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px);}.css-niqsiq.Mui-disabled{color:#f5f5f5;}.css-niqsiq.Mui-checked+.MuiSwitch-track{opacity:0.5;}.css-niqsiq.Mui-disabled+.MuiSwitch-track{opacity:0.12;}.css-niqsiq .MuiSwitch-input{left:-100%;width:300%;}.css-niqsiq:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-niqsiq:hover{background-color:transparent;}}.css-niqsiq.Mui-checked{color:#556cd6;}.css-niqsiq.Mui-checked:hover{background-color:rgba(85, 108, 214, 0.04);}@media (hover: none){.css-niqsiq.Mui-checked:hover{background-color:transparent;}}.css-niqsiq.Mui-checked.Mui-disabled{color:rgb(190, 199, 239);}.css-niqsiq.Mui-checked+.MuiSwitch-track{background-color:#556cd6;}</style><style data-emotion="css wvvgvo">.css-wvvgvo{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;padding:9px;border-radius:50%;position:absolute;top:0;left:0;z-index:1;color:#fff;-webkit-transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,-webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-wvvgvo::-moz-focus-inner{border-style:none;}.css-wvvgvo.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-wvvgvo{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-wvvgvo.Mui-checked{-webkit-transform:translateX(20px);-moz-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px);}.css-wvvgvo.Mui-disabled{color:#f5f5f5;}.css-wvvgvo.Mui-checked+.MuiSwitch-track{opacity:0.5;}.css-wvvgvo.Mui-disabled+.MuiSwitch-track{opacity:0.12;}.css-wvvgvo .MuiSwitch-input{left:-100%;width:300%;}.css-wvvgvo:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-wvvgvo:hover{background-color:transparent;}}.css-wvvgvo.Mui-checked{color:#556cd6;}.css-wvvgvo.Mui-checked:hover{background-color:rgba(85, 108, 214, 0.04);}@media (hover: none){.css-wvvgvo.Mui-checked:hover{background-color:transparent;}}.css-wvvgvo.Mui-checked.Mui-disabled{color:rgb(190, 199, 239);}.css-wvvgvo.Mui-checked+.MuiSwitch-track{background-color:#556cd6;}</style><span class="MuiButtonBase-root MuiSwitch-switchBase MuiSwitch-colorPrimary PrivateSwitchBase-root MuiSwitch-switchBase MuiSwitch-colorPrimary css-wvvgvo"><style data-emotion="css 1m9pwf3">.css-1m9pwf3{cursor:inherit;position:absolute;opacity:0;width:100%;height:100%;top:0;left:0;margin:0;padding:0;z-index:1;}</style><input class="PrivateSwitchBase-input MuiSwitch-input css-1m9pwf3" type="checkbox"/><style data-emotion="css 19gndve">.css-19gndve{box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);background-color:currentColor;width:20px;height:20px;border-radius:50%;}</style><span class="MuiSwitch-thumb css-19gndve"></span></span><style data-emotion="css 1ju1kxc">.css-1ju1kxc{height:100%;width:100%;border-radius:7px;z-index:-1;-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;background-color:#000;opacity:0.38;}</style><span class="MuiSwitch-track css-1ju1kxc"></span></span><div class="wrapper"><div class="lottie-wrapper"><style data-emotion="css 1gybl1y-styled-lottie">.css-1gybl1y-styled-lottie{width:100%;height:100%;}</style><div width="100%" height="100%" class="css-1gybl1y-styled-lottie"></div></div><div class="title"><style data-emotion="css dtw560">.css-dtw560{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><a class="css-dtw560" href="/"><style data-emotion="css kcbsw7-styled-lottie">.css-kcbsw7-styled-lottie{width:70px;height:70px;}</style><div width="70px" height="70px" class="css-kcbsw7-styled-lottie"></div><b>FE는 철</b></a><div class="desc">FE 개발자로 일하면서 겪은 경험담을 정리합니다.</div></div></div></header><div style="opacity:0"><style data-emotion="css 674psz-post-layout">.css-674psz-post-layout{margin:30px auto;max-width:850px;width:90%;}.css-674psz-post-layout img{max-width:100%;}.css-674psz-post-layout .post-desc{border-radius:4px;background-color:#BDCC94;padding:20px;margin:20px auto;color:#FFFFFF;font-size:1.1rem;}.css-674psz-post-layout .post-contents a{color:#95998A;-webkit-text-decoration:underline;text-decoration:underline;}.css-674psz-post-layout .post-contents a:hover{color:#000;cursor:pointer;}.css-674psz-post-layout .post-contents code{background:rgba(135, 131, 120, 0.15);color:#eb5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em;}</style><main class="css-674psz-post-layout"><div><h2>기존 프로젝트에 다국어 처리를 적용해보자(react-i18next)</h2></div><small>2022.03.20<!-- --> 작성 / @<!-- -->jangky000</small><hr/><div class="post-desc">회사에서 사업의 해외 진출을 준비하면서 영문 버전의 사이트가 필요해졌다. 대시보드라는 기존의 프로젝트에 어떻게 다국어 처리를 적용했는지에 대한 경험을 공유한다. 또한 두 번의 다국어 처리 작업 과정을 소개하고 업무 프로세스를 개선했던 경험을 이야기해보고자 한다.</div><div class="post-contents"><h1>다국어 처리(i18n)</h1><p>다국어 처리란 웹 브라우저를 사용하는 국가에 따라 다양한 언어 및 지역을 지원하는 서비스이다.</p><p>i18n 뜻은 국제화(internationalization)의 스펠링에서 ‘I’ + 18글자 + ‘N’을 뜻한다.</p><h2>기존 업무 프로세스</h2><p>이 작업을 맡기 직전에 <code>회사 소개 웹사이트</code>의 번역 작업이 진행된 적이 있었다. </p><ol><li>기획을 담당하는 팀에서 웹사이트 전체를 살펴보며 번역이 필요한 부분을 찾는다.</li><li>번역이 필요한 문구를 모아 구글 스프레드 시트에 업로드한다.</li><li>번역팀이 구글 스프레드 시트를 전달 받아 번역 작업을 진행한다.</li><li>개발 팀이 번역 작업된 스프레드 시트를 전달 받아 json 파일을 생성하고, 프로젝트 내에서 번역이 필요한 부분과 번역 키를 매칭한 후, 번역이 잘 되었는지 확인하며 작업을 진행한다.</li></ol><h2>기존 업무 프로세스의 장단점</h2><p><strong>장점</strong></p><ul><li>페이지 단위별로 번역 문구를 모아서 정리했기 때문에 해당 문구가 어느 페이지에 있는지 찾는 것이 수월했다.</li></ul><p><strong>단점</strong> </p><ul><li>무수히 많은 번역 키를 직접 지정하는 것이 어려웠다.</li><li>띄어쓰기 하나, 오타 하나, 대소문자 하나의 차이로 인해 번역 키를 인식하고 인식하지 못하는 일들이 발생하기 때문에 눈이 빠지도록 json 상의 번역 키와 html 상의 문구를 비교해야 했다.</li><li>반복되는 문구의 중복을 제거하기 어려웠다.</li><li>웹 사이트 상에서 쉽게 볼 수 없는 처리 응답 문구나 특정 조건 특정 상황에서 볼 수 있는 문구가 누락되는 경우가 많았다. 번역이 누락되는 경우 필요한 문구를 정리해서 다시 요청해야 했다.</li><li>번역 작업보다 개발 작업 프로세스가 더 많고 단순 노동 작업이 많아 시간이 오래 걸렸다.</li></ul><h2>변경 된 업무 프로세스</h2><p><code>대시보드</code> 프로젝트는 <code>회사 소개 웹사이트</code>에 비해 훨씬 많은 기능들이 있었고, 고객들이 중점적으로 사용하는 웹사이트였다. 기존의 업무 프로세스로 번역 작업을 진행할 경우에 누락되는 문구가 아주 많을 것으로 예상되었고, 작업 기한 역시 한 달 정도로 촉박한 상황이었다. 그때 다른 좋은 방법이 없을까 고민하며 자료를 찾던 중, 유동식님이 작성하신 <code>국제화(i18n) 자동화 가이드</code>(참고: <a href="https://meetup.toast.com/posts/295">링크</a>) 포스트를 보게 되었다. 번역 작업 진행 초기에 i18next-scanner를 설정하고 테스트를 마친 후 아래와 같은 업무 프로세스를 제안했다. 또한 사용법 및 컨벤션을 정리하여 공유했다.</p><ol><li>대시보드 프로젝트의 소스 상에서 번역이 필요한 한글 문구들을 모두 i18next.t()라는 메소드로 감싼다.</li><li>i18next-scanner를 이용하여 번역 키를 한번에 구글 스프레드 시트에 업로드한다.</li><li>번역팀에서 번역 작업이 끝나면 번역을 다운로드 받아 대시보드에 적용하고 확인한다.</li></ol><h2>변경된 업무 프로세스의 장단점</h2><p><strong>장점</strong></p><ul><li>한글 문구를 그대로 키로 사용하여 번역 키를 지정하는 것에 고민하지 않을 수 있었고, 오타나 띄어쓰기로 인한 스트레스가 줄어들었다.</li><li>중복된 번역 키가 자동으로 제거된다.</li><li>웹 사이트 상에서 쉽게 볼 수 없는 처리 응답 문구나 특정 조건 특정 상황에서 볼 수 있는 문구까지 누락되는 부분 없이 한번에 작업 가능했다.</li><li>다른 언어로 번역을 추가하는 것이 쉽다.</li><li>새로운 기능을 추가할 때도 작업 중에 기획이 변경되거나 문구가 수정되는 경우가 많은데 먼저 기능 추가 작업 후 번역을 진행할 수 있어 반복 작업이 줄어든다.</li><li>정말 신기하다.</li></ul><p><strong>단점</strong></p><ul><li>페이지의 상황에 따라 번역의 어투가 달라져야하는 경우가 있는데 어느 페이지에서 나온 문구인지 헷갈리는 상황이 종종 발생한다.</li><li>번역 문구마다 함수를 씌워줘야 하는 단순 작업까지 줄어들지는 않았다.</li></ul><h2>적용 결과</h2><h3>json 파일 예시</h3><p><strong>/src/i18n/locales/ko-KR/translation.json</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-json" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#905">&quot;{{count}}명_0&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;{{count}}명&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#905">&quot;데이터 조회&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;데이터 조회&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><p><strong>/src/i18n/locales/en-US/translation.json</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-json" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#905">&quot;{{count}}명&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;[작성 필요]&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#905">&quot;{{count}}명_plural&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;[작성 필요]&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#905">&quot;데이터 조회&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;[작성 필요]&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><h3>구글 스프레드 시트 예시</h3><span><img width="1377" alt="1" src="https://user-images.githubusercontent.com/46799722/159149909-f0c63b45-49b6-4d40-b834-0167eeac3b5e.png"></span><h2>사용법 및 컨벤션</h2><h3>작업 순서</h3><ol><li>번역 필요한 문구를 i18next.t() 메소드의 인자로 넘겨준다.</li><li><code>yarn upload:i18n</code>을 실행하여 번역 키들을 구글 스프레드 시트로 업로드한다.</li><li>번역팀에서 구글 시트에 번역을 진행한다.</li><li><code>yarn download:i18n</code>을 실행하여 구글 스프레드 시트로부터 번역된 내용을 다운로드 받는다.</li><li>언어 설정을 바꿔보고 번역이 잘 동작하는지 확인 후 작업을 완료한다.</li></ol><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray"># scan</span><span>
</span><span>$ </span><span class="token" style="color:#DD4A68">yarn</span><span> scan:i18n
</span><span></span><span class="token" style="color:slategray"># 실행 시 src 폴더 내에서 i18next.t() 메소드로 감싸져 있는 키를 스캔한다.</span><span>
</span><span></span><span class="token" style="color:slategray"># 실행 시 중복된 키는 하나의 키로 생성된다.</span><span>
</span><span></span><span class="token" style="color:slategray"># 실행 시 json 파일 생성되거나, 기존 json 파일에 새로운 키가 추가된다.</span><span>
</span>
<span></span><span class="token" style="color:slategray"># upload</span><span>
</span><span>$ </span><span class="token" style="color:#DD4A68">yarn</span><span> upload:i18n
</span><span></span><span class="token" style="color:slategray"># 실행 시 yarn scan:i18n을 실행한 후 google spread sheet에 scan된 키와 값을 업로드한다.</span><span>
</span><span></span><span class="token" style="color:slategray"># 기존에 없는 키만 추가 업로드된다.</span><span>
</span>
<span></span><span class="token" style="color:slategray"># download</span><span>
</span><span>$ </span><span class="token" style="color:#DD4A68">yarn</span><span> download:i18n
</span><span></span><span class="token" style="color:slategray"># google spread sheet에서 번역 키와 값을 json 파일로 다운로드한다.</span></code></pre><h3>구글 시트 작성 가이드</h3><ol><li>&#x27;대시보드 번역&#x27; sheet 의 한글(B column)의 내용을 영어(C column) 에 번역하여 작성합니다.</li><li>{{text}}는 변수 입니다. 번역 시 변수에 해당하는 단어가 오는 곳에 동일하게 {{text}} 형식으로 작성합니다.</li><li><p>{{count}} 변수가 들어가는 문장은 단수/복수 문법이 있기 때문에 번역 시 키(A 칼럼)의 내용을 번역해야합니다.</p><span><img width="1172" alt="2" src="https://user-images.githubusercontent.com/46799722/159149911-522fea13-7f7b-49d5-ad71-8a7329a98cf9.png"></span></li><li><p>&lt;1&gt;abcd&lt;/1&gt;, &lt;1&gt;&lt;0&gt;abcd&lt;/0&gt;&lt;/1&gt;과 같이 꺾쇠(&lt;&gt;) 형태는 HTML tag 가 사용 된 문장으로, bold, color 등이 적용 된 문장 입니다.번역 시에 HTML tag 가 들어가는 부분은 동일하게 작성합니다.</p><span><img width="1180" alt="3" src="https://user-images.githubusercontent.com/46799722/159149913-1dda16f5-4fab-4134-a57a-b5f240fc09fc.png"></span></li><li>영어(C column)에 <strong>_N/A</strong> 표시된 cell은 번역하지 않습니다.</li><li>키(A column), 한글(B column) 은 절대 수정하면 안됩니다.</li></ol><h3>기본 사용법</h3><p><strong>Before</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-tsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">MyComponent</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> freeEndTime </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>  </span><span class="token" style="color:#905">3</span><span>
</span>
<span>	</span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>		</span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">			</span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">span</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">평가판</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">span</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">			</span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">span</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">Professional 무료 평가판의 이용 기간이 </span><span class="token" style="color:#999">{</span><span>freeEndTime</span><span class="token" style="color:#999">}</span><span class="token plain-text">일 남았습니다.</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">span</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">		</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>	</span><span class="token" style="color:#999">)</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><p><strong>After</strong></p><ul><li>{ t } = useTranslation()의 형태로도 사용 가능하지만 t라는 함수 이름이 너무 흔하고, 다른 지역 변수와 충돌이 있을 수 있을 것 같아 i18next.t로 사용하는 것으로 통일했다.</li><li>만약 t 함수를 사용하고 싶을 때는 scanner 인식을 위해 i18next-scanner.config.js에서 options.func.list 배열에 &#x27;t&#x27;를 추가해줘야 한다.</li></ul><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-tsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> useTranslation </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;react-i18next&#x27;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">MyComponent</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span class="token" style="color:#999">{</span><span>
</span><span>	</span><span class="token" style="color:#07a">const</span><span> i18next </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useTranslation</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>	</span><span class="token" style="color:#07a">const</span><span> freeEndTime </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>  </span><span class="token" style="color:#905">3</span><span class="token" style="color:#999">;</span><span>
</span>
<span>	</span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>		</span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">			</span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">span</span><span class="token" style="color:#999">&gt;</span><span class="token" style="color:#999">{</span><span>i18next</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">t</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;평가판&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">span</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">			</span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">span</span><span class="token" style="color:#999">&gt;</span><span class="token" style="color:#999">{</span><span>i18next</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">t</span><span class="token" style="color:#999">(</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">Professional 무료 평가판의 이용 기간이 {{freeEndTime}}일 남았습니다.</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>             freeEndTime</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> freeEndTime</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">}</span><span class="token plain-text">
</span><span class="token plain-text">			</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">span</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">		</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>	</span><span class="token" style="color:#999">)</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><h3>응용 사용법</h3><p><strong>(1) 번역에 변수 포함하기(interpolation)</strong></p><p>interpolation 속성 이름 자유롭게 선택 가능 (참고: <a href="https://www.i18next.com/translation-function/interpolation">interpolation</a>)</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-tsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// 예시</span><span>
</span><span>i18next</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">t</span><span class="token" style="color:#999">(</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">{{email}}은 구글 계정입니다.</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span> email</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;example@gmail.com&#x27;</span><span> </span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// 예시2</span><span>
</span><span></span><span class="token" style="color:#999">{</span><span>i18next</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">t</span><span class="token" style="color:#999">(</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">프로젝트의 이용기간이 {{end_time}} 후로 만료되었습니다.</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  end_time</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#DD4A68">moment</span><span class="token" style="color:#999">(</span><span>end_time</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">format</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;YYYY-MM-DD&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">}</span></code></pre><p><strong>(2) 언어별 복수 단수 표현 대응하기</strong>(<strong>_plural 과 _0)</strong></p><ul><li>interpolation 속성 이름으로 반드시 <code>count</code>를 사용한다 . (참고: <a href="https://www.i18next.com/translation-function/plurals">plurals</a>)</li><li>i18next.t()메소드의 키가 <code>최대 캠페인의 수는 {{count}}개입니다.</code>일 때,<ul><li>한국어와 같이 명사에 복수형이 없는 언어일 때: <code>최대 캠페인의 수는 {{count}}개입니다._0</code>만 작성</li><li>영어와 같이 복수형이 있는 언어일 때: <code>최대 캠페인의 수는 {{count}}개입니다.</code>, <code>최대 캠페인의 수는 {{count}}개입니다._plural</code> 작성</li></ul></li></ul><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-tsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// 예시</span><span>
</span>
<span>i18next</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">t</span><span class="token" style="color:#999">(</span><span>
</span><span>  </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">최대 캠페인의 수는 {{**count**}}개입니다.</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">**</span><span>count</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">**</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> projectStore</span><span class="token" style="color:#999">.</span><span class="token property-access">max_campaign_count</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span></code></pre><p><strong>(3) html 태그를 포함한 한글 번역</strong></p><ul><li><code>&lt;Trans /&gt;</code> 컴포넌트 사용하여 번역한다.</li><li><code>&lt;Trans /&gt;</code> 컴포넌트 내부에서 React 조건부 렌더링 사용이 불가하다.</li><li>i18nKey에 html을 포함해야 한다. (자체 컨벤션)<ul><li>Trans 컴포넌트 내부에 있는 한글을 default value로 제대로 scan하지 못하는 문제가 있었다.</li><li>i18next-scanner.config.js에 설정을 추가한 후 자체 컨벤션으로 html을 포함하도록 해서 문제를 해결했다.</li></ul></li></ul><p><strong>Before</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-tsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>
</span>
<span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">  이 프로젝트에 발급된 추적 ID는 </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">strong</span><span class="token" style="color:#999">&gt;</span><span class="token" style="color:#999">{</span><span> projectID </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">strong</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">입니다. 아래의 기본 추적 스크립트 코드
</span><span class="token plain-text">  블럭을 복사하여
</span><span class="token plain-text">  </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">br</span><span class="token" style="color:#905"> </span><span class="token" style="color:#999">/&gt;</span><span class="token plain-text">
</span><span class="token plain-text">  웹사이트 HTML 의 공통 영역 &amp;lt;head&amp;gt;&amp;lt;&amp;#47;head&amp;gt;에 붙여 넣으세요.
</span><span class="token plain-text"></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span></code></pre><p><strong>After</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-tsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Trans</span><span class="token imports" style="color:#999">,</span><span class="token imports"> useTranslation </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;react-i18next&#x27;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// 예시1</span><span>
</span><span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">	</span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#DD4A68">Trans</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">i18nKey</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">웹사이트 연결 준비 안내 html</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">	  이 프로젝트에 발급된 추적 ID는 </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">strong</span><span class="token" style="color:#999">&gt;</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">{</span><span> projectID </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">strong</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">입니다. 아래의 기본 추적 스크립트 코드
</span><span class="token plain-text">	  블럭을 복사하여
</span><span class="token plain-text">	  </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">br</span><span class="token" style="color:#905"> </span><span class="token" style="color:#999">/&gt;</span><span class="token plain-text">
</span><span class="token plain-text">	  웹사이트 HTML 의 공통 영역 &amp;lt;head&amp;gt;&amp;lt;&amp;#47;head&amp;gt;에 붙여 넣으세요.
</span><span class="token plain-text">	</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#DD4A68">Trans</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text"></span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// 예시2</span><span>
</span><span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#DD4A68">Trans</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">i18nKey</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">대시보드 데모 체험 안내 html</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">  데모 쇼핑몰의 데이터를 활용하여 </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">{</span><span> name_kr</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> dashboard_config</span><span class="token" style="color:#999">.</span><span class="token property-access">name_kr</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">}</span><span class="token plain-text"> 대시보드 내의 기능을 </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">br</span><span class="token" style="color:#905"> </span><span class="token" style="color:#999">/&gt;</span><span class="token plain-text">
</span><span class="token plain-text">  체험할 수 있습니다.
</span><span class="token plain-text"></span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#DD4A68">Trans</span><span class="token" style="color:#999">&gt;</span></code></pre><p><strong>(4) Trans 컴포넌트에서 복수형 처리 사용</strong></p><ul><li><code>npm run scan:i18n</code>으로 _plural이 잘 생성되는지 확인해봐야 한다.</li></ul><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-tsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// 예시: -&gt; _plural 과 _0 생성</span><span>
</span><span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#DD4A68">Trans</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">i18nKey</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">사용자 내보내기 html</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">count</span><span class="token script language-javascript script-punctuation" style="color:#905">=</span><span class="token script language-javascript" style="color:#999">{</span><span class="token script language-javascript" style="color:#905">totalItem</span><span class="token script language-javascript" style="color:#999">}</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">  </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">strong</span><span class="token" style="color:#999">&gt;</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">{</span><span> count</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> totalItem </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">strong</span><span class="token" style="color:#999">&gt;</span><span class="token plain-text">
</span><span class="token plain-text">  명의 사용자를 내보낼 수 있습니다.
</span><span class="token plain-text"></span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#DD4A68">Trans</span><span class="token" style="color:#999">&gt;</span></code></pre><p><strong>(5) 컴포넌트 바깥에 있는 문자열 번역</strong></p><p><strong>방법1: Dummy function 사용</strong> </p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-tsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// i18next.t()로 감싸지 않은 한글을 i18next-scanner에서 scan 해주기 위해 씌우는 dummy function</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">const</span><span> i18nextScanKey </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>key</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token parameter">string</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> key</span><span class="token" style="color:#999">;</span></code></pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-tsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> i18nextScanKey </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;../i18n&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> useTranslation </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;react-i18next&#x27;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> itemList </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">[</span><span>
</span><span>	</span><span class="token" style="color:#999">{</span><span>
</span><span>		label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#DD4A68">i18nextScanKey</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;수정&#x27;</span><span class="token" style="color:#999">)</span><span>
</span><span>	</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>	</span><span class="token" style="color:#999">{</span><span>
</span><span>		label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#DD4A68">i18nextScanKey</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;저장&#x27;</span><span class="token" style="color:#999">)</span><span>
</span><span>	</span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">]</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">MyComponent</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span class="token" style="color:#999">{</span><span>
</span><span>	</span><span class="token" style="color:#07a">const</span><span> i18next </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useTranslation</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>	</span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>		</span><span class="token" style="color:#999">{</span><span>itemList</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">map</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token parameter">item</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span class="token" style="color:#999">{</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">i18next</span><span class="token template-string interpolation" style="color:#999">.</span><span class="token template-string interpolation method property-access" style="color:#DD4A68">t</span><span class="token template-string interpolation" style="color:#999">(</span><span class="token template-string interpolation">item</span><span class="token template-string interpolation" style="color:#999">.</span><span class="token template-string interpolation property-access">label</span><span class="token template-string interpolation" style="color:#999">)</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">}</span><span>
</span><span>	</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><ul><li>dummy function으로 번역이 필요한 부분을 감싸주어 i18next-scanner가 인식할 수 있게 설정한다.</li><li>(참고: <a href="https://stackoverflow.com/questions/58452182/using-react-i18next-t-function-outside-components-having-troubles-using-promise">using-react-i18next-t-function-outside-components-having-troubles-using-promise</a>)</li><li><strong>interpolation을 대응할 수 없는 문제가 있다.</strong></li></ul><p><strong>방법2: 함수 파라미터로 i18next 넘기기</strong></p><p><strong>Before</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-jsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">const</span><span> tabList </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">[</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span> id</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;plan-payment&#x27;</span><span class="token" style="color:#999">,</span><span> label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;플랜 결제 내역&#x27;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span> id</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">,</span><span> type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;credit-payment&#x27;</span><span class="token" style="color:#999">,</span><span> label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;마케팅 예산 충전 내역&#x27;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span> id</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">3</span><span class="token" style="color:#999">,</span><span> type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;usage&#x27;</span><span class="token" style="color:#999">,</span><span> label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;크레딧 및 마케팅 예산 현황&#x27;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">MyComponent</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span class="token" style="color:#999">{</span><span>
</span><span>	</span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><p><strong>After</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-jsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> useTranslation </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;react-i18next&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">I18Next</span><span class="token imports"> </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;../../i18n&#x27;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">getTabList</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token parameter">i18next</span><span class="token parameter" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">I18Next</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">[</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span> id</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;plan-payment&#x27;</span><span class="token" style="color:#999">,</span><span> label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> i18next</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">t</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;플랜 결제 내역&#x27;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span> id</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">,</span><span> type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;credit-payment&#x27;</span><span class="token" style="color:#999">,</span><span> label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> i18next</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">t</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;마케팅 예산 충전 내역&#x27;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span> id</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">3</span><span class="token" style="color:#999">,</span><span> type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;usage&#x27;</span><span class="token" style="color:#999">,</span><span> label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> i18next</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">t</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;크레딧 및 마케팅 예산 현황&#x27;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">MyComponent</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span class="token" style="color:#999">{</span><span>
</span><span>	</span><span class="token" style="color:#07a">const</span><span> i18next </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useTranslation</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>	</span><span class="token" style="color:#07a">const</span><span> tabList </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">getTabList</span><span class="token" style="color:#999">(</span><span>i18next</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>	</span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><h2>설정 방법</h2><h3>디렉토리 구조</h3><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>📂src
</span> ┣📂i18n
<!-- --> ┃ ┣ 📂locales
<!-- --> ┃ ┃ ┣ 📂en-US
<!-- --> ┃ ┃ ┃ ┗ 📜translation.json
<!-- --> ┃ ┃ ┗ 📂ko-KR
<!-- --> ┃ ┃ ┃ ┗ 📜translation.json
<!-- --> ┃ ┗ 📜index.ts
<!-- --> ┣ 📂components
<!-- -->...
<!-- -->📂translate
<!-- --> ┣ 📂.credentials
<!-- --> ┃ ┣ 📜index.js
<!-- --> ┃ ┗ 📜practical-net-....json
<!-- --> ┣ 📜download.js
<!-- --> ┣ 📜index.js
<!-- --> ┗ 📜upload.js
<!-- -->...
<!-- -->📜i18next-scanner.config.js
<!-- -->📜package.json
<!-- -->...
</code></pre><h3>설치</h3><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#DD4A68">yarn</span><span> </span><span class="token" style="color:#DD4A68">add</span><span> react-i18next i18next @types/react-i18next @types/i18next i18next-scanner google-spreadsheet</span></code></pre><h3>react-i18next 설정</h3><p>/<strong>src/i18n/index.ts</strong> (참고: <a href="https://react.i18next.com/guides/quick-start#configure-i18next">Configure i18next</a>)</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-tsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports">i18n</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;i18next&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> initReactI18next </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;react-i18next&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports">koKR</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;./locales/ko-KR/translation.json&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports">enUS</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;./locales/en-US/translation.json&#x27;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> resources </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  ko</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span> translation</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> koKR </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  en</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span> translation</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> enUS </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// 브라우저 언어 설정 가져오기</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> browserLang </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token dom" style="color:#e90">window</span><span class="token" style="color:#999">.</span><span class="token property-access">navigator</span><span class="token" style="color:#999">.</span><span class="token property-access">language</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">split</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;-&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">[</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// localStorage에서 언어 설정 가져오기</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> userLanguage </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">[</span><span class="token dom" style="color:#e90">localStorage</span><span>에서 언어 설정 가져오기</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">??</span><span> browserLang</span><span class="token" style="color:#999">;</span><span>
</span>
<span>i18n</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">use</span><span class="token" style="color:#999">(</span><span>initReactI18next</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">init</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>
</span><span>  resources</span><span class="token" style="color:#999">,</span><span>
</span><span>  lng</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> userLanguage </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">||</span><span> </span><span class="token" style="color:#690">&#x27;ko&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>  fallbackLng</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;ko&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>  debug</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">,</span><span>
</span><span>  defaultNS</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;translation&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>  ns</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;translation&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>  keySeparator</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">,</span><span>
</span><span>  interpolation</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    escapeValue</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">,</span><span>
</span><span>    alwaysFormat</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">format</span><span class="token" style="color:#999">(</span><span class="token parameter">value</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> format</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> lng</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>format </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&#x27;uppercase&#x27;</span><span class="token" style="color:#999">)</span><span> </span><span class="token control-flow" style="color:#07a">return</span><span> value</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toUpperCase</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>			</span><span class="token" style="color:slategray">// interpolation 되는 값이 number로 들어올 때, 언어 설정에 맞는 locale string으로 변환해서 반환</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">typeof</span><span> value </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&#x27;number&#x27;</span><span class="token" style="color:#999">)</span><span> </span><span class="token control-flow" style="color:#07a">return</span><span> value</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toLocaleString</span><span class="token" style="color:#999">(</span><span>lng</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">return</span><span> value</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  react</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    defaultTransParent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;div&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    transEmptyNodeValue</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    transSupportBasicHtmlNodes</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span>		</span><span class="token" style="color:slategray">// &lt;Trans&gt; 컴포넌트 내부에 들어가는 html 태그들</span><span>
</span><span>    transKeepBasicHtmlNodesFor</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&#x27;br&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;strong&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;i&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;button&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;a&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;span&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;div&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;input&#x27;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">,</span><span>
</span><span>    transWrapTextNodes</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  nsSeparator</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;=&gt;&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:slategray">// default: &#x27;:&#x27;, :가 번역 키에 포함되는 사례가 있어, 번역 키로 사용되지 않을 것 같은 seperator를 설정</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> i18n</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// i18next를 파라미터로 넘길 때 사용할 인터페이스 타입</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">I18Next</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token function-variable" style="color:#DD4A68">t</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span class="token parameter">str</span><span class="token parameter" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token parameter"> string</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> option</span><span class="token parameter" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token parameter" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token parameter"> </span><span class="token parameter known-class-name" style="color:#DD4A68">Object</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// scanner를 사용하기 위한 dummy function</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">const</span><span> i18nextScanKey </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>key</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token parameter">string</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> key</span><span class="token" style="color:#999">;</span></code></pre><h3>i18next-scanner 설정</h3><p>/<strong>i18next-scanner.config.js</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-jsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">const</span><span> fs </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;fs&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> path </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;path&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> typescript </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;typescript&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#905">COMMON_EXTENSIONS</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&#x27;/**/*.{js,jsx,ts,tsx,vue,html}&#x27;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>module</span><span class="token" style="color:#999">.</span><span class="token property-access">exports</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  input</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">./src/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation" style="color:#905">COMMON_EXTENSIONS</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">,</span><span>
</span><span>  options</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    debug</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:slategray">// removeUnusedKeys: true,</span><span>
</span><span>    defaultLng</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;ko-KR&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    lngs</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&#x27;ko-KR&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;en-US&#x27;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">,</span><span>
</span><span>    func</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      list</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&#x27;i18next.t&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;i18n.t&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;$i18n.t&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;$i18next.t&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;i18nextScanKey&#x27;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">,</span><span>
</span><span>      extensions</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&#x27;.js&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;.jsx&#x27;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>    trans</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;Trans&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>      i18nKey</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;i18nKey&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>      defaultsKey</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;defaults&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>      extensions</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&#x27;.js&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;.jsx&#x27;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">,</span><span>
</span><span>      </span><span class="token function-variable" style="color:#DD4A68">fallbackKey</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">function</span><span class="token" style="color:#999">(</span><span class="token parameter">ns</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> value</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> value</span><span class="token" style="color:#999">;</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>      acorn</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>          ecmaVersion</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">10</span><span class="token" style="color:#999">,</span><span>
</span><span>          sourceType</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;module&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>    resource</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      loadPath</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> path</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">join</span><span class="token" style="color:#999">(</span><span>__dirname</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;/src/i18n/locales/{{lng}}/{{ns}}.json&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span><span>      savePath</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> path</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">join</span><span class="token" style="color:#999">(</span><span>__dirname</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;/src/i18n/locales/{{lng}}/{{ns}}.json&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">defaultValue</span><span class="token" style="color:#999">(</span><span class="token parameter">lng</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> ns</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> key</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:#07a">const</span><span> keyAsDefaultValue </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&#x27;ko-KR&#x27;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>keyAsDefaultValue</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">includes</span><span class="token" style="color:#999">(</span><span>lng</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">const</span><span> separator </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&#x27;html&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#07a">const</span><span> value </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> key</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">includes</span><span class="token" style="color:#999">(</span><span>separator</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span> </span><span class="token" style="color:#690">&#x27;&#x27;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> key</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> value</span><span class="token" style="color:#999">;</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#690">&#x27;[작성 필요]&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>    keySeparator</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">,</span><span>
</span><span>    nsSeparator</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">,</span><span>
</span><span>    prefix</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;{{&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    suffix</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;}}&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token function-variable" style="color:#DD4A68">transform</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">typescriptTransform</span><span class="token" style="color:#999">(</span><span>
</span><span>    options </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      tsOptions</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        target</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;es2018&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>      extensions</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;.ts&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;.tsx&quot;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span>  </span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">transform</span><span class="token" style="color:#999">(</span><span class="token parameter">file</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> enc</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> done</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">{</span><span> base</span><span class="token" style="color:#999">,</span><span> ext </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> path</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">parse</span><span class="token" style="color:#999">(</span><span>file</span><span class="token" style="color:#999">.</span><span class="token property-access">path</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>  
<span>      </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>options</span><span class="token" style="color:#999">.</span><span class="token property-access">extensions</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">includes</span><span class="token" style="color:#999">(</span><span>ext</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;&amp;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span>base</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">endsWith</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;.d.ts&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;&amp;</span><span> base</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">indexOf</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;reportWebVitals.ts&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">const</span><span> content </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> fs</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">readFileSync</span><span class="token" style="color:#999">(</span><span>file</span><span class="token" style="color:#999">.</span><span class="token property-access">path</span><span class="token" style="color:#999">,</span><span> enc</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>  
<span>        </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">{</span><span> outputText </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> typescript</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">transpileModule</span><span class="token" style="color:#999">(</span><span>content</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>          compilerOptions</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> options</span><span class="token" style="color:#999">.</span><span class="token property-access">tsOptions</span><span class="token" style="color:#999">,</span><span>
</span><span>          fileName</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> path</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">basename</span><span class="token" style="color:#999">(</span><span>file</span><span class="token" style="color:#999">.</span><span class="token property-access">path</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>  
<span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">parser</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">parseTransFromString</span><span class="token" style="color:#999">(</span><span>outputText</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">parser</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">parseFuncFromString</span><span class="token" style="color:#999">(</span><span>outputText</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span>
</span>  
<span>      </span><span class="token" style="color:#DD4A68">done</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> extensions</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;.tsx&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;.ts&#x27;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">,</span><span> tsOptions</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    target</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;es5&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    module</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;esnext&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></pre><h3>Google Spread Sheet 연동</h3><ol><li><a href="https://console.cloud.google.com/apis/dashboard">https://console.cloud.google.com/apis/dashboard</a> 이동</li><li><p>사용자 정보 인증 탭으로 이동</p><span><img width="1423" alt="4" src="https://user-images.githubusercontent.com/46799722/159149914-e3da4f30-f730-4cb3-a9c6-312ff99c0358.png"></span></li><li><p>사용자 인증 정보 만들기 → 서비스 계정 클릭</p><span><img width="976" alt="5" src="https://user-images.githubusercontent.com/46799722/159149915-0517966b-b210-4b7d-8362-e664f6b03353.png"></span></li><li><p>서비스 계정 이름 입력 후 완료 클릭</p><span><img width="608" alt="6" src="https://user-images.githubusercontent.com/46799722/159149916-9b7521df-b997-462e-aa6e-f5f63ef9da85.png"></span></li><li><p>생성한 서비스 계정 클릭</p><span><img width="1156" alt="7" src="https://user-images.githubusercontent.com/46799722/159149918-7c065d1c-fbed-46d3-bc02-f7aafd953adb.png"></span></li><li><p>키 탭으로 이동하여 새 키 생성</p><span><img width="1161" alt="8" src="https://user-images.githubusercontent.com/46799722/159149919-f065073d-0555-4709-a1d7-5655386309fa.png"></span></li><li><p>키 유형 JSON으로 선택 → json 파일 다운로드 → react 프로젝트 최상단에 translate/.credentials 폴더 생성후 구글 스프레드시트에서 다운 받은 JSON 파일 저장</p><span><img width="557" alt="9" src="https://user-images.githubusercontent.com/46799722/159149920-bea956ca-97c5-4baa-8c9e-1d25ccd30bcf.png"></span></li><li>세부 정보 → 이메일 복사 → 구글 스프레드 시트에 공유 클릭 → 이메일 추가</li></ol><span><img width="771" alt="10" src="https://user-images.githubusercontent.com/46799722/159149922-235997fb-68e3-4b18-82e3-471ce6d22fff.png"></span><span><img width="1383" alt="11" src="https://user-images.githubusercontent.com/46799722/159149923-0942d37f-9dd8-4c88-b358-5864e352c1ce.png"></span><span><img width="620" alt="12" src="https://user-images.githubusercontent.com/46799722/159149924-87391178-b113-45a7-a783-8585ab29a8b6.png"></span><h3>translate 디렉토리</h3><p><strong>translate/.credentials/index.js</strong></p><p>translate/.credentials 디렉토리를 .gitignore에 추가하기</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>module.exports</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>
</span><span>    CREDS: </span><span class="token" style="color:#690">&#x27;[구글 서비스 계정 설정 시 다운로드 받은 json 파일 이름].json&#x27;</span><span>,
</span><span>    SHEET_DOC_ID: </span><span class="token" style="color:#690">&quot;[sheet document id]&quot;</span><span>,
</span><span>    SHEET_ID: </span><span class="token" style="color:#905">1</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><p><strong>translate/index.js</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-jsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">{</span><span class="token maybe-class-name">GoogleSpreadsheet</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;google-spreadsheet&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#905">ENV</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;./.credentials/index.js&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> creds </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;./.credentials/&#x27;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#905">ENV</span><span class="token" style="color:#999">.</span><span class="token" style="color:#905">CREDS</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> i18nextConfig </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;../i18next-scanner.config&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> spreadsheetDocId </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">ENV</span><span class="token" style="color:#999">.</span><span class="token" style="color:#905">SHEET_DOC_ID</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> ns </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&#x27;translation&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> lngs </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> i18nextConfig</span><span class="token" style="color:#999">.</span><span class="token property-access">options</span><span class="token" style="color:#999">.</span><span class="token property-access">lngs</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> loadPath </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> i18nextConfig</span><span class="token" style="color:#999">.</span><span class="token property-access">options</span><span class="token" style="color:#999">.</span><span class="token property-access">resource</span><span class="token" style="color:#999">.</span><span class="token property-access">loadPath</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> localesPath </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> loadPath</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">replace</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;/{{lng}}/{{ns}}.json&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> rePluralPostfix </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">RegExp</span><span class="token" style="color:#999">(</span><span class="token regex-delimiter" style="color:#e90">/</span><span class="token regex-source language-regex" style="color:#e90">_plural|_[\d]</span><span class="token regex-delimiter" style="color:#e90">/</span><span class="token regex-flags" style="color:#e90">g</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> sheetId </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">ENV</span><span class="token" style="color:#999">.</span><span class="token" style="color:#905">SHEET_ID</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// your sheet id</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#905">NOT_AVAILABLE_CELL</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&#x27;_N/A&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> columnKeyToHeader </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  key</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;키&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#690">&#x27;ko-KR&#x27;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;한글&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#690">&#x27;en-US&#x27;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;영어&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">/**
</span><span class="token" style="color:slategray"> * getting started from https://theoephraim.github.io/node-google-spreadsheet
</span><span class="token" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">loadSpreadsheet</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:slategray">// eslint-disable-next-line no-console</span><span>
</span><span>  </span><span class="token console" style="color:#DD4A68">console</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">info</span><span class="token" style="color:#999">(</span><span>
</span><span>    </span><span class="token" style="color:#690">&#x27;\u001B[32m&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#690">&#x27;=====================================================================================================================\n&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#690">&#x27;# i18next auto-sync using Spreadsheet\n\n&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#690">&#x27;  * Download translation resources from Spreadsheet and make /src/i18n/locales/{{lng}}/{{ns}}.json\n&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#690">&#x27;  * Upload translation resources to Spreadsheet.\n\n&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">The Spreadsheet for translation is here (\u001B[34mhttps://docs.google.com/spreadsheets/d/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">spreadsheetDocId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string" style="color:#690">/#gid=</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">sheetId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string" style="color:#690">\u001B[0m)\n</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#690">&#x27;=====================================================================================================================&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#690">&#x27;\u001B[0m&#x27;</span><span>
</span><span>  </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token" style="color:slategray">// spreadsheet key is the long id in the sheets URL</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> doc </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">GoogleSpreadsheet</span><span class="token" style="color:#999">(</span><span>spreadsheetDocId</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token" style="color:slategray">// load directly from json file if not in secure environment</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">await</span><span> doc</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">useServiceAccountAuth</span><span class="token" style="color:#999">(</span><span>creds</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#07a">await</span><span> doc</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">loadInfo</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// loads document properties and worksheets</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#07a">return</span><span> doc</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">getPureKey</span><span class="token" style="color:#999">(</span><span>key </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&#x27;&#x27;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> key</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">replace</span><span class="token" style="color:#999">(</span><span>rePluralPostfix</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span>module</span><span class="token" style="color:#999">.</span><span class="token property-access">exports</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  localesPath</span><span class="token" style="color:#999">,</span><span>
</span><span>  loadSpreadsheet</span><span class="token" style="color:#999">,</span><span>
</span><span>  getPureKey</span><span class="token" style="color:#999">,</span><span>
</span><span>  ns</span><span class="token" style="color:#999">,</span><span>
</span><span>  lngs</span><span class="token" style="color:#999">,</span><span>
</span><span>  sheetId</span><span class="token" style="color:#999">,</span><span>
</span><span>  columnKeyToHeader</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#905">NOT_AVAILABLE_CELL</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></pre><p><strong>translate/upload.js</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-jsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">const</span><span> fs </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;fs&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  loadSpreadsheet</span><span class="token" style="color:#999">,</span><span>
</span><span>  localesPath</span><span class="token" style="color:#999">,</span><span>
</span><span>  getPureKey</span><span class="token" style="color:#999">,</span><span>
</span><span>  ns</span><span class="token" style="color:#999">,</span><span>
</span><span>  lngs</span><span class="token" style="color:#999">,</span><span>
</span><span>  sheetId</span><span class="token" style="color:#999">,</span><span>
</span><span>  columnKeyToHeader</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#905">NOT_AVAILABLE_CELL</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;./index&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> headerValues </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&#x27;키&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;한글&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;영어&#x27;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">addNewSheet</span><span class="token" style="color:#999">(</span><span class="token parameter">doc</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> title</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> sheetId</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> sheet </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token control-flow" style="color:#07a">await</span><span> doc</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">addSheet</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>
</span><span>    sheetId</span><span class="token" style="color:#999">,</span><span>
</span><span>    title</span><span class="token" style="color:#999">,</span><span>
</span><span>    headerValues</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#07a">return</span><span> sheet</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">updateTranslationsFromKeyMapToSheet</span><span class="token" style="color:#999">(</span><span class="token parameter">doc</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> keyMap</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> title </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&#x27;[Sheet 이름]&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#07a">let</span><span> sheet </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> doc</span><span class="token" style="color:#999">.</span><span class="token property-access">sheetsById</span><span class="token" style="color:#999">[</span><span>sheetId</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span>sheet</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    sheet </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token control-flow" style="color:#07a">await</span><span> </span><span class="token" style="color:#DD4A68">addNewSheet</span><span class="token" style="color:#999">(</span><span>doc</span><span class="token" style="color:#999">,</span><span> title</span><span class="token" style="color:#999">,</span><span> sheetId</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span>
<span>  </span><span class="token" style="color:#07a">const</span><span> rows </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token control-flow" style="color:#07a">await</span><span> sheet</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">getRows</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token" style="color:slategray">// find exsit keys</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> exsitKeys </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> addedRows </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span><span>  rows</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">forEach</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token parameter">row</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> key </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> row</span><span class="token" style="color:#999">[</span><span>columnKeyToHeader</span><span class="token" style="color:#999">.</span><span class="token property-access">key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>keyMap</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      exsitKeys</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#07a">for</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">,</span><span> translations</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#07a">of</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Object</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">entries</span><span class="token" style="color:#999">(</span><span>keyMap</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span>exsitKeys</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:#07a">const</span><span> row </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#999">[</span><span>columnKeyToHeader</span><span class="token" style="color:#999">.</span><span class="token property-access">key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> key</span><span class="token" style="color:#999">,</span><span>
</span><span>        </span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span class="token known-class-name" style="color:#DD4A68">Object</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">keys</span><span class="token" style="color:#999">(</span><span>translations</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">reduce</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token parameter">result</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> lng</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>          </span><span class="token" style="color:#07a">const</span><span> header </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> columnKeyToHeader</span><span class="token" style="color:#999">[</span><span>lng</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span><span>          result</span><span class="token" style="color:#999">[</span><span>header</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> translations</span><span class="token" style="color:#999">[</span><span>lng</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span>
<span>          </span><span class="token control-flow" style="color:#07a">return</span><span> result</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>      addedRows</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span>row</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span>
<span>  </span><span class="token" style="color:slategray">// upload new keys</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">await</span><span> sheet</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">addRows</span><span class="token" style="color:#999">(</span><span>addedRows</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">toJson</span><span class="token" style="color:#999">(</span><span class="token parameter">keyMap</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> json </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token known-class-name" style="color:#DD4A68">Object</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">entries</span><span class="token" style="color:#999">(</span><span>keyMap</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">forEach</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token parameter" style="color:#999">[</span><span class="token parameter">__</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> keysByPlural</span><span class="token parameter" style="color:#999">]</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">for</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">[</span><span>keyWithPostfix</span><span class="token" style="color:#999">,</span><span> translations</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#07a">of</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Object</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">entries</span><span class="token" style="color:#999">(</span><span>keysByPlural</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      json</span><span class="token" style="color:#999">[</span><span>keyWithPostfix</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>translations</span><span class="token" style="color:#999">,</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#07a">return</span><span> json</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">gatherKeyMap</span><span class="token" style="color:#999">(</span><span class="token parameter">keyMap</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> lng</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> json</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">for</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">[</span><span>keyWithPostfix</span><span class="token" style="color:#999">,</span><span> translated</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#07a">of</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Object</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">entries</span><span class="token" style="color:#999">(</span><span>json</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> key </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">getPureKey</span><span class="token" style="color:#999">(</span><span>keyWithPostfix</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span>keyMap</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      keyMap</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">const</span><span> keyMapWithLng </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> keyMap</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span>keyMapWithLng</span><span class="token" style="color:#999">[</span><span>keyWithPostfix</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      keyMapWithLng</span><span class="token" style="color:#999">[</span><span>keyWithPostfix</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> lngs</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">reduce</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token parameter">initObj</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> lng</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        initObj</span><span class="token" style="color:#999">[</span><span>lng</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">NOT_AVAILABLE_CELL</span><span class="token" style="color:#999">;</span><span>
</span>
<span>        </span><span class="token control-flow" style="color:#07a">return</span><span> initObj</span><span class="token" style="color:#999">;</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    keyMapWithLng</span><span class="token" style="color:#999">[</span><span>keyWithPostfix</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">[</span><span>lng</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> translated</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">updateSheetFromJson</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> doc </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token control-flow" style="color:#07a">await</span><span> </span><span class="token" style="color:#DD4A68">loadSpreadsheet</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  fs</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">readdir</span><span class="token" style="color:#999">(</span><span>localesPath</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">(</span><span class="token parameter">error</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> lngs</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">throw</span><span> error</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">const</span><span> keyMap </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    lngs</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">forEach</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token parameter">lng</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:#07a">const</span><span> localeJsonFilePath </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">localesPath</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string" style="color:#690">/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">lng</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string" style="color:#690">/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">ns</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string" style="color:#690">.json</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">;</span><span>
</span>
<span>      </span><span class="token" style="color:slategray">// eslint-disable-next-line no-sync</span><span>
</span><span>      </span><span class="token" style="color:#07a">const</span><span> json </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> fs</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">readFileSync</span><span class="token" style="color:#999">(</span><span>localeJsonFilePath</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;utf8&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>      </span><span class="token" style="color:#DD4A68">gatherKeyMap</span><span class="token" style="color:#999">(</span><span>keyMap</span><span class="token" style="color:#999">,</span><span> lng</span><span class="token" style="color:#999">,</span><span> </span><span class="token known-class-name" style="color:#DD4A68">JSON</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">parse</span><span class="token" style="color:#999">(</span><span>json</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">updateTranslationsFromKeyMapToSheet</span><span class="token" style="color:#999">(</span><span>doc</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#DD4A68">toJson</span><span class="token" style="color:#999">(</span><span>keyMap</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#DD4A68">updateSheetFromJson</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><p><strong>translate/download.js</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-jsx" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">const</span><span> fs </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;fs&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> mkdirp </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;mkdirp&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">{</span><span>loadSpreadsheet</span><span class="token" style="color:#999">,</span><span> localesPath</span><span class="token" style="color:#999">,</span><span> ns</span><span class="token" style="color:#999">,</span><span> lngs</span><span class="token" style="color:#999">,</span><span> sheetId</span><span class="token" style="color:#999">,</span><span> columnKeyToHeader</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">NOT_AVAILABLE_CELL</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">require</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;./index&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">/**
</span><span class="token" style="color:slategray"> * fetch translations from google spread sheet and transform to json
</span><span class="token" style="color:slategray"> * @param {GoogleSpreadsheet} doc GoogleSpreadsheet document
</span><span class="token" style="color:slategray"> * @returns [object] translation map
</span><span class="token" style="color:slategray"> * {
</span><span class="token" style="color:slategray"> *   &quot;ko-KR&quot;: {
</span><span class="token" style="color:slategray"> *     &quot;key&quot;: &quot;value&quot;
</span><span class="token" style="color:slategray"> *   },
</span><span class="token" style="color:slategray"> *   &quot;en-US&quot;: {
</span><span class="token" style="color:slategray"> *     &quot;key&quot;: &quot;value&quot;
</span><span class="token" style="color:slategray"> *   },
</span><span class="token" style="color:slategray"> * }
</span><span class="token" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">fetchTranslationsFromSheetToJson</span><span class="token" style="color:#999">(</span><span class="token parameter">doc</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> sheet </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> doc</span><span class="token" style="color:#999">.</span><span class="token property-access">sheetsById</span><span class="token" style="color:#999">[</span><span>sheetId</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span>sheet</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span>
<span>  </span><span class="token" style="color:#07a">const</span><span> lngsMap </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> rows </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token control-flow" style="color:#07a">await</span><span> sheet</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">getRows</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  rows</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">forEach</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token parameter">row</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> key </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> row</span><span class="token" style="color:#999">[</span><span>columnKeyToHeader</span><span class="token" style="color:#999">.</span><span class="token property-access">key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span><span>    lngs</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">forEach</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token parameter">lng</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:#07a">const</span><span> translation </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> row</span><span class="token" style="color:#999">[</span><span>columnKeyToHeader</span><span class="token" style="color:#999">[</span><span>lng</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span><span>      </span><span class="token" style="color:slategray">// NOT_AVAILABLE_CELL(&quot;_N/A&quot;) means no related language</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>translation </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#905">NOT_AVAILABLE_CELL</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span class="token" style="color:#999">;</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span>
</span>
<span>      </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span>lngsMap</span><span class="token" style="color:#999">[</span><span>lng</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        lngsMap</span><span class="token" style="color:#999">[</span><span>lng</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span>
</span>
<span>      lngsMap</span><span class="token" style="color:#999">[</span><span>lng</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> translation </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">||</span><span> </span><span class="token" style="color:#690">&#x27;&#x27;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// prevent to remove undefined value like ({&quot;key&quot;: undefined})</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#07a">return</span><span> lngsMap</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">checkAndMakeLocaleDir</span><span class="token" style="color:#999">(</span><span class="token parameter">dirPath</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> subDirs</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">Promise</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token parameter">resolve</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    subDirs</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">forEach</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token parameter">subDir</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> index</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:#DD4A68">mkdirp</span><span class="token" style="color:#999">(</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">dirPath</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string" style="color:#690">/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">subDir</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">(</span><span class="token parameter">err</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>err</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>          </span><span class="token control-flow" style="color:#07a">throw</span><span> err</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span>
</span>
<span>        </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>index </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> subDirs</span><span class="token" style="color:#999">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>          </span><span class="token" style="color:#DD4A68">resolve</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">updateJsonFromSheet</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">await</span><span> </span><span class="token" style="color:#DD4A68">checkAndMakeLocaleDir</span><span class="token" style="color:#999">(</span><span>localesPath</span><span class="token" style="color:#999">,</span><span> lngs</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token" style="color:#07a">const</span><span> doc </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token control-flow" style="color:#07a">await</span><span> </span><span class="token" style="color:#DD4A68">loadSpreadsheet</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> lngsMap </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token control-flow" style="color:#07a">await</span><span> </span><span class="token" style="color:#DD4A68">fetchTranslationsFromSheetToJson</span><span class="token" style="color:#999">(</span><span>doc</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  fs</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">readdir</span><span class="token" style="color:#999">(</span><span>localesPath</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">(</span><span class="token parameter">error</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> lngs</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">throw</span><span> error</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    lngs</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">forEach</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token parameter">lng</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:#07a">const</span><span> localeJsonFilePath </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">localesPath</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string" style="color:#690">/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">lng</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string" style="color:#690">/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">ns</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string" style="color:#690">.json</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">;</span><span>
</span>
<span>      </span><span class="token" style="color:#07a">const</span><span> jsonString </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token known-class-name" style="color:#DD4A68">JSON</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">stringify</span><span class="token" style="color:#999">(</span><span>lngsMap</span><span class="token" style="color:#999">[</span><span>lng</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">,</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>      fs</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">writeFile</span><span class="token" style="color:#999">(</span><span>localeJsonFilePath</span><span class="token" style="color:#999">,</span><span> jsonString</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;utf8&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">(</span><span class="token parameter">err</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>err</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>          </span><span class="token control-flow" style="color:#07a">throw</span><span> err</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span>
</span><span>      </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#DD4A68">updateJsonFromSheet</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><h3><strong>package.json에 script 추가</strong></h3><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-json" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>...
</span><span></span><span class="token" style="color:#905">&quot;scripts&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span>	...
<span>	</span><span class="token" style="color:#905">&quot;scan:i18n&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;i18next-scanner --config i18next-scanner.config.js&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span>	</span><span class="token" style="color:#905">&quot;upload:i18n&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;npm run scan:i18n &amp;&amp; node translate/upload.js&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span>	</span><span class="token" style="color:#905">&quot;download:i18n&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;node translate/download.js&quot;</span><span class="token" style="color:#999">,</span><span>
</span>	...
<span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span>...
</code></pre></div></main></div><div></div><footer class="jsx-a6af0e2473afc2ae"><div class="jsx-a6af0e2473afc2ae copyright">Copyright 2021. <!-- -->FE는 철<!-- --> all rights reserved.</div></footer></div><style data-emotion="css-global 9v2qpw">body{color:#333;background-color:#FFFFFF;}</style></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postInfo":{"id":1647702000,"title":"기존 프로젝트에 다국어 처리를 적용해보자(react-i18next)","author":"jangky000","category":"업무 회고","desc":"회사에서 사업의 해외 진출을 준비하면서 영문 버전의 사이트가 필요해졌다. 대시보드라는 기존의 프로젝트에 어떻게 다국어 처리를 적용했는지에 대한 경험을 공유한다. 또한 두 번의 다국어 처리 작업 과정을 소개하고 업무 프로세스를 개선했던 경험을 이야기해보고자 한다.","date":"2022.03.20","content":"\n# 다국어 처리(i18n)\n\n다국어 처리란 웹 브라우저를 사용하는 국가에 따라 다양한 언어 및 지역을 지원하는 서비스이다.\n\ni18n 뜻은 국제화(internationalization)의 스펠링에서 ‘I’ + 18글자 + ‘N’을 뜻한다.\n\n## 기존 업무 프로세스\n\n이 작업을 맡기 직전에 `회사 소개 웹사이트`의 번역 작업이 진행된 적이 있었다. \n\n1. 기획을 담당하는 팀에서 웹사이트 전체를 살펴보며 번역이 필요한 부분을 찾는다.\n2. 번역이 필요한 문구를 모아 구글 스프레드 시트에 업로드한다.\n3. 번역팀이 구글 스프레드 시트를 전달 받아 번역 작업을 진행한다.\n4. 개발 팀이 번역 작업된 스프레드 시트를 전달 받아 json 파일을 생성하고, 프로젝트 내에서 번역이 필요한 부분과 번역 키를 매칭한 후, 번역이 잘 되었는지 확인하며 작업을 진행한다.\n\n## 기존 업무 프로세스의 장단점\n\n**장점**\n\n- 페이지 단위별로 번역 문구를 모아서 정리했기 때문에 해당 문구가 어느 페이지에 있는지 찾는 것이 수월했다.\n\n**단점** \n\n- 무수히 많은 번역 키를 직접 지정하는 것이 어려웠다.\n- 띄어쓰기 하나, 오타 하나, 대소문자 하나의 차이로 인해 번역 키를 인식하고 인식하지 못하는 일들이 발생하기 때문에 눈이 빠지도록 json 상의 번역 키와 html 상의 문구를 비교해야 했다.\n- 반복되는 문구의 중복을 제거하기 어려웠다.\n- 웹 사이트 상에서 쉽게 볼 수 없는 처리 응답 문구나 특정 조건 특정 상황에서 볼 수 있는 문구가 누락되는 경우가 많았다. 번역이 누락되는 경우 필요한 문구를 정리해서 다시 요청해야 했다.\n- 번역 작업보다 개발 작업 프로세스가 더 많고 단순 노동 작업이 많아 시간이 오래 걸렸다.\n\n## 변경 된 업무 프로세스\n\n`대시보드` 프로젝트는 `회사 소개 웹사이트`에 비해 훨씬 많은 기능들이 있었고, 고객들이 중점적으로 사용하는 웹사이트였다. 기존의 업무 프로세스로 번역 작업을 진행할 경우에 누락되는 문구가 아주 많을 것으로 예상되었고, 작업 기한 역시 한 달 정도로 촉박한 상황이었다. 그때 다른 좋은 방법이 없을까 고민하며 자료를 찾던 중, 유동식님이 작성하신 `국제화(i18n) 자동화 가이드`(참고: [링크](https://meetup.toast.com/posts/295)) 포스트를 보게 되었다. 번역 작업 진행 초기에 i18next-scanner를 설정하고 테스트를 마친 후 아래와 같은 업무 프로세스를 제안했다. 또한 사용법 및 컨벤션을 정리하여 공유했다.\n\n1. 대시보드 프로젝트의 소스 상에서 번역이 필요한 한글 문구들을 모두 i18next.t()라는 메소드로 감싼다.\n2. i18next-scanner를 이용하여 번역 키를 한번에 구글 스프레드 시트에 업로드한다.\n3. 번역팀에서 번역 작업이 끝나면 번역을 다운로드 받아 대시보드에 적용하고 확인한다.\n\n## 변경된 업무 프로세스의 장단점\n\n**장점**\n\n- 한글 문구를 그대로 키로 사용하여 번역 키를 지정하는 것에 고민하지 않을 수 있었고, 오타나 띄어쓰기로 인한 스트레스가 줄어들었다.\n- 중복된 번역 키가 자동으로 제거된다.\n- 웹 사이트 상에서 쉽게 볼 수 없는 처리 응답 문구나 특정 조건 특정 상황에서 볼 수 있는 문구까지 누락되는 부분 없이 한번에 작업 가능했다.\n- 다른 언어로 번역을 추가하는 것이 쉽다.\n- 새로운 기능을 추가할 때도 작업 중에 기획이 변경되거나 문구가 수정되는 경우가 많은데 먼저 기능 추가 작업 후 번역을 진행할 수 있어 반복 작업이 줄어든다.\n- 정말 신기하다.\n\n**단점**\n\n- 페이지의 상황에 따라 번역의 어투가 달라져야하는 경우가 있는데 어느 페이지에서 나온 문구인지 헷갈리는 상황이 종종 발생한다.\n- 번역 문구마다 함수를 씌워줘야 하는 단순 작업까지 줄어들지는 않았다.\n\n## 적용 결과\n\n### json 파일 예시\n\n**/src/i18n/locales/ko-KR/translation.json**\n\n```json\n{\n    \"{{count}}명_0\": \"{{count}}명\",\n    \"데이터 조회\": \"데이터 조회\",\n}\n```\n\n**/src/i18n/locales/en-US/translation.json**\n\n```json\n{\n    \"{{count}}명\": \"[작성 필요]\",\n    \"{{count}}명_plural\": \"[작성 필요]\",\n    \"데이터 조회\": \"[작성 필요]\",\n}\n```\n\n### 구글 스프레드 시트 예시\n\n\u003cimg width=\"1377\" alt=\"1\" src=\"https://user-images.githubusercontent.com/46799722/159149909-f0c63b45-49b6-4d40-b834-0167eeac3b5e.png\"\u003e\n\n## 사용법 및 컨벤션\n\n### 작업 순서\n\n1. 번역 필요한 문구를 i18next.t() 메소드의 인자로 넘겨준다.\n2. `yarn upload:i18n`을 실행하여 번역 키들을 구글 스프레드 시트로 업로드한다.\n3. 번역팀에서 구글 시트에 번역을 진행한다.\n4. `yarn download:i18n`을 실행하여 구글 스프레드 시트로부터 번역된 내용을 다운로드 받는다.\n5. 언어 설정을 바꿔보고 번역이 잘 동작하는지 확인 후 작업을 완료한다.\n\n```bash\n# scan\n$ yarn scan:i18n\n# 실행 시 src 폴더 내에서 i18next.t() 메소드로 감싸져 있는 키를 스캔한다.\n# 실행 시 중복된 키는 하나의 키로 생성된다.\n# 실행 시 json 파일 생성되거나, 기존 json 파일에 새로운 키가 추가된다.\n\n# upload\n$ yarn upload:i18n\n# 실행 시 yarn scan:i18n을 실행한 후 google spread sheet에 scan된 키와 값을 업로드한다.\n# 기존에 없는 키만 추가 업로드된다.\n\n# download\n$ yarn download:i18n\n# google spread sheet에서 번역 키와 값을 json 파일로 다운로드한다.\n```\n\n### 구글 시트 작성 가이드\n\n1. '대시보드 번역' sheet 의 한글(B column)의 내용을 영어(C column) 에 번역하여 작성합니다.\n2. {{text}}는 변수 입니다. 번역 시 변수에 해당하는 단어가 오는 곳에 동일하게 {{text}} 형식으로 작성합니다.\n3. {{count}} 변수가 들어가는 문장은 단수/복수 문법이 있기 때문에 번역 시 키(A 칼럼)의 내용을 번역해야합니다.\n    \n    \u003cimg width=\"1172\" alt=\"2\" src=\"https://user-images.githubusercontent.com/46799722/159149911-522fea13-7f7b-49d5-ad71-8a7329a98cf9.png\"\u003e\n    \n4. \u003c1\u003eabcd\u003c/1\u003e, \u003c1\u003e\u003c0\u003eabcd\u003c/0\u003e\u003c/1\u003e과 같이 꺾쇠(\u003c\u003e) 형태는 HTML tag 가 사용 된 문장으로, bold, color 등이 적용 된 문장 입니다.번역 시에 HTML tag 가 들어가는 부분은 동일하게 작성합니다.\n    \n    \u003cimg width=\"1180\" alt=\"3\" src=\"https://user-images.githubusercontent.com/46799722/159149913-1dda16f5-4fab-4134-a57a-b5f240fc09fc.png\"\u003e\n    \n5. 영어(C column)에 **_N/A** 표시된 cell은 번역하지 않습니다.\n6. 키(A column), 한글(B column) 은 절대 수정하면 안됩니다.\n\n### 기본 사용법\n\n**Before**\n\n```tsx\nconst MyComponent = ()=\u003e{\n  const freeEndTime =  3\n\n\treturn (\n\t\t\u003cdiv\u003e\n\t\t\t\u003cspan\u003e평가판\u003c/span\u003e\n\t\t\t\u003cspan\u003eProfessional 무료 평가판의 이용 기간이 {freeEndTime}일 남았습니다.\u003c/span\u003e\n\t\t\u003c/div\u003e\n\t)\n}\n```\n\n**After**\n\n- { t } = useTranslation()의 형태로도 사용 가능하지만 t라는 함수 이름이 너무 흔하고, 다른 지역 변수와 충돌이 있을 수 있을 것 같아 i18next.t로 사용하는 것으로 통일했다.\n- 만약 t 함수를 사용하고 싶을 때는 scanner 인식을 위해 i18next-scanner.config.js에서 options.func.list 배열에 't'를 추가해줘야 한다.\n\n```tsx\nimport { useTranslation } from 'react-i18next';\n\nconst MyComponent = ()=\u003e{\n\tconst i18next = useTranslation();\n\tconst freeEndTime =  3;\n\n\treturn (\n\t\t\u003cdiv\u003e\n\t\t\t\u003cspan\u003e{i18next.t('평가판')}\u003c/span\u003e\n\t\t\t\u003cspan\u003e{i18next.t(`Professional 무료 평가판의 이용 기간이 {{freeEndTime}}일 남았습니다.`, {\n             freeEndTime: freeEndTime})}\n\t\t\t\u003c/span\u003e\n\t\t\u003c/div\u003e\n\t)\n}\n```\n\n### 응용 사용법\n\n**(1) 번역에 변수 포함하기(interpolation)**\n\ninterpolation 속성 이름 자유롭게 선택 가능 (참고: [interpolation](https://www.i18next.com/translation-function/interpolation))\n\n```tsx\n// 예시\ni18next.t(`{{email}}은 구글 계정입니다.`, { email: 'example@gmail.com' }\n\n// 예시2\n{i18next.t(`프로젝트의 이용기간이 {{end_time}} 후로 만료되었습니다.`, {\n  end_time: moment(end_time).format('YYYY-MM-DD'),\n})}\n```\n\n**(2) 언어별 복수 단수 표현 대응하기**(**_plural 과 _0)**\n\n- interpolation 속성 이름으로 반드시 `count`를 사용한다 . (참고: [plurals](https://www.i18next.com/translation-function/plurals))\n- i18next.t()메소드의 키가 `최대 캠페인의 수는 {{count}}개입니다.`일 때,\n    - 한국어와 같이 명사에 복수형이 없는 언어일 때: `최대 캠페인의 수는 {{count}}개입니다._0`만 작성\n    - 영어와 같이 복수형이 있는 언어일 때: `최대 캠페인의 수는 {{count}}개입니다.`, `최대 캠페인의 수는 {{count}}개입니다._plural` 작성\n\n```tsx\n// 예시\n\ni18next.t(\n  `최대 캠페인의 수는 {{**count**}}개입니다.`, { **count**: projectStore.max_campaign_count },\n),\n```\n\n**(3) html 태그를 포함한 한글 번역**\n\n- `\u003cTrans /\u003e` 컴포넌트 사용하여 번역한다.\n- `\u003cTrans /\u003e` 컴포넌트 내부에서 React 조건부 렌더링 사용이 불가하다.\n- i18nKey에 html을 포함해야 한다. (자체 컨벤션)\n    - Trans 컴포넌트 내부에 있는 한글을 default value로 제대로 scan하지 못하는 문제가 있었다.\n    - i18next-scanner.config.js에 설정을 추가한 후 자체 컨벤션으로 html을 포함하도록 해서 문제를 해결했다.\n\n**Before**\n\n```tsx\n...\n\n\u003cdiv\u003e\n  이 프로젝트에 발급된 추적 ID는 \u003cstrong\u003e{ projectID }\u003c/strong\u003e입니다. 아래의 기본 추적 스크립트 코드\n  블럭을 복사하여\n  \u003cbr /\u003e\n  웹사이트 HTML 의 공통 영역 \u0026lt;head\u0026gt;\u0026lt;\u0026#47;head\u0026gt;에 붙여 넣으세요.\n\u003cdiv\u003e\n```\n\n**After**\n\n```tsx\n\nimport { Trans, useTranslation } from 'react-i18next';\n\n// 예시1\n\u003cdiv\u003e\n\t\u003cTrans i18nKey=\"웹사이트 연결 준비 안내 html\"\u003e\n\t  이 프로젝트에 발급된 추적 ID는 \u003cstrong\u003e{{ projectID }}\u003c/strong\u003e입니다. 아래의 기본 추적 스크립트 코드\n\t  블럭을 복사하여\n\t  \u003cbr /\u003e\n\t  웹사이트 HTML 의 공통 영역 \u0026lt;head\u0026gt;\u0026lt;\u0026#47;head\u0026gt;에 붙여 넣으세요.\n\t\u003c/Trans\u003e\n\u003c/div\u003e\n\n// 예시2\n\u003cTrans i18nKey=\"대시보드 데모 체험 안내 html\"\u003e\n  데모 쇼핑몰의 데이터를 활용하여 {{ name_kr: dashboard_config.name_kr }} 대시보드 내의 기능을 \u003cbr /\u003e\n  체험할 수 있습니다.\n\u003c/Trans\u003e\n```\n\n**(4) Trans 컴포넌트에서 복수형 처리 사용**\n\n- `npm run scan:i18n`으로 _plural이 잘 생성되는지 확인해봐야 한다.\n\n```tsx\n// 예시: -\u003e _plural 과 _0 생성\n\u003cTrans i18nKey=\"사용자 내보내기 html\" count={totalItem}\u003e\n  \u003cstrong\u003e{{ count: totalItem }}\u003c/strong\u003e\n  명의 사용자를 내보낼 수 있습니다.\n\u003c/Trans\u003e\n```\n\n**(5) 컴포넌트 바깥에 있는 문자열 번역**\n\n**방법1: Dummy function 사용** \n\n```tsx\n// i18next.t()로 감싸지 않은 한글을 i18next-scanner에서 scan 해주기 위해 씌우는 dummy function\nexport const i18nextScanKey = (key: string): string =\u003e key;\n```\n\n```tsx\nimport { i18nextScanKey } from '../i18n';\nimport { useTranslation } from 'react-i18next';\n\nconst itemList = [\n\t{\n\t\tlabel: i18nextScanKey('수정')\n\t},\n\t{\n\t\tlabel: i18nextScanKey('저장')\n\t}\n]\n\nconst MyComponent = ()=\u003e{\n\tconst i18next = useTranslation();\n\n\treturn (\n\t\t{itemList.map((item) =\u003e \u003cdiv\u003e{`${i18next.t(item.label)}`}\u003c/div\u003e)}\n\t);\n}\n\n```\n\n- dummy function으로 번역이 필요한 부분을 감싸주어 i18next-scanner가 인식할 수 있게 설정한다.\n- (참고: [using-react-i18next-t-function-outside-components-having-troubles-using-promise](https://stackoverflow.com/questions/58452182/using-react-i18next-t-function-outside-components-having-troubles-using-promise))\n- **interpolation을 대응할 수 없는 문제가 있다.**\n\n**방법2: 함수 파라미터로 i18next 넘기기**\n\n**Before**\n\n```jsx\nconst tabList = [\n  { id: 1, type: 'plan-payment', label: '플랜 결제 내역' },\n  { id: 2, type: 'credit-payment', label: '마케팅 예산 충전 내역' },\n  { id: 3, type: 'usage', label: '크레딧 및 마케팅 예산 현황' },\n];\n\nexport const MyComponent = ()=\u003e{\n\t...\n}\n```\n\n**After**\n\n```jsx\nimport { useTranslation } from 'react-i18next';\nimport { I18Next } from '../../i18n';\n\nconst getTabList = (i18next: I18Next) =\u003e [\n  { id: 1, type: 'plan-payment', label: i18next.t('플랜 결제 내역') },\n  { id: 2, type: 'credit-payment', label: i18next.t('마케팅 예산 충전 내역') },\n  { id: 3, type: 'usage', label: i18next.t('크레딧 및 마케팅 예산 현황') },\n];\n\nexport const MyComponent = ()=\u003e{\n\tconst i18next = useTranslation();\n\tconst tabList = getTabList(i18next);\n\t...\n}\n```\n\n## 설정 방법\n\n### 디렉토리 구조\n\n```\n📂src\n ┣📂i18n\n ┃ ┣ 📂locales\n ┃ ┃ ┣ 📂en-US\n ┃ ┃ ┃ ┗ 📜translation.json\n ┃ ┃ ┗ 📂ko-KR\n ┃ ┃ ┃ ┗ 📜translation.json\n ┃ ┗ 📜index.ts\n ┣ 📂components\n...\n📂translate\n ┣ 📂.credentials\n ┃ ┣ 📜index.js\n ┃ ┗ 📜practical-net-....json\n ┣ 📜download.js\n ┣ 📜index.js\n ┗ 📜upload.js\n...\n📜i18next-scanner.config.js\n📜package.json\n...\n```\n\n### 설치\n\n```bash\nyarn add react-i18next i18next @types/react-i18next @types/i18next i18next-scanner google-spreadsheet\n```\n\n### react-i18next 설정\n\n/**src/i18n/index.ts** (참고: [Configure i18next](https://react.i18next.com/guides/quick-start#configure-i18next))\n\n```tsx\nimport i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport koKR from './locales/ko-KR/translation.json';\nimport enUS from './locales/en-US/translation.json';\n\nconst resources = {\n  ko: { translation: koKR },\n  en: { translation: enUS },\n};\n\n// 브라우저 언어 설정 가져오기\nconst browserLang = window.navigator.language.split('-')[0];\n\n// localStorage에서 언어 설정 가져오기\nconst userLanguage = [localStorage에서 언어 설정 가져오기] ?? browserLang;\n\ni18n.use(initReactI18next).init({\n  resources,\n  lng: userLanguage || 'ko',\n  fallbackLng: 'ko',\n  debug: false,\n  defaultNS: 'translation',\n  ns: 'translation',\n  keySeparator: false,\n  interpolation: {\n    escapeValue: false,\n    alwaysFormat: true,\n    format(value, format, lng) {\n      if (format === 'uppercase') return value.toUpperCase();\n\t\t\t// interpolation 되는 값이 number로 들어올 때, 언어 설정에 맞는 locale string으로 변환해서 반환\n      if (typeof value === 'number') return value.toLocaleString(lng);\n      return value;\n    },\n  },\n  react: {\n    defaultTransParent: 'div',\n    transEmptyNodeValue: '',\n    transSupportBasicHtmlNodes: true,\n\t\t// \u003cTrans\u003e 컴포넌트 내부에 들어가는 html 태그들\n    transKeepBasicHtmlNodesFor: ['br', 'strong', 'i', 'button', 'a', 'span', 'div', 'input'],\n    transWrapTextNodes: '',\n  },\n  nsSeparator: '=\u003e', // default: ':', :가 번역 키에 포함되는 사례가 있어, 번역 키로 사용되지 않을 것 같은 seperator를 설정\n});\n\nexport default i18n;\n\n// i18next를 파라미터로 넘길 때 사용할 인터페이스 타입\nexport interface I18Next {\n  t: (str: string, option?: Object) =\u003e string;\n}\n\n// scanner를 사용하기 위한 dummy function\nexport const i18nextScanKey = (key: string): string =\u003e key;\n```\n\n### i18next-scanner 설정\n\n/**i18next-scanner.config.js**\n\n```jsx\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst typescript = require(\"typescript\");\n\nconst COMMON_EXTENSIONS = '/**/*.{js,jsx,ts,tsx,vue,html}';\n\nmodule.exports = {\n  input: [`./src/${COMMON_EXTENSIONS}`],\n  options: {\n    debug: false,\n    // removeUnusedKeys: true,\n    defaultLng: 'ko-KR',\n    lngs: ['ko-KR', 'en-US'],\n    func: {\n      list: ['i18next.t', 'i18n.t', '$i18n.t', '$i18next.t', 'i18nextScanKey'],\n      extensions: ['.js', '.jsx'],\n    },\n    trans: {\n      component: 'Trans',\n      i18nKey: 'i18nKey',\n      defaultsKey: 'defaults',\n      extensions: ['.js', '.jsx'],\n      fallbackKey: function(ns, value) {\n        return value;\n      },\n      acorn: {\n          ecmaVersion: 10,\n          sourceType: 'module',\n      }\n    },\n    resource: {\n      loadPath: path.join(__dirname, '/src/i18n/locales/{{lng}}/{{ns}}.json'),\n      savePath: path.join(__dirname, '/src/i18n/locales/{{lng}}/{{ns}}.json'),\n    },\n    defaultValue(lng, ns, key) {\n      const keyAsDefaultValue = ['ko-KR'];\n      if (keyAsDefaultValue.includes(lng)) {\n        const separator = 'html';\n        const value = key.includes(separator) ? '' : key;\n        return value;\n      }\n      return '[작성 필요]';\n    },\n    keySeparator: false,\n    nsSeparator: false,\n    prefix: '{{',\n    suffix: '}}',\n  },\n  transform: function typescriptTransform(\n    options = {\n      tsOptions: {\n        target: \"es2018\",\n      },\n      extensions: [\".ts\", \".tsx\"],\n    }\n  ) {\n    return function transform(file, enc, done) {\n      const { base, ext } = path.parse(file.path);\n  \n      if (options.extensions.includes(ext) \u0026\u0026 !base.endsWith(\".d.ts\") \u0026\u0026 base.indexOf(\"reportWebVitals.ts\") === -1) {\n        const content = fs.readFileSync(file.path, enc);\n  \n        const { outputText } = typescript.transpileModule(content, {\n          compilerOptions: options.tsOptions,\n          fileName: path.basename(file.path),\n        });\n  \n        this.parser.parseTransFromString(outputText);\n        this.parser.parseFuncFromString(outputText);\n      }\n  \n      done();\n    };\n  }({ extensions: [\".tsx\", '.ts'], tsOptions: {\n    target: 'es5',\n    module: 'esnext',\n  }, })\n};\n```\n\n### Google Spread Sheet 연동\n\n1. [https://console.cloud.google.com/apis/dashboard](https://console.cloud.google.com/apis/dashboard) 이동\n2. 사용자 정보 인증 탭으로 이동\n    \n    \u003cimg width=\"1423\" alt=\"4\" src=\"https://user-images.githubusercontent.com/46799722/159149914-e3da4f30-f730-4cb3-a9c6-312ff99c0358.png\"\u003e\n    \n3. 사용자 인증 정보 만들기 → 서비스 계정 클릭\n    \n    \u003cimg width=\"976\" alt=\"5\" src=\"https://user-images.githubusercontent.com/46799722/159149915-0517966b-b210-4b7d-8362-e664f6b03353.png\"\u003e\n    \n4. 서비스 계정 이름 입력 후 완료 클릭\n    \n    \u003cimg width=\"608\" alt=\"6\" src=\"https://user-images.githubusercontent.com/46799722/159149916-9b7521df-b997-462e-aa6e-f5f63ef9da85.png\"\u003e\n    \n5. 생성한 서비스 계정 클릭\n    \n    \u003cimg width=\"1156\" alt=\"7\" src=\"https://user-images.githubusercontent.com/46799722/159149918-7c065d1c-fbed-46d3-bc02-f7aafd953adb.png\"\u003e\n    \n6. 키 탭으로 이동하여 새 키 생성\n    \n    \u003cimg width=\"1161\" alt=\"8\" src=\"https://user-images.githubusercontent.com/46799722/159149919-f065073d-0555-4709-a1d7-5655386309fa.png\"\u003e\n    \n7. 키 유형 JSON으로 선택 → json 파일 다운로드 → react 프로젝트 최상단에 translate/.credentials 폴더 생성후 구글 스프레드시트에서 다운 받은 JSON 파일 저장\n    \n    \u003cimg width=\"557\" alt=\"9\" src=\"https://user-images.githubusercontent.com/46799722/159149920-bea956ca-97c5-4baa-8c9e-1d25ccd30bcf.png\"\u003e\n    \n8. 세부 정보 → 이메일 복사 → 구글 스프레드 시트에 공유 클릭 → 이메일 추가\n\n\u003cimg width=\"771\" alt=\"10\" src=\"https://user-images.githubusercontent.com/46799722/159149922-235997fb-68e3-4b18-82e3-471ce6d22fff.png\"\u003e\n\n\u003cimg width=\"1383\" alt=\"11\" src=\"https://user-images.githubusercontent.com/46799722/159149923-0942d37f-9dd8-4c88-b358-5864e352c1ce.png\"\u003e\n\n\u003cimg width=\"620\" alt=\"12\" src=\"https://user-images.githubusercontent.com/46799722/159149924-87391178-b113-45a7-a783-8585ab29a8b6.png\"\u003e\n\n### translate 디렉토리\n\n**translate/.credentials/index.js**\n\ntranslate/.credentials 디렉토리를 .gitignore에 추가하기\n\n```bash\nmodule.exports={\n    CREDS: '[구글 서비스 계정 설정 시 다운로드 받은 json 파일 이름].json',\n    SHEET_DOC_ID: \"[sheet document id]\",\n    SHEET_ID: 1\n}\n```\n\n**translate/index.js**\n\n```jsx\nconst {GoogleSpreadsheet} = require('google-spreadsheet');\nconst ENV = require('./.credentials/index.js');\nconst creds = require('./.credentials/' + ENV.CREDS);\nconst i18nextConfig = require('../i18next-scanner.config');\n\nconst spreadsheetDocId = ENV.SHEET_DOC_ID;\nconst ns = 'translation';\nconst lngs = i18nextConfig.options.lngs;\nconst loadPath = i18nextConfig.options.resource.loadPath;\nconst localesPath = loadPath.replace('/{{lng}}/{{ns}}.json', '');\nconst rePluralPostfix = new RegExp(/_plural|_[\\d]/g);\nconst sheetId = ENV.SHEET_ID; // your sheet id\nconst NOT_AVAILABLE_CELL = '_N/A';\nconst columnKeyToHeader = {\n  key: '키',\n  'ko-KR': '한글',\n  'en-US': '영어',\n};\n\n/**\n * getting started from https://theoephraim.github.io/node-google-spreadsheet\n */\nasync function loadSpreadsheet() {\n  // eslint-disable-next-line no-console\n  console.info(\n    '\\u001B[32m',\n    '=====================================================================================================================\\n',\n    '# i18next auto-sync using Spreadsheet\\n\\n',\n    '  * Download translation resources from Spreadsheet and make /src/i18n/locales/{{lng}}/{{ns}}.json\\n',\n    '  * Upload translation resources to Spreadsheet.\\n\\n',\n    `The Spreadsheet for translation is here (\\u001B[34mhttps://docs.google.com/spreadsheets/d/${spreadsheetDocId}/#gid=${sheetId}\\u001B[0m)\\n`,\n    '=====================================================================================================================',\n    '\\u001B[0m'\n  );\n\n  // spreadsheet key is the long id in the sheets URL\n  const doc = new GoogleSpreadsheet(spreadsheetDocId);\n\n  // load directly from json file if not in secure environment\n  await doc.useServiceAccountAuth(creds);\n\n  await doc.loadInfo(); // loads document properties and worksheets\n\n  return doc;\n}\n\nfunction getPureKey(key = '') {\n  return key.replace(rePluralPostfix, '');\n}\n\nmodule.exports = {\n  localesPath,\n  loadSpreadsheet,\n  getPureKey,\n  ns,\n  lngs,\n  sheetId,\n  columnKeyToHeader,\n  NOT_AVAILABLE_CELL,\n};\n```\n\n**translate/upload.js**\n\n```jsx\nconst fs = require('fs');\nconst {\n  loadSpreadsheet,\n  localesPath,\n  getPureKey,\n  ns,\n  lngs,\n  sheetId,\n  columnKeyToHeader,\n  NOT_AVAILABLE_CELL,\n} = require('./index');\n\nconst headerValues = ['키', '한글', '영어'];\n\nasync function addNewSheet(doc, title, sheetId) {\n  const sheet = await doc.addSheet({\n    sheetId,\n    title,\n    headerValues,\n  });\n\n  return sheet;\n}\n\nasync function updateTranslationsFromKeyMapToSheet(doc, keyMap) {\n  const title = '[Sheet 이름]';\n  let sheet = doc.sheetsById[sheetId];\n  if (!sheet) {\n    sheet = await addNewSheet(doc, title, sheetId);\n  }\n\n  const rows = await sheet.getRows();\n\n  // find exsit keys\n  const exsitKeys = {};\n  const addedRows = [];\n  rows.forEach((row) =\u003e {\n    const key = row[columnKeyToHeader.key];\n    if (keyMap[key]) {\n      exsitKeys[key] = true;\n    }\n  });\n\n  for (const [key, translations] of Object.entries(keyMap)) {\n    if (!exsitKeys[key]) {\n      const row = {\n        [columnKeyToHeader.key]: key,\n        ...Object.keys(translations).reduce((result, lng) =\u003e {\n          const header = columnKeyToHeader[lng];\n          result[header] = translations[lng];\n\n          return result;\n        }, {}),\n      };\n\n      addedRows.push(row);\n    }\n  }\n\n  // upload new keys\n  await sheet.addRows(addedRows);\n}\n\nfunction toJson(keyMap) {\n  const json = {};\n\n  Object.entries(keyMap).forEach(([__, keysByPlural]) =\u003e {\n    for (const [keyWithPostfix, translations] of Object.entries(keysByPlural)) {\n      json[keyWithPostfix] = {\n        ...translations,\n      };\n    }\n  });\n\n  return json;\n}\n\nfunction gatherKeyMap(keyMap, lng, json) {\n  for (const [keyWithPostfix, translated] of Object.entries(json)) {\n    const key = getPureKey(keyWithPostfix);\n\n    if (!keyMap[key]) {\n      keyMap[key] = {};\n    }\n\n    const keyMapWithLng = keyMap[key];\n    if (!keyMapWithLng[keyWithPostfix]) {\n      keyMapWithLng[keyWithPostfix] = lngs.reduce((initObj, lng) =\u003e {\n        initObj[lng] = NOT_AVAILABLE_CELL;\n\n        return initObj;\n      }, {});\n    }\n\n    keyMapWithLng[keyWithPostfix][lng] = translated;\n  }\n}\n\nasync function updateSheetFromJson() {\n  const doc = await loadSpreadsheet();\n\n  fs.readdir(localesPath, (error, lngs) =\u003e {\n    if (error) {\n      throw error;\n    }\n\n    const keyMap = {};\n\n    lngs.forEach((lng) =\u003e {\n      const localeJsonFilePath = `${localesPath}/${lng}/${ns}.json`;\n\n      // eslint-disable-next-line no-sync\n      const json = fs.readFileSync(localeJsonFilePath, 'utf8');\n\n      gatherKeyMap(keyMap, lng, JSON.parse(json));\n    });\n\n    updateTranslationsFromKeyMapToSheet(doc, toJson(keyMap));\n  });\n}\n\nupdateSheetFromJson();\n```\n\n**translate/download.js**\n\n```jsx\nconst fs = require('fs');\nconst mkdirp = require('mkdirp');\nconst {loadSpreadsheet, localesPath, ns, lngs, sheetId, columnKeyToHeader, NOT_AVAILABLE_CELL} = require('./index');\n\n/**\n * fetch translations from google spread sheet and transform to json\n * @param {GoogleSpreadsheet} doc GoogleSpreadsheet document\n * @returns [object] translation map\n * {\n *   \"ko-KR\": {\n *     \"key\": \"value\"\n *   },\n *   \"en-US\": {\n *     \"key\": \"value\"\n *   },\n * }\n */\nasync function fetchTranslationsFromSheetToJson(doc) {\n  const sheet = doc.sheetsById[sheetId];\n  if (!sheet) {\n    return {};\n  }\n\n  const lngsMap = {};\n  const rows = await sheet.getRows();\n\n  rows.forEach((row) =\u003e {\n    const key = row[columnKeyToHeader.key];\n    lngs.forEach((lng) =\u003e {\n      const translation = row[columnKeyToHeader[lng]];\n      // NOT_AVAILABLE_CELL(\"_N/A\") means no related language\n      if (translation === NOT_AVAILABLE_CELL) {\n        return;\n      }\n\n      if (!lngsMap[lng]) {\n        lngsMap[lng] = {};\n      }\n\n      lngsMap[lng][key] = translation || ''; // prevent to remove undefined value like ({\"key\": undefined})\n    });\n  });\n\n  return lngsMap;\n}\n\nfunction checkAndMakeLocaleDir(dirPath, subDirs) {\n  return new Promise((resolve) =\u003e {\n    subDirs.forEach((subDir, index) =\u003e {\n      mkdirp(`${dirPath}/${subDir}`, (err) =\u003e {\n        if (err) {\n          throw err;\n        }\n\n        if (index === subDirs.length - 1) {\n          resolve();\n        }\n      });\n    });\n  });\n}\n\nasync function updateJsonFromSheet() {\n  await checkAndMakeLocaleDir(localesPath, lngs);\n\n  const doc = await loadSpreadsheet();\n  const lngsMap = await fetchTranslationsFromSheetToJson(doc);\n\n  fs.readdir(localesPath, (error, lngs) =\u003e {\n    if (error) {\n      throw error;\n    }\n\n    lngs.forEach((lng) =\u003e {\n      const localeJsonFilePath = `${localesPath}/${lng}/${ns}.json`;\n\n      const jsonString = JSON.stringify(lngsMap[lng], null, 2);\n\n      fs.writeFile(localeJsonFilePath, jsonString, 'utf8', (err) =\u003e {\n        if (err) {\n          throw err;\n        }\n      });\n    });\n  });\n}\n\nupdateJsonFromSheet();\n```\n\n### **package.json에 script 추가**\n\n```json\n...\n\"scripts\": {\n\t...\n\t\"scan:i18n\": \"i18next-scanner --config i18next-scanner.config.js\",\n\t\"upload:i18n\": \"npm run scan:i18n \u0026\u0026 node translate/upload.js\",\n\t\"download:i18n\": \"node translate/download.js\",\n\t...\n},\n...\n\n```"}},"__N_SSG":true},"page":"/posts/[title]","query":{"title":"기존프로젝트에다국어처리를적용해보자(react-i18next)"},"buildId":"bQcpHPUJVgYV3XLMVBb_b","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>