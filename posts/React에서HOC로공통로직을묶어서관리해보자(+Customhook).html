<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="%PUBLIC_URL%/logo.svg"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>React에서 HOC로 공통 로직을 묶어서 관리해보자(+ Custom hook)</title><meta name="title" content="React에서 HOC로 공통 로직을 묶어서 관리해보자(+ Custom hook)"/><meta name="keywords" content="FE, ReactJS, NextJS, javascript, typescript"/><meta name="description" content="React 공식 문서에서 class형으로 구현된 예제만 있는 HOC를 굳이 함수형으로 구현/적용해보고 느낀점과 Custom hook의 소중함에 대해 이야기해본다."/><meta http-equiv="Title" content="React에서 HOC로 공통 로직을 묶어서 관리해보자(+ Custom hook)"/><meta http-equiv="Subject" content="React 공식 문서에서 class형으로 구현된 예제만 있는 HOC를 굳이 함수형으로 구현/적용해보고 느낀점과 Custom hook의 소중함에 대해 이야기해본다."/><meta property="og:type" content="article"/><meta property="og:url" content="https://jangky000.github.io"/><meta property="og:title" content="React에서 HOC로 공통 로직을 묶어서 관리해보자(+ Custom hook)"/><meta property="og:image" content="https://user-images.githubusercontent.com/46799722/170039589-53960bc6-5d7c-4558-a752-1a426e63b7d5.png"/><meta property="og:description" content="React 공식 문서에서 class형으로 구현된 예제만 있는 HOC를 굳이 함수형으로 구현/적용해보고 느낀점과 Custom hook의 소중함에 대해 이야기해본다."/><meta property="og:site_name" content="FE는 철"/><meta property="og:locale" content="ko_KR"/><meta property="og:image:width" content="316"/><meta property="og:image:height" content="562"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="React에서 HOC로 공통 로직을 묶어서 관리해보자(+ Custom hook)"/><meta name="twitter:description" content="React 공식 문서에서 class형으로 구현된 예제만 있는 HOC를 굳이 함수형으로 구현/적용해보고 느낀점과 Custom hook의 소중함에 대해 이야기해본다."/><meta name="twitter:image" content="https://user-images.githubusercontent.com/46799722/170039589-53960bc6-5d7c-4558-a752-1a426e63b7d5.png"/><meta name="next-head-count" content="23"/><meta name="google-site-verification" content="DPsgjCONuCmXo7g20zSkClsSwOef21VzS4Ihvwgjna0"/><meta name="naver-site-verification" content="e5e67bc35f28f45a7fcf3ee3ea2f5b081ea5ad87"/><link rel="preload" href="/_next/static/css/3f081657a0e1e97c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3f081657a0e1e97c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cb5a7feca3fcc903.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cb5a7feca3fcc903.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-dc9b5fe4736780d1.js" defer=""></script><script src="/_next/static/chunks/framework-beeb81ad8570a989.js" defer=""></script><script src="/_next/static/chunks/main-6057cf5d137ac113.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e80974514508b350.js" defer=""></script><script src="/_next/static/chunks/ea88be26-3a3d5e1902b6f677.js" defer=""></script><script src="/_next/static/chunks/689-21aad9bb91ba8b27.js" defer=""></script><script src="/_next/static/chunks/920-f0105d192cf6e544.js" defer=""></script><script src="/_next/static/chunks/46-545578ec1db3644e.js" defer=""></script><script src="/_next/static/chunks/107-4805ee4300a0d61e.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Btitle%5D-a098b202ee45d413.js" defer=""></script><script src="/_next/static/bQcpHPUJVgYV3XLMVBb_b/_buildManifest.js" defer=""></script><script src="/_next/static/bQcpHPUJVgYV3XLMVBb_b/_ssgManifest.js" defer=""></script><style id="__jsx-a6af0e2473afc2ae">footer.jsx-a6af0e2473afc2ae{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;border-top:1px solid#eaeaea;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:20px;width:100%}.copyright.jsx-a6af0e2473afc2ae{margin-bottom:12px}.hits.jsx-a6af0e2473afc2ae{margin-bottom:8px}</style></head><body><div id="__next"><div class="Posts_container__VfzHC"><style data-emotion="css 162alkr-scroll-progress-bar">.css-162alkr-scroll-progress-bar{position:fixed;top:0;left:0;width:100%;height:3px;background:linear-gradient(
    110deg,
    red,
    orange,
    yellow,
    green,
    indigo,
    purple,
    black
  );opacity:0.5;z-index:10;}.css-162alkr-scroll-progress-bar .bar{position:absolute;top:0;right:0;width:100%;height:3px;background:#fff;}</style><div class="css-162alkr-scroll-progress-bar"><div class="bar" style="width:100%"></div></div><style data-emotion="css 1eou086">.css-1eou086{width:90%;max-width:850px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-1eou086 .theme-switch{-webkit-align-self:flex-end;-ms-flex-item-align:flex-end;align-self:flex-end;}.css-1eou086 .wrapper{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff;border-bottom:1px solid #ddd;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:140px;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:0 16px;position:relative;}.css-1eou086 .lottie-wrapper{position:absolute;top:0;bottom:0;left:0;right:0;opacity:0.7;}.css-1eou086 .title{margin-bottom:12px;z-index:1;color:#000;}.css-1eou086 b{font-size:1.4rem;font-weight:bold;}.css-1eou086 .desc{color:#333;font-size:0.9rem;margin-top:0.5rem;}.css-1eou086 a{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><header class="css-1eou086"><style data-emotion="css ecvcn9">.css-ecvcn9{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:58px;height:38px;overflow:hidden;padding:12px;box-sizing:border-box;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;z-index:0;vertical-align:middle;}@media print{.css-ecvcn9{-webkit-print-color-adjust:exact;color-adjust:exact;}}</style><span class="MuiSwitch-root MuiSwitch-sizeMedium theme-switch css-ecvcn9"><style data-emotion="css jl41ik">.css-jl41ik{position:absolute;top:0;left:0;z-index:1;color:#fff;-webkit-transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,-webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-jl41ik.Mui-checked{-webkit-transform:translateX(20px);-moz-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px);}.css-jl41ik.Mui-disabled{color:#f5f5f5;}.css-jl41ik.Mui-checked+.MuiSwitch-track{opacity:0.5;}.css-jl41ik.Mui-disabled+.MuiSwitch-track{opacity:0.12;}.css-jl41ik .MuiSwitch-input{left:-100%;width:300%;}.css-jl41ik:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-jl41ik:hover{background-color:transparent;}}.css-jl41ik.Mui-checked{color:#556cd6;}.css-jl41ik.Mui-checked:hover{background-color:rgba(85, 108, 214, 0.04);}@media (hover: none){.css-jl41ik.Mui-checked:hover{background-color:transparent;}}.css-jl41ik.Mui-checked.Mui-disabled{color:rgb(190, 199, 239);}.css-jl41ik.Mui-checked+.MuiSwitch-track{background-color:#556cd6;}</style><style data-emotion="css niqsiq">.css-niqsiq{padding:9px;border-radius:50%;position:absolute;top:0;left:0;z-index:1;color:#fff;-webkit-transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,-webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-niqsiq.Mui-checked{-webkit-transform:translateX(20px);-moz-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px);}.css-niqsiq.Mui-disabled{color:#f5f5f5;}.css-niqsiq.Mui-checked+.MuiSwitch-track{opacity:0.5;}.css-niqsiq.Mui-disabled+.MuiSwitch-track{opacity:0.12;}.css-niqsiq .MuiSwitch-input{left:-100%;width:300%;}.css-niqsiq:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-niqsiq:hover{background-color:transparent;}}.css-niqsiq.Mui-checked{color:#556cd6;}.css-niqsiq.Mui-checked:hover{background-color:rgba(85, 108, 214, 0.04);}@media (hover: none){.css-niqsiq.Mui-checked:hover{background-color:transparent;}}.css-niqsiq.Mui-checked.Mui-disabled{color:rgb(190, 199, 239);}.css-niqsiq.Mui-checked+.MuiSwitch-track{background-color:#556cd6;}</style><style data-emotion="css wvvgvo">.css-wvvgvo{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;padding:9px;border-radius:50%;position:absolute;top:0;left:0;z-index:1;color:#fff;-webkit-transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,-webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-wvvgvo::-moz-focus-inner{border-style:none;}.css-wvvgvo.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-wvvgvo{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-wvvgvo.Mui-checked{-webkit-transform:translateX(20px);-moz-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px);}.css-wvvgvo.Mui-disabled{color:#f5f5f5;}.css-wvvgvo.Mui-checked+.MuiSwitch-track{opacity:0.5;}.css-wvvgvo.Mui-disabled+.MuiSwitch-track{opacity:0.12;}.css-wvvgvo .MuiSwitch-input{left:-100%;width:300%;}.css-wvvgvo:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-wvvgvo:hover{background-color:transparent;}}.css-wvvgvo.Mui-checked{color:#556cd6;}.css-wvvgvo.Mui-checked:hover{background-color:rgba(85, 108, 214, 0.04);}@media (hover: none){.css-wvvgvo.Mui-checked:hover{background-color:transparent;}}.css-wvvgvo.Mui-checked.Mui-disabled{color:rgb(190, 199, 239);}.css-wvvgvo.Mui-checked+.MuiSwitch-track{background-color:#556cd6;}</style><span class="MuiButtonBase-root MuiSwitch-switchBase MuiSwitch-colorPrimary PrivateSwitchBase-root MuiSwitch-switchBase MuiSwitch-colorPrimary css-wvvgvo"><style data-emotion="css 1m9pwf3">.css-1m9pwf3{cursor:inherit;position:absolute;opacity:0;width:100%;height:100%;top:0;left:0;margin:0;padding:0;z-index:1;}</style><input class="PrivateSwitchBase-input MuiSwitch-input css-1m9pwf3" type="checkbox"/><style data-emotion="css 19gndve">.css-19gndve{box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);background-color:currentColor;width:20px;height:20px;border-radius:50%;}</style><span class="MuiSwitch-thumb css-19gndve"></span></span><style data-emotion="css 1ju1kxc">.css-1ju1kxc{height:100%;width:100%;border-radius:7px;z-index:-1;-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;background-color:#000;opacity:0.38;}</style><span class="MuiSwitch-track css-1ju1kxc"></span></span><div class="wrapper"><div class="lottie-wrapper"><style data-emotion="css 1gybl1y-styled-lottie">.css-1gybl1y-styled-lottie{width:100%;height:100%;}</style><div width="100%" height="100%" class="css-1gybl1y-styled-lottie"></div></div><div class="title"><style data-emotion="css dtw560">.css-dtw560{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><a class="css-dtw560" href="/"><style data-emotion="css kcbsw7-styled-lottie">.css-kcbsw7-styled-lottie{width:70px;height:70px;}</style><div width="70px" height="70px" class="css-kcbsw7-styled-lottie"></div><b>FE는 철</b></a><div class="desc">FE 개발자로 일하면서 겪은 경험담을 정리합니다.</div></div></div></header><div style="opacity:0"><style data-emotion="css 674psz-post-layout">.css-674psz-post-layout{margin:30px auto;max-width:850px;width:90%;}.css-674psz-post-layout img{max-width:100%;}.css-674psz-post-layout .post-desc{border-radius:4px;background-color:#BDCC94;padding:20px;margin:20px auto;color:#FFFFFF;font-size:1.1rem;}.css-674psz-post-layout .post-contents a{color:#95998A;-webkit-text-decoration:underline;text-decoration:underline;}.css-674psz-post-layout .post-contents a:hover{color:#000;cursor:pointer;}.css-674psz-post-layout .post-contents code{background:rgba(135, 131, 120, 0.15);color:#eb5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em;}</style><main class="css-674psz-post-layout"><div><h2>React에서 HOC로 공통 로직을 묶어서 관리해보자(+ Custom hook)</h2></div><small>2021.11.04<!-- --> 작성 / @<!-- -->jangky000</small><hr/><div class="post-desc">React 공식 문서에서 class형으로 구현된 예제만 있는 HOC를 굳이 함수형으로 구현/적용해보고 느낀점과 Custom hook의 소중함에 대해 이야기해본다.</div><div class="post-contents"><h1>상황 #1</h1><p>React 프로젝트에 4개의 새로운 페이지를 추가하는 태스크를 맡게 되었다. </p><p>아래와 같이 4개의 페이지를 제작해야 한다고 하자, 4개의 페이지에는 공통적으로 날짜를 선택할 수 있는 Calendar Selector가 있고, 이 셀렉터에는 사용자에 따라 <strong>선택 가능한 기간</strong>과 <strong>기본 설정 기간</strong> 정보가 필요하다.</p><ul><li><strong>선택 가능한 기간</strong>은 서버에서 데이터를 불러와 전역 상태로 관리되고 있는 데이터다.</li><li><strong>기본 설정 기간</strong> 역시 전역 상태 데이터다.</li><li>각각의 페이지는 Calendar Selector에서 선택한 기간에 따라 다른 데이터를 불러와 출력해야 한다.</li></ul><div><div style="display: grid;grid-template-columns: repeat(2, 1fr);grid-column-gap: 20px;grid-row-gap: 20px;">
    <img src="https://user-images.githubusercontent.com/46799722/140294319-00c25762-be33-4452-93ad-b9ffec94b290.png" style="width:100%;"/>
    <img src="https://user-images.githubusercontent.com/46799722/140294330-2092adfa-5527-4b24-a23b-2c75838e98f7.png" style="width:100%;"/>
    <img src="https://user-images.githubusercontent.com/46799722/140294336-21ddcf01-228d-4ff0-b74c-4148139496cc.png" style="width:100%;"/>
    <img src="https://user-images.githubusercontent.com/46799722/140294339-c4061391-c5a0-47ab-b619-4a34e8a11ec8.png" style="width:100%;"/>
</div></div><h1>코드의 재사용</h1><p><em>전역 상태 관리 스토어에서 <strong>선택 가능한 기간</strong>과 <strong>기본 설정 기간</strong>을 가져와 데이터를 검증을 한 뒤 사용하고 싶다, 4개의 페이지에서 똑같이.</em></p><p><strong>선택 가능한 기간</strong>과, <strong>기본 설정 기간</strong> 정도 데이터를 불러오는데, 이 로직을 재사용하겠다고 결심한 이유는 다음과 같다.</p><ul><li>유지 보수할 때, 복사 붙여넣기 되어 있는 4개의 소스를 하나씩 찾아 고치고 싶지 않다.</li><li>각각의 페이지에서 최대한 데이터를 가공하는 로직을 제거하고, View를 그리는 역할에만 집중하고 싶다.</li></ul><h1>리액트에서 코드를 재사용할 수 있는 방법</h1><ul><li>Util 성 순수 함수</li><li>Composition</li><li>Render Props</li><li>HOC</li><li>Custom Hook</li></ul><h1>이중 HOC를 선택한 이유는 다음과 같다.</h1><ul><li>Util 성 순수함수는 전역 상태 관리 스토어 값을 활용 할 수 없다.(순수 함수 정의에 위배)</li><li>Composition은, Render Props는 JSX Element 형태로 사용하여 동적으로 무엇을 그릴지에 초점이 있는 느낌이다.</li><li>하지만 내게 필요한 기능은 단순히 전역 상태 관리 스토어에서 데이터를 가져오는 기능이다.</li><li><s>선택지가 아직 두 개가 남았지만 내게 가장 낯선 HOC를 사용해보고 싶었다.</s></li></ul><h1>HOC(Higher Order Component): 고차함수</h1><blockquote><p>고차 컴포넌트(HOC, Higher Order Component)는 컴포넌트 로직을 재사용하기 위한 React의 고급 기술이다. 고차 컴포넌트(HOC)는 React API의 일부가 아니며, React의 구성적 특성에서 나오는 패턴이다. (<a href="https://ko.reactjs.org/docs/higher-order-components.html">참고</a>)</p><p><em>&quot;횡단 관심사(Cross-Cutting Concerns)에 고차 컴포넌트를 사용할 수 있다.&quot;</em></p></blockquote><p>이 설명을 보고 JAVA의 AOP가 떠올랐다. 여러 컴포넌트에서 공통적으로 사용되는 로직을 횡단 관심사로 보아 하나로 묶어 관리할 수 있다고 한다.</p><h2>HOC는</h2><ul><li>리액트 컴포넌트를 인자로 받아서 다른 리액트 컴포넌트를 반환하는 함수</li><li>컴포넌트에 특정 기능을 부여한다.</li><li>특정한 기능을 수행한 후 인자로 받은 컴포넌트에 데이터를 넘겨줄 수도 있다.</li></ul><h1>어떠한 경우에 HOC를 사용할까?</h1><ul><li>로딩, 에러, 데이터 요청 등 여러 컴포넌트에서 반복적으로 사용되는 로직을 컴포넌트 바깥으로 분리할 때 고려될 수 있다.</li></ul><h1>Functional하게 HOC 사용하기</h1><ul><li>React 공식 홈페이지에서는 class 형태로 HOC를 사용하는 예제가 나와 있지만, 리액트 프로젝트에서 함수형 컴포넌트로 사용하고 있기 때문에, 함수의 형태로 HOC를 사용하는 방법을 조사했다.</li></ul><h1>사용 예제</h1><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-typescript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// HOC 함수: withCalendarDateRange</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">const</span><span> withCalendarDateRange </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">OriginProps</span><span class="token" style="color:#999">,</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token maybe-class-name">WrappedComponent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">FC</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">WrapperProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">FC</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">OriginProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">WrapperComponent</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">OriginProps</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">{</span><span> projectStore </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useDataStore</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">const</span><span> selectableDateRange </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useMemo</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:#07a">const</span><span> dateRange </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> projectStore</span><span class="token" style="color:#999">.</span><span class="token property-access">date</span><span class="token" style="color:#999">.</span><span class="token property-access">selectable</span><span>
</span><span>      </span><span class="token" style="color:slategray">// 검증 로직...</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">return</span><span> dateRange</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">const</span><span> initSelectedDateRange </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useMemo</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:#07a">const</span><span> dateRange </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> projectStore</span><span class="token" style="color:#999">.</span><span class="token property-access">date</span><span class="token" style="color:#999">.</span><span class="token property-access">init</span><span>
</span><span>      </span><span class="token" style="color:slategray">// 검증 로직...</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">return</span><span> dateRange</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">WrappedComponent</span><span>
</span><span>        </span><span class="token" style="color:#999">{</span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>props</span><span class="token" style="color:#999">}</span><span>
</span><span>        selectableDateRange</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>selectableDateRange</span><span class="token" style="color:#999">}</span><span>
</span><span>        initSelectedDateRange</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>initSelectedDateRange</span><span class="token" style="color:#999">}</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token maybe-class-name">WrapperComponent</span><span class="token" style="color:#999">.</span><span class="token property-access">displayName</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">WrappedComponent</span><span class="token" style="color:#999">.</span><span class="token property-access">displayName</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">||</span><span> </span><span class="token maybe-class-name">WrappedComponent</span><span class="token" style="color:#999">.</span><span class="token property-access">name</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">||</span><span> </span><span class="token" style="color:#690">&#x27;CalendarDateRangeWrapper&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token maybe-class-name">WrapperComponent</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-typescript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// 공통 로직을 추가할 컴포넌트: WrappedVisitStatus</span><span>
</span><span></span><span class="token" style="color:slategray">// Props를 통해 selectableDateRange, initSelectedDateRange 데이터를 받는다.</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">WrappedVisitStatus</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> selectableDateRange</span><span class="token" style="color:#999">,</span><span> initSelectedDateRange </span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">WrappedVisitStatusProps</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">[</span><span>dateRange</span><span class="token" style="color:#999">,</span><span> setDateRange</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token generic-function" style="color:#DD4A68">useState</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic maybe-class-name" style="color:#DD4A68">DateRange</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">handleDateRange</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>changedDateRange</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">DateRange</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#DD4A68">setDateRange</span><span class="token" style="color:#999">(</span><span>changedDateRange</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">StyledLayout</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">StyledTitleWrapper</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">StyledTitle</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>방문 현황</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">StyledTitle</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Calendar</span><span>
</span><span>          selectableRange</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>selectableDateRange</span><span class="token" style="color:#999">}</span><span>
</span><span>          initDateRange</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>initSelectedDateRange</span><span class="token" style="color:#999">}</span><span>
</span><span>          dateHandle</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>handleDateRange</span><span class="token" style="color:#999">}</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">StyledTitleWrapper</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">StyledLayout</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>  </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// HOC를 통해 캘린더 데이터 Props 삽입</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">VisitStatus</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">withCalendarDateRange</span><span class="token" style="color:#999">(</span><span class="token maybe-class-name">WrappedVisitStatus</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-typescript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// 공통 로직이 추가된 컴포넌트 사용: Dashboard</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">const</span><span> useTab </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>defaultTab</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ITab</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">IUseTab</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">[</span><span>selectedTab</span><span class="token" style="color:#999">,</span><span> setTab</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token generic-function" style="color:#DD4A68">useState</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic maybe-class-name" style="color:#DD4A68">ITab</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span>defaultTab</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">handleTab</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>tab</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ITab</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">setTab</span><span class="token" style="color:#999">(</span><span>tab</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span> selectedTab</span><span class="token" style="color:#999">,</span><span> handleTab </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">Dashboard</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">FC</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">{</span><span> selectedTab</span><span class="token" style="color:#999">,</span><span> handleTab </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useTab</span><span class="token" style="color:#999">(</span><span>tabList</span><span class="token" style="color:#999">[</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Container</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TopNavBar</span><span> title</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#690">&quot;CRM 대시보드&quot;</span><span> style</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">{</span><span> border</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">BGTab</span><span> tabList</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>tabList</span><span class="token" style="color:#999">}</span><span> selectedTab</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>selectedTab</span><span class="token" style="color:#999">}</span><span> handleTab</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>handleTab</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">BorderSection</span><span> style</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">{</span><span> marginTop</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;32px&#x27;</span><span class="token" style="color:#999">,</span><span> borderRadius</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;8px&#x27;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">{</span><span>selectedTab</span><span class="token" style="color:#999">.</span><span class="token property-access">key</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&#x27;visitStatus&#x27;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;&amp;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">VisitStatus</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">}</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">BorderSection</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Container</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>  </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></pre><h1>위의 구조를 간단하게 표현해보면 다음과 같다.</h1><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-javascript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// HOC</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">withHOC</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token parameter maybe-class-name">WrappedComponent</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">NewComponent</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#999">(</span><span class="token parameter">props</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:slategray">// 공통 로직</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">{</span><span> newData </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token control-flow" style="color:#07a">await</span><span> </span><span class="token" style="color:#DD4A68">fetchNewDate</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// newData = &#x27;Higher Order Component&#x27;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">WrappedComponent</span><span> </span><span class="token" style="color:#999">{</span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>props</span><span class="token" style="color:#999">}</span><span> data</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>newData</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span><span>  </span><span class="token maybe-class-name">NewComponent</span><span class="token" style="color:#999">.</span><span class="token property-access">displayName</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&#x27;NewComponent&#x27;</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token maybe-class-name">NewComponent</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-javascript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// 공통 로직을 추가할 컴포넌트</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> withHOC </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;withHOC.tsx&#x27;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">WrappedComponent</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token parameter" style="color:#999">{</span><span class="token parameter">text</span><span class="token parameter" style="color:#999">,</span><span class="token parameter"> data</span><span class="token parameter" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:slategray">// name은 PageComponent에서 props로 넘겨준 데이터</span><span>
</span><span>    </span><span class="token" style="color:slategray">// data는 HOC에 의해 props에 추가된</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>text</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>data</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">MyComponent</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">withHOC</span><span class="token" style="color:#999">(</span><span class="token maybe-class-name">WrappedComponent</span><span class="token" style="color:#999">)</span></code></pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-javascript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">MyComponent</span><span class="token imports"> </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;MyComponent.tsx&#x27;</span><span>
</span><span></span><span class="token" style="color:slategray">// 공통 로직이 추가된 컴포넌트 사용</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">PageComponent에서</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">MyComponent</span><span> text</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&#x27;HOC&#x27;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>결과 화면:
</span>
<!-- -->HOC
<!-- -->Higher Order Component
</code></pre><h1>그런데,</h1><p>어찌저찌 HOC를 사용해보고 싶은 지적인 욕심은 풀었으나 HOC의 단점이 있다.</p><ul><li>여러 HOC를 하나의 컴포넌트에서 사용해야 할 경우가 생긴다면, <code>withA(withB(withC(MyComponent)))</code> 처럼 함수 호출 Depth가 깊어진다(Nesting).</li></ul><h1>나는 평소 Hooks를 소중히 여기지 않았지</h1><p>필자는 리액트를 처음 시작할 때부터 함수형 컴포넌트와 리액트 Hooks를 사용해왔기 때문에 Hooks의 편리함을 잘 몰랐다. <a href="https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components">리액트 Hooks는 대부분의 HOC와 Render Props를 대체 가능하며, 더 간단하고 리액트 가상 DOM Tree의 Nesting을 줄여준다.</a>
다음과 같이 Custom Hook을 사용하여 해결이 가능하다.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-typescript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// useCalendarDateRange.ts</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">useCalendarDateRange</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">{</span><span> projectStore </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useDataStore</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">const</span><span> selectableDateRange </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useMemo</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:#07a">const</span><span> dateRange </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> projectStore</span><span class="token" style="color:#999">.</span><span class="token property-access">date</span><span class="token" style="color:#999">.</span><span class="token property-access">selectable</span><span>
</span><span>      </span><span class="token" style="color:slategray">// 검증 로직...</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">return</span><span> dateRange</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">const</span><span> initSelectedDateRange </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useMemo</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:#07a">const</span><span> dateRange </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> projectStore</span><span class="token" style="color:#999">.</span><span class="token property-access">date</span><span class="token" style="color:#999">.</span><span class="token property-access">init</span><span>
</span><span>      </span><span class="token" style="color:slategray">// 검증 로직...</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">return</span><span> dateRange</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span>selectableDateRange</span><span class="token" style="color:#999">,</span><span> initSelectedDateRange</span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-typescript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// 공통 로직을 추가할 컴포넌트: VisitStatus</span><span>
</span><span></span><span class="token" style="color:slategray">// Props를 통해서가 아닌 useCalendarDateRange()를 호출해서 필요한 데이터를 받는다.</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">VisitStatus</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">[</span><span>dateRange</span><span class="token" style="color:#999">,</span><span> setDateRange</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token generic-function" style="color:#DD4A68">useState</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic maybe-class-name" style="color:#DD4A68">DateRange</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">handleDateRange</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>changedDateRange</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">DateRange</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#DD4A68">setDateRange</span><span class="token" style="color:#999">(</span><span>changedDateRange</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">{</span><span>selectableDateRange</span><span class="token" style="color:#999">,</span><span> initSelectedDateRange</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useCalendarDateRange</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">StyledLayout</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">StyledTitleWrapper</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">StyledTitle</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>방문 현황</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">StyledTitle</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Calendar</span><span>
</span><span>          selectableRange</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>selectableDateRange</span><span class="token" style="color:#999">}</span><span>
</span><span>          initDateRange</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>initSelectedDateRange</span><span class="token" style="color:#999">}</span><span>
</span><span>          dateHandle</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>handleDateRange</span><span class="token" style="color:#999">}</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">StyledTitleWrapper</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">StyledLayout</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>  </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></pre><h1>결론</h1><ul><li>HOC는 함수형 컴포넌트와 리액트 Hooks가 나오기 이전부터 Class Component 개발에서 리액트 Life Cycle에 종속적이지 않은 중복된 코드를 분리하기 위해서 사용되었다. (그래서 공식 홈페이지에 클래스형 컴포넌트로 만들어진 HOC 예제가 있나보다.)</li><li>HOC는 클래스형, 그리고 함수형 모두에 적용할 수 있어, 레거시와 모던한 리액트 컴포넌트 사이에서 연결 다리처럼 재사용이 가능하다는 장점이 있다. </li><li>현재는 리액트 Hooks를 사용해 Custom Hook을 만들어 HOC를 대부분 대체할 수 있으며, 이렇게 사용하는 것이 더 간단하고 직관적이다.</li><li>그러니 다시 소스를 수정하러 가야겠다.</li></ul><h1>참고</h1><ul><li><a href="https://ko.reactjs.org/docs/higher-order-components.html">https://ko.reactjs.org/docs/higher-order-components.html</a></li><li><a href="https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components">https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components</a></li><li><a href="https://velog.io/@yeonseo07/%EB%AA%A8%EB%8B%AC%EC%9D%84-%EB%A7%8C%EB%93%A4%EB%8B%A4-%EC%83%9D%EA%B8%B4-%EC%9D%BC">https://velog.io/@yeonseo07/%EB%AA%A8%EB%8B%AC%EC%9D%84-%EB%A7%8C%EB%93%A4%EB%8B%A4-%EC%83%9D%EA%B8%B4-%EC%9D%BC</a></li><li><a href="https://yceffort.kr/2020/10/react-hooks-and-hocs">https://yceffort.kr/2020/10/react-hooks-and-hocs</a></li></ul></div></main></div><div></div><footer class="jsx-a6af0e2473afc2ae"><div class="jsx-a6af0e2473afc2ae copyright">Copyright 2021. <!-- -->FE는 철<!-- --> all rights reserved.</div></footer></div><style data-emotion="css-global 9v2qpw">body{color:#333;background-color:#FFFFFF;}</style></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postInfo":{"id":1635951600,"title":"React에서 HOC로 공통 로직을 묶어서 관리해보자(+ Custom hook)","author":"jangky000","category":"업무 회고","desc":"React 공식 문서에서 class형으로 구현된 예제만 있는 HOC를 굳이 함수형으로 구현/적용해보고 느낀점과 Custom hook의 소중함에 대해 이야기해본다.","date":"2021.11.04","content":"\n# 상황 #1\n\nReact 프로젝트에 4개의 새로운 페이지를 추가하는 태스크를 맡게 되었다. \n\n아래와 같이 4개의 페이지를 제작해야 한다고 하자, 4개의 페이지에는 공통적으로 날짜를 선택할 수 있는 Calendar Selector가 있고, 이 셀렉터에는 사용자에 따라 **선택 가능한 기간**과 **기본 설정 기간** 정보가 필요하다.\n- **선택 가능한 기간**은 서버에서 데이터를 불러와 전역 상태로 관리되고 있는 데이터다.\n- **기본 설정 기간** 역시 전역 상태 데이터다.\n- 각각의 페이지는 Calendar Selector에서 선택한 기간에 따라 다른 데이터를 불러와 출력해야 한다.\n\n\u003cdiv style=\"display: grid;grid-template-columns: repeat(2, 1fr);grid-column-gap: 20px;grid-row-gap: 20px;\"\u003e\n    \u003cimg src=\"https://user-images.githubusercontent.com/46799722/140294319-00c25762-be33-4452-93ad-b9ffec94b290.png\" style=\"width:100%;\"/\u003e\n    \u003cimg src=\"https://user-images.githubusercontent.com/46799722/140294330-2092adfa-5527-4b24-a23b-2c75838e98f7.png\" style=\"width:100%;\"/\u003e\n    \u003cimg src=\"https://user-images.githubusercontent.com/46799722/140294336-21ddcf01-228d-4ff0-b74c-4148139496cc.png\" style=\"width:100%;\"/\u003e\n    \u003cimg src=\"https://user-images.githubusercontent.com/46799722/140294339-c4061391-c5a0-47ab-b619-4a34e8a11ec8.png\" style=\"width:100%;\"/\u003e\n\u003c/div\u003e\n\n# 코드의 재사용\n\n*전역 상태 관리 스토어에서 **선택 가능한 기간**과 **기본 설정 기간**을 가져와 데이터를 검증을 한 뒤 사용하고 싶다, 4개의 페이지에서 똑같이.*\n\n**선택 가능한 기간**과, **기본 설정 기간** 정도 데이터를 불러오는데, 이 로직을 재사용하겠다고 결심한 이유는 다음과 같다.\n\n- 유지 보수할 때, 복사 붙여넣기 되어 있는 4개의 소스를 하나씩 찾아 고치고 싶지 않다.\n- 각각의 페이지에서 최대한 데이터를 가공하는 로직을 제거하고, View를 그리는 역할에만 집중하고 싶다.\n\n# 리액트에서 코드를 재사용할 수 있는 방법\n\n- Util 성 순수 함수\n- Composition\n- Render Props\n- HOC\n- Custom Hook\n\n# 이중 HOC를 선택한 이유는 다음과 같다.\n\n- Util 성 순수함수는 전역 상태 관리 스토어 값을 활용 할 수 없다.(순수 함수 정의에 위배)\n- Composition은, Render Props는 JSX Element 형태로 사용하여 동적으로 무엇을 그릴지에 초점이 있는 느낌이다.\n- 하지만 내게 필요한 기능은 단순히 전역 상태 관리 스토어에서 데이터를 가져오는 기능이다.\n- \u003cs\u003e선택지가 아직 두 개가 남았지만 내게 가장 낯선 HOC를 사용해보고 싶었다.\u003c/s\u003e\n\n# HOC(Higher Order Component): 고차함수\n\n\u003e 고차 컴포넌트(HOC, Higher Order Component)는 컴포넌트 로직을 재사용하기 위한 React의 고급 기술이다. 고차 컴포넌트(HOC)는 React API의 일부가 아니며, React의 구성적 특성에서 나오는 패턴이다. ([참고](https://ko.reactjs.org/docs/higher-order-components.html))\n\n\u003e *\"횡단 관심사(Cross-Cutting Concerns)에 고차 컴포넌트를 사용할 수 있다.\"*\n\n이 설명을 보고 JAVA의 AOP가 떠올랐다. 여러 컴포넌트에서 공통적으로 사용되는 로직을 횡단 관심사로 보아 하나로 묶어 관리할 수 있다고 한다.\n\n## HOC는\n\n- 리액트 컴포넌트를 인자로 받아서 다른 리액트 컴포넌트를 반환하는 함수\n- 컴포넌트에 특정 기능을 부여한다.\n- 특정한 기능을 수행한 후 인자로 받은 컴포넌트에 데이터를 넘겨줄 수도 있다.\n\n\n# 어떠한 경우에 HOC를 사용할까?\n\n- 로딩, 에러, 데이터 요청 등 여러 컴포넌트에서 반복적으로 사용되는 로직을 컴포넌트 바깥으로 분리할 때 고려될 수 있다.\n\n# Functional하게 HOC 사용하기\n\n- React 공식 홈페이지에서는 class 형태로 HOC를 사용하는 예제가 나와 있지만, 리액트 프로젝트에서 함수형 컴포넌트로 사용하고 있기 때문에, 함수의 형태로 HOC를 사용하는 방법을 조사했다.\n\n# 사용 예제\n\n````typescript\n// HOC 함수: withCalendarDateRange\nexport const withCalendarDateRange = \u003cOriginProps,\u003e(WrappedComponent: FC\u003cWrapperProps\u003e): FC\u003cOriginProps\u003e =\u003e {\n  const WrapperComponent = (props?: OriginProps) =\u003e {\n    const { projectStore } = useDataStore();\n\n    const selectableDateRange = useMemo(() =\u003e {\n      const dateRange = projectStore.date.selectable\n      // 검증 로직...\n      return dateRange;\n    }, []);\n\n    const initSelectedDateRange = useMemo(() =\u003e {\n      const dateRange = projectStore.date.init\n      // 검증 로직...\n      return dateRange;\n    }, []);\n\n    return (\n      \u003cWrappedComponent\n        {...props}\n        selectableDateRange={selectableDateRange}\n        initSelectedDateRange={initSelectedDateRange}\n      /\u003e\n    );\n  };\n  WrapperComponent.displayName = WrappedComponent.displayName || WrappedComponent.name || 'CalendarDateRangeWrapper';\n  return WrapperComponent;\n};\n````\n\n````typescript\n// 공통 로직을 추가할 컴포넌트: WrappedVisitStatus\n// Props를 통해 selectableDateRange, initSelectedDateRange 데이터를 받는다.\nconst WrappedVisitStatus = ({ selectableDateRange, initSelectedDateRange }: WrappedVisitStatusProps) =\u003e {\n  const [dateRange, setDateRange] = useState\u003cDateRange\u003e();\n  const handleDateRange = (changedDateRange: DateRange) =\u003e setDateRange(changedDateRange);\n\n  return (\n    \u003cStyledLayout\u003e\n      \u003cStyledTitleWrapper\u003e\n        \u003cStyledTitle\u003e방문 현황\u003c/StyledTitle\u003e\n        \u003cCalendar\n          selectableRange={selectableDateRange}\n          initDateRange={initSelectedDateRange}\n          dateHandle={handleDateRange}\n        /\u003e\n      \u003c/StyledTitleWrapper\u003e\n    \u003c/StyledLayout\u003e\n  );\n};\n\n// HOC를 통해 캘린더 데이터 Props 삽입\nexport const VisitStatus = withCalendarDateRange(WrappedVisitStatus);\n````\n\n````typescript\n// 공통 로직이 추가된 컴포넌트 사용: Dashboard\nexport const useTab = (defaultTab: ITab): IUseTab =\u003e {\n  const [selectedTab, setTab] = useState\u003cITab\u003e(defaultTab);\n  const handleTab = (tab: ITab) =\u003e {\n    setTab(tab);\n  };\n  return { selectedTab, handleTab };\n};\n\nexport const Dashboard: FC = () =\u003e {\n  const { selectedTab, handleTab } = useTab(tabList[0]);\n\n  return (\n    \u003cContainer\u003e\n      \u003cTopNavBar title=\"CRM 대시보드\" style={{ border: 0 }} /\u003e\n      \u003cBGTab tabList={tabList} selectedTab={selectedTab} handleTab={handleTab} /\u003e\n      \u003cBorderSection style={{ marginTop: '32px', borderRadius: '8px' }}\u003e\n        {selectedTab.key === 'visitStatus' \u0026\u0026 \u003cVisitStatus /\u003e}\n      \u003c/BorderSection\u003e\n    \u003c/Container\u003e\n  );\n};\n\n````\n\n# 위의 구조를 간단하게 표현해보면 다음과 같다.\n\n````javascript\n// HOC\nexport const withHOC = WrappedComponent =\u003e {\n  const NewComponent = async (props) =\u003e {\n    // 공통 로직\n    const { newData } = await fetchNewDate(); // newData = 'Higher Order Component'\n    return (\n        \u003cWrappedComponent {...props} data={newData} /\u003e\n      );\n  }\n  NewComponent.displayName = 'NewComponent'\n  return NewComponent;\n}\n````\n\n````javascript\n// 공통 로직을 추가할 컴포넌트\nimport { withHOC } from 'withHOC.tsx'\nconst WrappedComponent = ({text, data})=\u003e{\n    // name은 PageComponent에서 props로 넘겨준 데이터\n    // data는 HOC에 의해 props에 추가된\n    return (\n        \u003cdiv\u003e\n            \u003cdiv\u003e{text}\u003c/div\u003e\n            \u003cdiv\u003e{data}\u003c/div\u003e\n        \u003c/div\u003e\n    );\n}\nexport const MyComponent = withHOC(WrappedComponent)\n````\n\n````javascript\nimport { MyComponent } from 'MyComponent.tsx'\n// 공통 로직이 추가된 컴포넌트 사용\nconst PageComponent에서 = ()=\u003e{\n    return \u003cMyComponent text={'HOC'}/\u003e\n}\n````\n````\n결과 화면:\n\nHOC\nHigher Order Component\n````\n\n# 그런데,\n\n어찌저찌 HOC를 사용해보고 싶은 지적인 욕심은 풀었으나 HOC의 단점이 있다.\n- 여러 HOC를 하나의 컴포넌트에서 사용해야 할 경우가 생긴다면, `withA(withB(withC(MyComponent)))` 처럼 함수 호출 Depth가 깊어진다(Nesting).\n\n# 나는 평소 Hooks를 소중히 여기지 않았지\n\n필자는 리액트를 처음 시작할 때부터 함수형 컴포넌트와 리액트 Hooks를 사용해왔기 때문에 Hooks의 편리함을 잘 몰랐다. [리액트 Hooks는 대부분의 HOC와 Render Props를 대체 가능하며, 더 간단하고 리액트 가상 DOM Tree의 Nesting을 줄여준다.](https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components)\n다음과 같이 Custom Hook을 사용하여 해결이 가능하다.\n\n````typescript\n// useCalendarDateRange.ts\nconst useCalendarDateRange = ()=\u003e{\n  const { projectStore } = useDataStore();\n\n    const selectableDateRange = useMemo(() =\u003e {\n      const dateRange = projectStore.date.selectable\n      // 검증 로직...\n      return dateRange;\n    }, []);\n\n    const initSelectedDateRange = useMemo(() =\u003e {\n      const dateRange = projectStore.date.init\n      // 검증 로직...\n      return dateRange;\n    }, []);\n  return {selectableDateRange, initSelectedDateRange}\n}\n````\n\n````typescript\n// 공통 로직을 추가할 컴포넌트: VisitStatus\n// Props를 통해서가 아닌 useCalendarDateRange()를 호출해서 필요한 데이터를 받는다.\nexport const VisitStatus = () =\u003e {\n  const [dateRange, setDateRange] = useState\u003cDateRange\u003e();\n  const handleDateRange = (changedDateRange: DateRange) =\u003e setDateRange(changedDateRange);\n  const {selectableDateRange, initSelectedDateRange} = useCalendarDateRange();\n\n  return (\n    \u003cStyledLayout\u003e\n      \u003cStyledTitleWrapper\u003e\n        \u003cStyledTitle\u003e방문 현황\u003c/StyledTitle\u003e\n        \u003cCalendar\n          selectableRange={selectableDateRange}\n          initDateRange={initSelectedDateRange}\n          dateHandle={handleDateRange}\n        /\u003e\n      \u003c/StyledTitleWrapper\u003e\n    \u003c/StyledLayout\u003e\n  );\n};\n````\n\n# 결론\n\n- HOC는 함수형 컴포넌트와 리액트 Hooks가 나오기 이전부터 Class Component 개발에서 리액트 Life Cycle에 종속적이지 않은 중복된 코드를 분리하기 위해서 사용되었다. (그래서 공식 홈페이지에 클래스형 컴포넌트로 만들어진 HOC 예제가 있나보다.)\n- HOC는 클래스형, 그리고 함수형 모두에 적용할 수 있어, 레거시와 모던한 리액트 컴포넌트 사이에서 연결 다리처럼 재사용이 가능하다는 장점이 있다. \n- 현재는 리액트 Hooks를 사용해 Custom Hook을 만들어 HOC를 대부분 대체할 수 있으며, 이렇게 사용하는 것이 더 간단하고 직관적이다.\n- 그러니 다시 소스를 수정하러 가야겠다.\n\n# 참고\n- [https://ko.reactjs.org/docs/higher-order-components.html](https://ko.reactjs.org/docs/higher-order-components.html)\n- [https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components](https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components)\n- [https://velog.io/@yeonseo07/%EB%AA%A8%EB%8B%AC%EC%9D%84-%EB%A7%8C%EB%93%A4%EB%8B%A4-%EC%83%9D%EA%B8%B4-%EC%9D%BC](https://velog.io/@yeonseo07/%EB%AA%A8%EB%8B%AC%EC%9D%84-%EB%A7%8C%EB%93%A4%EB%8B%A4-%EC%83%9D%EA%B8%B4-%EC%9D%BC)\n- [https://yceffort.kr/2020/10/react-hooks-and-hocs](https://yceffort.kr/2020/10/react-hooks-and-hocs)"}},"__N_SSG":true},"page":"/posts/[title]","query":{"title":"React에서HOC로공통로직을묶어서관리해보자(+Customhook)"},"buildId":"bQcpHPUJVgYV3XLMVBb_b","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>