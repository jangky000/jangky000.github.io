[{"id":1644505200,"title":"NextJS + Typescript + ESLint í”„ë¡œì íŠ¸ì—ì„œ ì ˆëŒ€ê²½ë¡œ alias ì„¤ì •í•˜ê¸°","author":"jangky000","desc":"í”„ë¡œì íŠ¸ì˜ ì‚¬ì´ì¦ˆê°€ ì»¤ì§ˆìˆ˜ë¡ ìƒëŒ€ê²½ë¡œë¥¼ í†µí•´ importë¥¼ í•˜ê²Œ ë˜ë©´ ../ ì§€ì˜¥ì— ë¹ ì§€ê¸° ì‰½ë‹¤. NextJS + Typescript + ESLintë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” í˜„ì¬ ë¸”ë¡œê·¸ì—ì„œ CRACO ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ì ˆëŒ€ê²½ë¡œ aliasë¥¼ ì„¤ì •í•˜ê³  import pathë¥¼ ê¹”ë”í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ê³µìœ í•œë‹¤.","date":"2022.02.11","content":"\n# NextJS + Typescript + ESLint í”„ë¡œì íŠ¸ì—ì„œ ì ˆëŒ€ê²½ë¡œ Alias ì„¤ì •í•˜ê¸°\n\n## ì ìš© ì „\n\n![1](https://user-images.githubusercontent.com/46799722/153555553-77c5db2a-3970-4689-996a-c0444ee4723c.png)\n\n## ì ìš© í›„\n\n![2](https://user-images.githubusercontent.com/46799722/153555565-f020b259-52d9-486a-bab8-b05ec4bf4b7e.png)\n\n- í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°\n\n```\nğŸ“¦jangky000.github.io\n â”£ ğŸ“‚components\n â”£ ğŸ“‚contents\n â”£ ğŸ“‚jsons\n â”£ ğŸ“‚lib\n â”£ ğŸ“‚pages\n â”£ ğŸ“‚public\n â”£ ğŸ“‚scripts\n â”£ ğŸ“‚styles\n â”£ ğŸ“‚theme\n â”£ ğŸ“‚types\n â”£ ğŸ“œ.eslintrc\n â”£ ğŸ“œ.gitignore\n â”£ ğŸ“œ.prettierrc\n â”£ ğŸ“œ.stylelintrc\n â”£ ğŸ“œREADME.md\n â”£ ğŸ“œcraco.config.js\n â”£ ğŸ“œnext-env.d.ts\n â”£ ğŸ“œnext.config.js\n â”£ ğŸ“œpackage.json\n â”£ ğŸ“œtsconfig.json\n â”— ğŸ“œtsconfig.path.json\n```\n\n## **Craco(C**reateÂ **R**eactÂ **A**ppÂ **C**onfigurationÂ **O**verride)\n\n- [https://www.npmjs.com/package/@craco/craco](https://www.npmjs.com/package/@craco/craco)\n- create-react-appë¡œ ìƒì„±í•œ í”„ë¡œì íŠ¸ì—ì„œ ejectë¡œ í”„ë¡œì íŠ¸ì— ìˆ¨ê²¨ì ¸ ìˆëŠ” ëª¨ë“  ì„¤ì •ì„ êº¼ë‚´ì§€ ì•Šê³  ì»¤ìŠ¤í…€ ì„¤ì •ì„ overrideí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ëª¨ë“ˆ\n\n## **Craco** ì„¤ì¹˜\n\n```\nyarn add @craco/craco\nyarn add craco-alias -D\n```\n\n## **craco.config.js**\n\n- ë£¨íŠ¸ ê²½ë¡œì—\n\n```jsx\nconst CracoAlias = require('craco-alias');\n\nmodule.exports = {\n  plugins: [\n    {\n      plugin: CracoAlias,\n      options: {\n        source: 'tsconfig',\n        baseUrl: './src',\n        tsConfigPath: 'tsconfig.path',\n      },\n    },\n  ],\n};\n```\n\n## **tsconfig.path.json**\n\n```jsx\n{\n    \"compilerOptions\": {\n        \"baseUrl\": \"./\" ,\n  \n        \"paths\": {\n            \"@components/*\": [\"components/*\"],\n            \"@styles/*\": [\"styles/*\"],\n            \"@jsons/*\": [\"jsons/*\"],\n            \"@theme/*\": [\"theme/*\"],\n            \"@lib/*\": [\"lib/*\"],\n         },\n     }\n   }\n```\n\n## **tsconfig.json**\n\n```json\n{\n\t...\n\t\"extends\": \"./tsconfig.path\"\n}\n```\n\n## .eslintrc\n\n```json\n{\n\t...\n\t\"import/no-unresolved\": \"off\"\n\t...\n}\n```\n\n## VS Code ê»ë‹¤ê°€ ì¼œê¸°*\n\n- **tsconfig.path.json**ì—ì„œ ê²½ë¡œë¥¼ ìˆ˜ì •í•˜ë©´ ê²½ë¡œë¥¼ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤.\n- ~~ëŒ€ë¶€ë¶„ì˜ ì„¤ì • ë¬¸ì œëŠ” ì„¤ì • ì™„ë£Œ í›„ ê»ë‹¤ê°€ ì¼œë©´ í•´ê²°ëœë‹¤.~~"},{"id":1642690800,"title":"ìœ í•œí•œ Action ì •ì˜ í†µí•œ ìƒíƒœ ê´€ë¦¬","author":"jangky000","desc":"ë³µì¡í•œ UI ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ì¤„ì´ê¸° ìœ„í•´ì„œëŠ” ì•¡ì…˜ì„ ì •ì˜í•˜ê³ , ì •ì˜ëœ ì•¡ì…˜ì— í•œí•´ì„œ ë™ì‘í•˜ë„ë¡ UIë¥¼ ì„¤ê³„í•  í•„ìš”ê°€ ìˆë‹¤. useStateë¥¼ ì´ìš©í•´ì„œ ê´€ë¦¬í•˜ê³  ìˆë˜ ë³µì¡í•œ í•„í„° ëª¨ë‹¬ UIë¥¼ useReducerë¥¼ ì´ìš©í•´ ê´€ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•´ë³´ê³ ì í•œë‹¤.","date":"2022.01.21","content":"\n# ì—…ë¬´\n\n- ìƒí’ˆ í•„í„° ì œì‘\n    1. [ìƒí’ˆ í•„í„° ì†ì„± - ì…€ë ‰í„°] \n        - ex. â€œìƒí’ˆ ì´ë¦„â€, â€œìƒí’ˆ IDâ€, â€œì¹´í…Œê³ ë¦¬â€\n    2. [ê°’ of ìƒí’ˆ í•„í„° ì†ì„± - ëª¨ë‹¬]\n        - ìƒí’ˆ ì´ë¦„ì„ ì„ íƒí–ˆì„ ë•Œ â†’ ex. â€œìƒ˜í”Œ ìƒí’ˆ1â€, â€œìƒ˜í”Œ ìƒí’ˆ2â€\n\n# ì£¼ì œ\n\n- 2ë²ˆ `[ê°’ of ìƒí’ˆ í•„í„° ì†ì„± - ëª¨ë‹¬]` ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬íŒ©í† ë§í•˜ë©´ì„œ\n- `ì•¡ì…˜ ì •ì˜`ë¥¼ í†µí•´ ìƒíƒœì˜ `ì‚¬ì´ë“œ ì´í™íŠ¸` ë¥¼ ê´€ë¦¬í–ˆë˜ ê²½í—˜ì„ ì´ì•¼ê¸°í•´ë³´ê³ ì í•œë‹¤.\n\n![1](https://user-images.githubusercontent.com/46799722/150506783-3b601978-3d5e-4603-ac62-a8eb6656ebd1.png)\n\n![2](https://user-images.githubusercontent.com/46799722/150506774-d2dad4a7-8978-4abd-8cfd-7830cf85b245.png)\n\n![3](https://user-images.githubusercontent.com/46799722/150506777-886c7aac-1f6a-4437-99db-7d5197bdab88.png)\n\n![4](https://user-images.githubusercontent.com/46799722/150506781-2b375c4f-94d9-4b36-88e9-da9bf1085507.png)\n\n![5](https://user-images.githubusercontent.com/46799722/150506766-f515c78f-55cf-4702-96d9-3c0eb51005d9.png)\n\n# ì‹œë‚˜ë¦¬ì˜¤\n\n- [ê°’ of ìƒí’ˆ í•„í„° ì†ì„± - ëª¨ë‹¬]: **<PropertyFilterValueModal2 />**\n    - APIì—ì„œ `ê°’ of ìƒí’ˆ í•„í„° ì†ì„±`ì„ 5ê°œì”© ëŠì–´ì„œ ë¶ˆëŸ¬ì˜´\n        - ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ë©´ ì¶”ê°€ë¡œ 5ê°œë¥¼ ë” ë¶ˆëŸ¬ì˜´\n    - ê°ê°ì˜ ì˜µì…˜(ê°’)ì„ ëˆŒëŸ¬ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒ/í•´ì œ\n    - `ëª¨ë“  ì†ì„± ì„ íƒ` ì„ ëˆŒë €ì„ ë•Œ, ëª¨ë“  ì˜µì…˜(ê°’)ì˜ ì²´í¬ ë°•ìŠ¤ê°€ ì„ íƒ\n    - ê²€ìƒ‰ ì¹¸ì— ë¬¸êµ¬ë¥¼ ì…ë ¥í•˜ë©´,\n        - APIì—ì„œ í•´ë‹¹ ê²€ìƒ‰ ë¬¸ìë¥¼ í¬í•¨í•˜ëŠ” `ê°’ of ìƒí’ˆ í•„í„° ì†ì„±`ì„ 5ê°œì”© ëŠì–´ì„œ ë¶ˆëŸ¬ì˜´\n        - `ëª¨ë“  ì†ì„± ì„ íƒ` ì˜µì…˜ ìˆ¨ê¹€\n        - `â€˜[ê²€ìƒ‰ì–´]â€™ë¥¼ í¬í•¨í•œ ëª¨ë“  ì†ì„± ì„ íƒ` ì˜µì…˜ì´ ë…¸ì¶œ\n        - `â€˜[ê²€ìƒ‰ì–´]â€™ë¥¼ í¬í•¨í•œ ëª¨ë“  ì†ì„± ì„ íƒ`ì„ ëˆ„ë¥´ë©´\n\n# #1 ì•¡ì…˜ì„ ì •ì˜í•˜ì§€ ì•Šì•˜ì„ ë•Œ\n\n## useStateë¡œ ìƒíƒœ ê´€ë¦¬\n\n- useStateë¡œ ì •ì˜í•œ ìƒíƒœëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n    - ê²€ìƒ‰ í‚¤ì›Œë“œ(searchKeyword)\n    - ëª¨ë‘ ì„ íƒ ì—¬ë¶€(isAllChecked)\n    - ê°’ì˜ ì²´í¬ ì—¬ë¶€ë¥¼ ë‹´ê³  ìˆëŠ” ì˜µì…˜ ë¦¬ìŠ¤íŠ¸(optionList)\n    - ì²´í¬ëœ ê°’ì˜ ì´ë¦„ì„ ì €ì¥í•˜ëŠ” ë¦¬ìŠ¤íŠ¸(checkedPropertyValueList)\n    \n    ```tsx\n    const [searchKeyword, setSearchKeyword] = useState<string>(testSearchKeyword || '');\n    const [isAllChecked, setIsAllChecked] = useState<boolean>(false);\n    const [optionList, setOptionList] = useState<IPropertyValue[]>(testOptionData || []);\n    const [checkedPropertyValueList, setCheckedPropertyValueList] = useState<string[]>([]);\n    const [skip, setSkip] = useState<number>(0);\n    ```\n    \n- presenter\n    \n    ```tsx\n    // presenter\n    \n    import React, { FC, useMemo } from 'react';\n    import InfiniteScroll from 'react-infinite-scroll-component';\n    import i18next from 'i18next';\n    import { Backdrop } from '../../Backdrop/Backdrop';\n    import { StyledBackButton, StyledLayout, StyledModalOption, StyledSearch } from './PropertyValueFilterModal2.style';\n    import { FontIcon } from '../../FontIcon/FontIcon';\n    import { BGCheckbox } from '../../BGCheckbox/BGCheckbox';\n    import { BGTooltip } from '../../BGTooltip/BGTooltip';\n    import { BGLoadingSpinner } from '../../BGLoadingSpinner/BGLoadingSpinner';\n    import { BGButtonGroup } from '../../BGButtonGroup/BGButtonGroup';\n    import { BGButton } from '../../BGButton/BGButton';\n    import { BGEmpty } from '../../BGEmpty/BGEmpty';\n    import { IProductProperty } from '../ProductSelectBox/ProductSelectBox.interface';\n    \n    type IsFetching = boolean;\n    \n    export interface IPropertyValue {\n      value: string;\n      checked: boolean;\n    }\n    \n    export interface PropertyValueFilterModal2PresenterProps {\n      isAllChecked: boolean;\n      toggleAllChecked: () => void;\n      searchKeyword: string;\n      handleSearchKeyword: (keyword: string) => void;\n      backToModal1: () => void;\n      closeModal: () => void;\n      optionList: IPropertyValue[];\n      toggleOption: (value: string) => void;\n      isFetching: IsFetching;\n      infiniteNext: () => void;\n      infiniteHasMore: boolean;\n      infiniteSkip: number;\n      selectedProductProperty: IProductProperty;\n      createFilterInfo: () => void;\n    }\n    \n    export const PropertyValueFilterModal2Presenter: FC<PropertyValueFilterModal2PresenterProps> = ({\n      isAllChecked,\n      toggleAllChecked,\n      searchKeyword,\n      handleSearchKeyword,\n      backToModal1,\n      closeModal,\n      optionList,\n      toggleOption,\n      isFetching,\n      infiniteNext,\n      infiniteHasMore,\n      infiniteSkip,\n      selectedProductProperty,\n      createFilterInfo,\n    }: PropertyValueFilterModal2PresenterProps) => {\n      const handleInput = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const keyword = event.target.value;\n        if (typeof keyword === 'string') handleSearchKeyword(keyword);\n      };\n    \n      const saveFilter = () => {\n        createFilterInfo();\n        closeModal();\n      };\n    \n      const isNoData = useMemo(() => optionList.length === 0 && !isFetching, [optionList, isFetching]);\n    \n      const isAnyChecked = useMemo(() => optionList.some((option) => option.checked === true), [optionList]);\n    \n      return (\n        <React.Fragment>\n          <Backdrop handleClick={closeModal} />\n          <StyledLayout>\n            <div className=\"top\">\n              <StyledBackButton onClick={backToModal1}>\n                <FontIcon name=\"ic-arrow-left\" size=\"16px\" />\n                <div>{selectedProductProperty.name}</div>\n              </StyledBackButton>\n            </div>\n            <StyledSearch>\n              <div className=\"search-input\">\n                <FontIcon name=\"ic-search\" size=\"16px\" />\n                <input\n                  data-testid=\"search-text\"\n                  type=\"text\"\n                  name=\"keyword\"\n                  placeholder=\"ê²€ìƒ‰\"\n                  autoComplete=\"off\"\n                  onChange={handleInput}\n                />\n              </div>\n            </StyledSearch>\n            <InfiniteScroll\n              next={infiniteNext}\n              hasMore={infiniteHasMore}\n              dataLength={infiniteSkip}\n              height={220}\n              loader={<BGLoadingSpinner isLoading={isFetching} />}\n            >\n              <StyledModalOption>\n                {optionList.length > 0 && (\n                  <div className=\"row\" data-testid=\"check-all-button\" onClick={toggleAllChecked}>\n                    <BGCheckbox checked={isAllChecked} size={20} style={{ marginRight: '0.5em' }} />\n                    <div className=\"label\">\n                      {searchKeyword\n                        ? i18next.t('\"{{keyword}}\"ì„ í¬í•¨í•œ ëª¨ë“  ì†ì„±', { keyword: searchKeyword })\n                        : i18next.t('ëª¨ë“  ì†ì„±')}\n                    </div>\n                  </div>\n                )}\n    \n                {optionList.map((option) => (\n                  <div\n                    data-testid={`option-${option.value}`}\n                    className=\"row\"\n                    key={option.value}\n                    onClick={() => toggleOption(option.value)}\n                  >\n                    <BGCheckbox checked={option.checked} size={20} style={{ marginRight: '0.5em' }} />\n                    <div className=\"label\">\n                      <BGTooltip title={option.value} placement=\"right\">\n                        <div className=\"tooltip\">{option.value}</div>\n                      </BGTooltip>\n                    </div>\n                  </div>\n                ))}\n                {isNoData && searchKeyword && (\n                  <BGEmpty title={i18next.t('\"{{keyword}}\"ë¥¼ í¬í•¨í•˜ëŠ” ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.', { keyword: searchKeyword })} />\n                )}\n                {isNoData && !searchKeyword && <BGEmpty title={i18next.t('ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.')} />}\n              </StyledModalOption>\n            </InfiniteScroll>\n            <BGButtonGroup style={{ justifyContent: 'end', margin: '10px 10px 0 0' }}>\n              <BGButton appearance=\"secondary\" label={i18next.t('ì·¨ì†Œ')} onClick={closeModal} />\n              <BGButton className=\"save-button\" label={i18next.t('í™•ì¸')} onClick={saveFilter} isDisabled={!isAnyChecked} />\n            </BGButtonGroup>\n          </StyledLayout>\n        </React.Fragment>\n      );\n    };\n    ```\n    \n- container\n    \n    ```tsx\n    // container\n    \n    import React, { FC, useState, useMemo, useEffect, useCallback } from 'react';\n    import { cloneDeep, isEqual } from 'lodash';\n    import { IPropertyValue, PropertyValueFilterModal2Presenter } from './PropertyValueFilterModal2Presenter';\n    import { IFilterNotIn, IFilterNotMatch } from './PropertyValueFilterModal2.interface';\n    import { useInfiniteFormattingQuery } from '../../../hooks/useCustomQuery';\n    import { EventPropertyApi } from '../../../lib/api/EventProperty';\n    import BiginStorage from '../../../services/BiginStorage';\n    import { IProductProperty } from '../ProductSelectBox/ProductSelectBox.interface';\n    \n    interface APIResult {\n      eventPropertyValues: { value: string }[];\n      more: boolean;\n    }\n    \n    export interface PropertyValueFilterModal2ContainerProps {\n      initFilter: IFilterNotIn | IFilterNotMatch | undefined; // ì´ˆê¸° í•„í„° ì„¸íŒ…\n      handleFilter: (createdFilter: IFilterNotIn | IFilterNotMatch) => void; // ì™„ì„±ëœ í•„í„° ë°˜í™˜\n      backToModal1: () => void;\n      closeModal: () => void; // ëª¨ë‹¬ ë‹«ê¸°\n      selectedProductProperty: IProductProperty; // {id: 'event_seg_...', 'name': 'ìƒí’ˆ ì´ë¦„'}\n      testOptionData?: IPropertyValue[]; // í…ŒìŠ¤íŠ¸\n      testSearchKeyword?: string; // í…ŒìŠ¤íŠ¸\n    }\n    \n    export const PropertyValueFilterModal2Container: FC<PropertyValueFilterModal2ContainerProps> = ({\n      initFilter,\n      handleFilter,\n      backToModal1,\n      closeModal,\n      selectedProductProperty,\n      testOptionData,\n      testSearchKeyword,\n    }: PropertyValueFilterModal2ContainerProps) => {\n      const [searchKeyword, setSearchKeyword] = useState<string>(testSearchKeyword || '');\n      const [isAllChecked, setIsAllChecked] = useState<boolean>(false);\n      const [optionList, setOptionList] = useState<IPropertyValue[]>(testOptionData || []);\n      const [checkedPropertyValueList, setCheckedPropertyValueList] = useState<string[]>([]);\n    \n      // ====================================== ~ë¥¼ í¬í•¨í•œ ëª¨ë“  ì†ì„± ì„ íƒ ê´€ë¦¬(searchKeyword + isAllChecked) =====================================\n      const handleSearchKeyword = (keyword: string) => {\n        if (testSearchKeyword) return;\n        setSearchKeyword(keyword);\n      };\n      useEffect(() => {\n        setIsAllChecked(false);\n      }, [searchKeyword]);\n    \n      // ====================================== ì²´í¬ëœ ì†ì„± ê°’ handler =======================================\n      const addCheckedPropertyValue = (value: string) => {\n        const shallowCopiedList = [...checkedPropertyValueList];\n        shallowCopiedList.push(value);\n        setCheckedPropertyValueList(shallowCopiedList);\n      };\n      const removeCheckedPropertyValue = (value: string) => {\n        const filteredList = checkedPropertyValueList.filter((item) => item !== value);\n        setCheckedPropertyValueList(filteredList);\n      };\n    \n      // ====================================== select ì˜µì…˜ handler ========================================================\n      const toggleOption = (value: string) => {\n        const deepCopied = cloneDeep(optionList);\n        const index = deepCopied.findIndex((item) => item.value === value);\n        const isChecked = !deepCopied[index].checked;\n    \n        deepCopied[index].checked = isChecked;\n        setOptionList(deepCopied);\n    \n        // checkedPropertyValue ì—…ë°ì´íŠ¸\n        if (isChecked) addCheckedPropertyValue(deepCopied[index].value);\n        else removeCheckedPropertyValue(deepCopied[index].value);\n    \n        // all checked\n        const allChecked = deepCopied.every((item) => item.checked === true);\n        if (allChecked) setIsAllChecked(true);\n        else setIsAllChecked(false);\n      };\n    \n      // ====================================== ëª¨ë“  ì†ì„± ì„ íƒ handler =====================================\n      const toggleAllChecked = useCallback(() => {\n        const isChecked = !isAllChecked;\n        if (isChecked) {\n          // ì „ì²´ ì„ íƒ\n          const deepCopied = cloneDeep(optionList);\n          const updatedList = deepCopied.map((item) => ({ ...item, checked: isChecked }));\n          setOptionList(updatedList);\n          setCheckedPropertyValueList(deepCopied.map((item) => item.value));\n        } else {\n          // ì „ì²´ ì´ˆê¸°í™”\n          const deepCopied = cloneDeep(optionList);\n          const updatedList = deepCopied.map((item) => ({ ...item, checked: isChecked }));\n          setOptionList(updatedList);\n          setCheckedPropertyValueList([]);\n        }\n        setIsAllChecked(isChecked);\n      }, [isAllChecked, optionList]);\n    \n      // ======================================infinite scroll ========================================================\n      const limit = 5;\n      const projectID = useMemo(() => BiginStorage.selectedProject?.id, []);\n      const queryOptions = useMemo(\n        () => ({ enabled: Boolean(projectID), refetchOnWindowFocus: false, cacheTime: 0, retry: false }),\n        [],\n      );\n    \n      // skip\n      const [skip, setSkip] = useState<number>(0);\n      const updateSkip = useCallback(() => {\n        setSkip(optionList.length);\n      }, [optionList]);\n    \n      useEffect(() => {\n        updateSkip();\n      }, [optionList]);\n    \n      const query = useMemo(() => {\n        const basicQuery = {\n          application: projectID,\n          name: selectedProductProperty.id,\n        };\n    \n        const keywordQuery = {\n          application: projectID,\n          name: selectedProductProperty.id,\n          searchText: searchKeyword,\n        };\n        return searchKeyword === '' ? basicQuery : keywordQuery;\n      }, [projectID, searchKeyword, selectedProductProperty.id]);\n    \n      // api ê²°ê³¼ formatting\n      const formattingResult = useCallback(\n        (result: APIResult | undefined): IPropertyValue[] => {\n          if (!result) return [];\n          const list = result.eventPropertyValues.map((apiResultObj) => {\n            const isPrevChecked = !!checkedPropertyValueList.find((value) => value === apiResultObj.value);\n            return { ...apiResultObj, checked: isAllChecked || isPrevChecked };\n          });\n          return list;\n        },\n        [checkedPropertyValueList],\n      );\n    \n      // api ìš”ì²­\n      const { data: newPropertyValueList, isFetching, refetch, fetchNextPage, hasNextPage } = useInfiniteFormattingQuery(\n        ['propertyValueList', searchKeyword],\n        ({ pageParam = 0 }) =>\n          EventPropertyApi.findEventPropValue({\n            query,\n            limit,\n            skip: pageParam,\n          }),\n    \n        {\n          ...queryOptions,\n          getNextPageParam: () => {\n            return skip ?? false;\n          },\n        },\n        formattingResult,\n      );\n    \n      // update\n      useEffect(() => {\n        if (testOptionData) return;\n        if (newPropertyValueList) setOptionList(newPropertyValueList);\n      }, [newPropertyValueList]);\n    \n      const loadMore = useCallback(() => fetchNextPage(), [fetchNextPage]);\n    \n      useEffect(() => {\n        refetch();\n        setSkip(0);\n      }, [searchKeyword]);\n    \n      // ====================================== make filter result ========================================================\n      const createFilterInfo = () => {\n        // ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¡œ ì„ íƒ ì •ë³´ ì „ë‹¬\n        const isëª¨ë“ ì†ì„± = isAllChecked && !searchKeyword;\n        const isë¬¸ìì—´í¬í•¨í•œëª¨ë“ ì†ì„± = isAllChecked && searchKeyword;\n    \n        if (isëª¨ë“ ì†ì„±) {\n          const createdFilterInfo: IFilterNotMatch = {\n            dimension: selectedProductProperty.id,\n            type: 'notMatch',\n            value: '.*',\n          };\n          handleFilter(createdFilterInfo);\n        } else if (isë¬¸ìì—´í¬í•¨í•œëª¨ë“ ì†ì„±) {\n          const createdFilterInfo: IFilterNotMatch = {\n            dimension: selectedProductProperty.id,\n            type: 'notMatch',\n            value: searchKeyword,\n          };\n          handleFilter(createdFilterInfo);\n        } else {\n          // isì§ì ‘ì„ íƒ = !isAllChecked;\n          const createdFilterInfo: IFilterNotIn = {\n            dimension: selectedProductProperty.id,\n            type: 'not in',\n            value: checkedPropertyValueList,\n          };\n          handleFilter(createdFilterInfo);\n        }\n      };\n    \n      // init filter\n      useEffect(() => {\n        if (!initFilter) return;\n        if (initFilter.dimension !== selectedProductProperty.id) return;\n        switch (initFilter.type) {\n          default:\n          case 'not in': // ê°œë³„ ì„ íƒ\n            if (isAllChecked === true) toggleAllChecked();\n            if (!isEqual(initFilter.value, checkedPropertyValueList)) setCheckedPropertyValueList(initFilter.value);\n            break;\n          case 'notMatch': // ëª¨ë‘ ì„ íƒ\n            if (isAllChecked === false) toggleAllChecked();\n            if (initFilter.value === '.*' && searchKeyword !== '') handleSearchKeyword('');\n            else if (initFilter.value !== '.*') handleSearchKeyword(initFilter.value);\n            break;\n        }\n      }, [initFilter]);\n    \n      return (\n        <PropertyValueFilterModal2Presenter\n          isAllChecked={isAllChecked}\n          toggleAllChecked={toggleAllChecked}\n          searchKeyword={searchKeyword}\n          handleSearchKeyword={handleSearchKeyword}\n          backToModal1={backToModal1}\n          closeModal={closeModal}\n          optionList={optionList}\n          toggleOption={toggleOption}\n          isFetching={isFetching}\n          infiniteNext={loadMore}\n          infiniteHasMore={!!hasNextPage}\n          infiniteSkip={skip}\n          selectedProductProperty={selectedProductProperty}\n          createFilterInfo={createFilterInfo}\n        />\n      );\n    };\n    ```\n    \n- test\n    \n    ```tsx\n    // test\n    \n    import React from 'react';\n    import { render, fireEvent } from '@testing-library/react';\n    import { ThemeProvider } from '@emotion/react';\n    import { QueryClient, QueryClientProvider } from 'react-query';\n    \n    import { lightTheme } from '../../../Theme';\n    import { PropertyValueFilterModal2Container } from './PropertyValueFilterModal2Container';\n    import { EventPropertyApi } from '../../../lib/api/EventProperty';\n    import { IFilterNotIn, IFilterNotMatch } from './PropertyValueFilterModal2.interface';\n    \n    // ìƒí’ˆ ID\n    const idSelectOne: IFilterNotIn = { dimension: 'event_seg_productIds', type: 'not in', value: ['P54321'] };\n    const idSelectAll: IFilterNotMatch = { dimension: 'event_seg_productIds', type: 'notMatch', value: '.*' };\n    const idIncludeAllByKeywords: IFilterNotMatch = {\n      dimension: 'event_seg_productIds',\n      type: 'notMatch',\n      value: 'P12345',\n    };\n    \n    // ìƒí’ˆ ì´ë¦„\n    const nameSelectOne: IFilterNotIn = { dimension: 'event_seg_productNames', type: 'not in', value: ['ìƒ˜í”Œìƒí’ˆ 1'] };\n    const nameSelectAll: IFilterNotMatch = { dimension: 'event_seg_productNames', type: 'notMatch', value: '.*' };\n    const nameIncludeAllByKeywords: IFilterNotMatch = {\n      dimension: 'event_seg_productNames',\n      type: 'notMatch',\n      value: 'ìƒí’ˆ',\n    };\n    \n    // ìƒí’ˆ ì¹´í…Œê³ ë¦¬\n    const categorySelectOne: IFilterNotIn = {\n      dimension: 'event_seg_productCategories',\n      type: 'not in',\n      value: ['ë‚¨ì„±', '29', '33'],\n    };\n    const categorySelectAll: IFilterNotMatch = { dimension: 'event_seg_productCategories', type: 'notMatch', value: '.*' };\n    const categoryIncludeAllByKeywords: IFilterNotMatch = {\n      dimension: 'event_seg_productCategories',\n      type: 'notMatch',\n      value: 'ë‚¨ì„±',\n    };\n    \n    beforeEach(() => {\n      jest.clearAllMocks();\n    });\n    \n    // [ëŒ€ë¶„ë¥˜] í…ŒìŠ¤íŠ¸ ëŒ€ìƒ\n    describe('PropertyValueFilterModal2Container', () => {\n      // local storage mock\n      const localStorageMock = (() => {\n        return {\n          getItem() {\n            return '{\"id\": \"test\"}';\n          },\n        };\n      })();\n      Object.defineProperty(window, 'localStorage', { value: localStorageMock });\n    \n      const queryClient = new QueryClient();\n      const backToModal1TestFn = jest.fn();\n      const closeModalTestFn = jest.fn();\n      const handleFilterTestFn = jest.fn();\n    \n      // [ì¤‘ë¶„ë¥˜] íŠ¹ì • ìƒí™©, ìƒíƒœ\n      describe('ìƒí’ˆ ì´ë¦„ í…ŒìŠ¤íŠ¸', () => {\n        const selectedProductProperty = { id: 'event_seg_productNames', name: 'ìƒí’ˆ ì´ë¦„' };\n        // api mock\n        const mock = jest.spyOn(EventPropertyApi, 'findEventPropValue');\n        mock.mockImplementation(() =>\n          Promise.resolve({\n            eventPropertyValues: [\n              { value: 'ìƒ˜í”Œìƒí’ˆ 1' },\n              { value: 'ìƒ˜í”Œìƒí’ˆ2' },\n              { value: 'BlueJean' },\n              { value: 'ìƒ˜í”Œìƒí’ˆ 2' },\n              { value: 'BlueJean2' },\n            ],\n            more: true,\n          }),\n        );\n    \n        const testOptionData = [\n          { value: 'ìƒ˜í”Œìƒí’ˆ 1', checked: false },\n          { value: 'ìƒ˜í”Œìƒí’ˆ2', checked: false },\n          { value: 'BlueJean', checked: false },\n          { value: 'ìƒ˜í”Œìƒí’ˆ 2', checked: false },\n          { value: 'BlueJean2', checked: false },\n        ];\n    \n        // [ì†Œë¶„ë¥˜] êµ¬ì²´ì  ê¸°ëŠ¥\n        it('1. í•˜ë‚˜ì˜ ì†ì„± ì„ íƒ', () => {\n          const { getByTestId, getAllByTestId } = render(\n            <QueryClientProvider client={queryClient}>\n              <ThemeProvider theme={lightTheme}>\n                <PropertyValueFilterModal2Container\n                  initFilter={undefined}\n                  backToModal1={backToModal1TestFn}\n                  closeModal={closeModalTestFn}\n                  handleFilter={handleFilterTestFn}\n                  selectedProductProperty={selectedProductProperty}\n                  testOptionData={testOptionData} // test ì½”ë“œì—ì„œë§Œ ì‚¬ìš©\n                />\n              </ThemeProvider>\n            </QueryClientProvider>,\n          );\n    \n          expect(mock).toHaveBeenCalled();\n    \n          // í•˜ë‚˜ì˜ ì†ì„± ê°’ ë²„íŠ¼ í´ë¦­\n          const checkAllButton = getByTestId('option-ìƒ˜í”Œìƒí’ˆ 1');\n          fireEvent.click(checkAllButton);\n    \n          // í™•ì¸ ë²„íŠ¼ í´ë¦­\n          const buttonList = getAllByTestId('bg-button');\n          const saveFilterButton = buttonList.find((button) => button.classList.contains('save-button'));\n          if (saveFilterButton) fireEvent.click(saveFilterButton);\n    \n          expect(handleFilterTestFn).toHaveBeenCalled();\n          expect(handleFilterTestFn).toHaveBeenCalledWith(nameSelectOne);\n        });\n    \n        // [ì†Œë¶„ë¥˜] êµ¬ì²´ì  ê¸°ëŠ¥\n        it('2. ëª¨ë“  ì†ì„± ì„ íƒ', async () => {\n          const { getByTestId, getAllByTestId } = render(\n            <QueryClientProvider client={queryClient}>\n              <ThemeProvider theme={lightTheme}>\n                <PropertyValueFilterModal2Container\n                  initFilter={undefined}\n                  backToModal1={backToModal1TestFn}\n                  closeModal={closeModalTestFn}\n                  handleFilter={handleFilterTestFn}\n                  selectedProductProperty={selectedProductProperty}\n                  testOptionData={testOptionData} // test ì½”ë“œì—ì„œë§Œ ì‚¬ìš©\n                />\n              </ThemeProvider>\n            </QueryClientProvider>,\n          );\n    \n          expect(mock).toHaveBeenCalled();\n    \n          // ëª¨ë“  ì†ì„± ë²„íŠ¼ í´ë¦­\n          const checkAllButton = getByTestId('check-all-button');\n          fireEvent.click(checkAllButton);\n    \n          // í™•ì¸ ë²„íŠ¼ í´ë¦­\n          const buttonList = getAllByTestId('bg-button');\n          const saveFilterButton = buttonList.find((button) => button.classList.contains('save-button'));\n          if (saveFilterButton) fireEvent.click(saveFilterButton);\n    \n          expect(handleFilterTestFn).toHaveBeenCalled();\n          expect(handleFilterTestFn).toHaveBeenCalledWith(nameSelectAll);\n        });\n    \n        // [ì†Œë¶„ë¥˜] êµ¬ì²´ì  ê¸°ëŠ¥\n        it('3. ~ë¥¼ í¬í•¨í•œ ëª¨ë“  ì†ì„± ì„ íƒ', async () => {\n          const { getByTestId, getAllByTestId } = render(\n            <QueryClientProvider client={queryClient}>\n              <ThemeProvider theme={lightTheme}>\n                <PropertyValueFilterModal2Container\n                  initFilter={undefined}\n                  backToModal1={backToModal1TestFn}\n                  closeModal={closeModalTestFn}\n                  handleFilter={handleFilterTestFn}\n                  selectedProductProperty={selectedProductProperty}\n                  testOptionData={testOptionData} // test ì½”ë“œì—ì„œë§Œ ì‚¬ìš©\n                  testSearchKeyword=\"ìƒí’ˆ\" // test ì½”ë“œì—ì„œë§Œ ì‚¬ìš©\n                />\n              </ThemeProvider>\n            </QueryClientProvider>,\n          );\n    \n          expect(mock).toHaveBeenCalledTimes(1);\n    \n          // ëª¨ë“  ì†ì„± ë²„íŠ¼ í´ë¦­\n          const checkAllButton = getByTestId('check-all-button');\n          fireEvent.click(checkAllButton);\n    \n          // í™•ì¸ ë²„íŠ¼ í´ë¦­\n          const buttonList = getAllByTestId('bg-button');\n          const saveFilterButton = buttonList.find((button) => button.classList.contains('save-button'));\n          if (saveFilterButton) fireEvent.click(saveFilterButton);\n    \n          expect(handleFilterTestFn).toHaveBeenCalled();\n          expect(handleFilterTestFn).toHaveBeenCalledWith(nameIncludeAllByKeywords);\n        });\n      });\n    });\n    ```\n    \n\n## í•´ë‹¹ ì½”ë“œì˜ ì•„ì‰¬ìš´ ì \n\n- ìƒíƒœ ê°„ì˜ ì‚¬ì´ë“œ ì´í™íŠ¸ ë°œìƒ â†’ ì˜ˆì™¸ì²˜ë¦¬ ì¶”ê°€ â†’ ì½”ë“œ ê°€ë…ì„± ì €í•˜ ë° ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§\n    - ì˜ˆì‹œ:\n        - DBì— ì €ì¥ëœ í•„í„° ì„¤ì •ì„ ë¶ˆëŸ¬ì˜¨ë‹¤\n            - â†’ isAllChecked ì—…ë°ì´íŠ¸\n            - â†’ checkedPropertyValueList ì—…ë°ì´íŠ¸\n            - â†’ searchKeyword ì—…ë°ì´íŠ¸\n        - searchKeyword ì—…ë°ì´íŠ¸\n            - â†’ skip = 0\n            - â†’ API refetchâ†’ optionList ì—…ë°ì´íŠ¸ â†’ skip ì—…ë°ì´íŠ¸\n            - â†’ isAllChecked = false\n    - ìì£¼ ë§Œë‚˜ê²Œ ë  ì—ëŸ¬: \"Error: Too many re-renders. React limits the number of renders to prevent an infinite loop.\"\n- ì½”ë“œë¥¼ ì½ê³  ì‹¶ì§€ê°€ ì•Šë‹¤.\n\n# #2 ì•¡ì…˜ì„ ì •ì˜ í–ˆì„ ë•Œ\n\n## ìœ í•œ ì˜¤í† ë§ˆíƒ€\n\n## ê¸°íƒ€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œì˜ ìƒíƒœ ê´€ë¦¬\n\n- Redux\n    - reducer\n- Recoil\n    - action\n\n## SOLID ì¤‘ì—  S: ë‹¨ì¼ ì±…ì„ ì›ì¹™\n\n- í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì§„ë‹¤.\n- ì»´í¬ë„ŒíŠ¸ í•˜ë‚˜ê°€ ë¸”ë™ë°•ìŠ¤ì˜ ì—­í• \n- ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì˜ ìƒíƒœëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì±…ì„ì§„ë‹¤\n- ê·¸ë˜ì„œ ì „ì—­ìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.\n- ë‚´ë¶€ì—ì„œ ì•¡ì…˜ìœ¼ë¡œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.\n\n## useReducerë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœ ê´€ë¦¬\n\n- í•˜ë‚˜ì˜ ìƒíƒœ ì •ì˜\n    \n    ```tsx\n    interface State {\n      searchKeyword: string;\n      isAllChecked: boolean;\n      optionList: IPropertyValue[];\n      checkedPropertyValueList: string[];\n      infiniteScrollSkip: number;\n    }\n    \n    export const initialState: State = {\n      searchKeyword: '',\n      isAllChecked: false,\n      optionList: [],\n      checkedPropertyValueList: [],\n      infiniteScrollSkip: 0,\n    };\n    ```\n    \n- ì•¡ì…˜ ì •ì˜\n    - RESET : ì´ˆê¸°í™”\n    - LOAD: ì €ì¥ëœ í•„í„° ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°\n    - TOGGLE_ALL_CHECKED: ëª¨ë“  ì†ì„± ì„ íƒ/í•´ì œ\n    - TOGGLE_REG_EX_ALL_CHECKED: ~ë¥¼ í¬í•¨í•œ ëª¨ë“  ì†ì„± ì„ íƒ/í•´ì œ\n    - UPDATE_SEARCH_KEYWORD: ê²€ìƒ‰ì–´ ì—…ë°ì´íŠ¸\n    - TOGGLE_ONE: í•˜ë‚˜ì˜ ì†ì„± ì„ íƒ/í•´ì œ\n    - UPDATE_OPTION_LIST: ì˜µì…˜ ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸(ë¬´í•œ ìŠ¤í¬ë¡¤ ë“±)\n    \n    ```tsx\n    interface Action {\n      type: 'RESET' | 'TOGGLE_ALL_CHECKED' | 'TOGGLE_REG_EX_ALL_CHECKED';\n    }\n    \n    interface LoadAction {\n      type: 'LOAD';\n      filter: FilterEach | FilterRegEx;\n    }\n    \n    interface UpdateKeywordAction {\n      type: 'UPDATE_SEARCH_KEYWORD';\n      keyword: string;\n    }\n    \n    interface ToggleOneAction {\n      type: 'TOGGLE_ONE';\n      key: string;\n    }\n    \n    interface UpdateOptionListAction {\n      type: 'UPDATE_OPTION_LIST';\n      list: KeyValue[];\n    }\n    ```\n    \n- ë¦¬ë“€ì„œ ì •ì˜\n    \n    ```tsx\n    export const reducer = (\n      state: State,\n      action: Action | LoadAction | UpdateKeywordAction | ToggleOneAction | UpdateOptionListAction,\n    ): State => {\n      let newState;\n      switch (action.type) {\n        default:\n        case 'RESET':\n          newState = initialState;\n          break;\n        case 'LOAD':\n          newState = load(state, action.filter);\n          break;\n        case 'TOGGLE_ALL_CHECKED':\n          newState = toggleAllChecked(state);\n          break;\n        case 'TOGGLE_REG_EX_ALL_CHECKED':\n          newState = toggleAllChecked(state);\n          break;\n        case 'TOGGLE_ONE':\n          newState = toggleOne(state, action.key);\n          break;\n        case 'UPDATE_OPTION_LIST':\n          newState = updateOptionList(state, action.list);\n          break;\n        case 'UPDATE_SEARCH_KEYWORD':\n          newState = updateKeyword(state, action.keyword);\n          break;\n      }\n      return newState;\n    };\n    ```\n    \n\n- presenter\n    \n    ```tsx\n    // PropertyValueFilterModal2Presenter.tsx\n    import React, { FC, useMemo } from 'react';\n    import InfiniteScroll from 'react-infinite-scroll-component';\n    import { useTranslation } from 'react-i18next';\n    import { Backdrop } from '../../Backdrop/Backdrop';\n    import { StyledBackButton, StyledLayout, StyledModalOption, StyledSearch } from './PropertyValueFilterModal2.style';\n    import { FontIcon } from '../../FontIcon/FontIcon';\n    import { BGCheckbox } from '../../BGCheckbox/BGCheckbox';\n    import { BGTooltip } from '../../BGTooltip/BGTooltip';\n    import { BGLoadingSpinner } from '../../BGLoadingSpinner/BGLoadingSpinner';\n    import { BGButtonGroup } from '../../BGButtonGroup/BGButtonGroup';\n    import { BGButton } from '../../BGButton/BGButton';\n    import { BGEmpty } from '../../BGEmpty/BGEmpty';\n    import { IProductProperty } from '../ProductSelectBox/ProductSelectBox.interface';\n    import { IPropertyValue } from './PropertyValueFilterModal2.interface';\n    \n    type IsFetching = boolean;\n    \n    export interface PropertyValueFilterModal2PresenterProps {\n      isAllChecked: boolean;\n      toggleAllChecked: () => void;\n      toggleRegExAllChecked: () => void;\n      searchKeyword: string;\n      handleSearchKeyword: (keyword: string) => void;\n      backToModal1: () => void;\n      closeModal: () => void;\n      optionList: IPropertyValue[];\n      toggleOption: (value: string) => void;\n      isFetching: IsFetching;\n      infiniteNext: () => void;\n      infiniteHasMore: boolean;\n      infiniteSkip: number;\n      selectedProductProperty: IProductProperty;\n      createFilterInfo: () => void;\n    }\n    \n    export const PropertyValueFilterModal2Presenter: FC<PropertyValueFilterModal2PresenterProps> = ({\n      isAllChecked,\n      toggleAllChecked,\n      toggleRegExAllChecked,\n      searchKeyword,\n      handleSearchKeyword,\n      backToModal1,\n      closeModal,\n      optionList,\n      toggleOption,\n      isFetching,\n      infiniteNext,\n      infiniteHasMore,\n      infiniteSkip,\n      selectedProductProperty,\n      createFilterInfo,\n    }: PropertyValueFilterModal2PresenterProps) => {\n      const i18next = useTranslation();\n      const handleInput = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const keyword = event.target.value;\n        if (typeof keyword === 'string') {\n          handleSearchKeyword(keyword);\n        }\n      };\n    \n      const saveFilter = () => {\n        createFilterInfo();\n        closeModal();\n      };\n    \n      const isNoData = useMemo(() => optionList.length === 0 && !isFetching, [optionList, isFetching]);\n      const isAnyChecked = useMemo(() => optionList.some((option) => option.checked === true), [optionList]);\n    \n      return (\n        <React.Fragment>\n          <Backdrop handleClick={closeModal} />\n          <StyledLayout>\n            <div className=\"top\">\n              <StyledBackButton onClick={backToModal1}>\n                <FontIcon name=\"ic-arrow-left\" size=\"16px\" />\n                <div>{i18next.t(selectedProductProperty.name)}</div>\n              </StyledBackButton>\n            </div>\n            <StyledSearch>\n              <div className=\"search-input\">\n                <FontIcon name=\"ic-search\" size=\"16px\" />\n                <input\n                  data-testid=\"search-text\"\n                  type=\"text\"\n                  name=\"keyword\"\n                  placeholder={i18next.t('ê²€ìƒ‰')}\n                  autoComplete=\"off\"\n                  value={searchKeyword}\n                  onChange={handleInput}\n                />\n              </div>\n            </StyledSearch>\n            <InfiniteScroll\n              next={infiniteNext}\n              hasMore={infiniteHasMore}\n              dataLength={infiniteSkip}\n              height={220}\n              loader={<BGLoadingSpinner isLoading={isFetching} />}\n            >\n              <StyledModalOption>\n                {optionList.length > 0 && !searchKeyword && (\n                  <div className=\"row\" data-testid=\"check-all-button\" onClick={toggleAllChecked}>\n                    <BGCheckbox checked={isAllChecked} size={20} style={{ marginRight: '0.5em' }} />\n                    <div className=\"label\">{i18next.t('ëª¨ë“  ì†ì„±')}</div>\n                  </div>\n                )}\n    \n                {optionList.length > 0 && searchKeyword && (\n                  <div className=\"row\" data-testid=\"check-reg-ex-all-button\" onClick={toggleRegExAllChecked}>\n                    <BGCheckbox checked={isAllChecked} size={20} style={{ marginRight: '0.5em' }} />\n                    <div className=\"label\">{i18next.t('\"{{keyword}}\"ì„ í¬í•¨í•œ ëª¨ë“  ì†ì„±', { keyword: searchKeyword })}</div>\n                  </div>\n                )}\n    \n                {optionList.map((option) => (\n                  <div\n                    data-testid={`option-${option.value}`}\n                    className=\"row\"\n                    key={option.value}\n                    onClick={() => toggleOption(option.value)}\n                  >\n                    <BGCheckbox checked={option.checked} size={20} style={{ marginRight: '0.5em' }} />\n                    <BGTooltip title={option.value} placement=\"right\">\n                      <div className=\"label\">{option.value}</div>\n                    </BGTooltip>\n                  </div>\n                ))}\n                {isNoData && searchKeyword && (\n                  <BGEmpty title={i18next.t('\"{{keyword}}\"ë¥¼ í¬í•¨í•˜ëŠ” ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.', { keyword: searchKeyword })} />\n                )}\n                {isNoData && !searchKeyword && <BGEmpty title={i18next.t('ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.')} />}\n              </StyledModalOption>\n            </InfiniteScroll>\n            <BGButtonGroup style={{ justifyContent: 'end', margin: '10px 10px 0 0' }}>\n              <BGButton appearance=\"secondary\" label={i18next.t('ì·¨ì†Œ')} onClick={closeModal} />\n              <BGButton className=\"save-button\" label={i18next.t('í™•ì¸')} onClick={saveFilter} isDisabled={!isAnyChecked} />\n            </BGButtonGroup>\n          </StyledLayout>\n        </React.Fragment>\n      );\n    };\n    ```\n    \n- container\n    \n    ```tsx\n    // PropertyValueFilterModal2Container.tsx\n    \n    import React, { FC, useReducer, useMemo, useEffect, useCallback } from 'react';\n    import { PropertyValueFilterModal2Presenter } from './PropertyValueFilterModal2Presenter';\n    import { FilterEach, FilterRegEx } from './PropertyValueFilterModal2.interface';\n    import { useInfiniteFormattingQuery } from '../../../hooks/useCustomQuery';\n    import { EventPropertyApi } from '../../../lib/api/EventProperty';\n    import BiginStorage from '../../../services/BiginStorage';\n    import { IProductProperty } from '../ProductSelectBox/ProductSelectBox.interface';\n    import { reducer, initialState } from './PropertyValueFilterModal2.action';\n    import { useDebounce } from '../../../hooks/useDebounce';\n    \n    interface APIResult {\n      eventPropertyValues: { value: string }[];\n      more: boolean;\n    }\n    \n    interface Query {\n      application: string;\n      name: string;\n      searchText?: string;\n      notFiltered?: boolean;\n    }\n    \n    // api ê²°ê³¼ formatting\n    const formattingResult = (result: APIResult | undefined): string[] => {\n      if (!result) return [];\n      const list = result.eventPropertyValues.map((apiResultObj) => {\n        return apiResultObj.value;\n      });\n      return list;\n    };\n    \n    export interface PropertyValueFilterModal2ContainerProps {\n      initFilter: FilterEach | FilterRegEx | undefined; // ì´ˆê¸° í•„í„° ì„¸íŒ…\n      handleFilter: (createdFilter: FilterEach | FilterRegEx) => void; // ì™„ì„±ëœ í•„í„° ë°˜í™˜\n      backToModal1: () => void;\n      closeModal: () => void; // ëª¨ë‹¬ ë‹«ê¸°\n      selectedProductProperty: IProductProperty; // {id: 'event_seg_...', 'name': 'ìƒí’ˆ ì´ë¦„'}\n      notFiltered?: boolean;\n    }\n    \n    export const PropertyValueFilterModal2Container: FC<PropertyValueFilterModal2ContainerProps> = ({\n      initFilter,\n      handleFilter,\n      backToModal1,\n      closeModal,\n      selectedProductProperty,\n      notFiltered = false,\n    }: PropertyValueFilterModal2ContainerProps) => {\n      const [state, dispatch] = useReducer(reducer, initialState);\n      const debouncedSearchKeyword = useDebounce(state.searchKeyword, 1000);\n    \n      const toggleAllChecked = () => {\n        dispatch({ type: 'TOGGLE_ALL_CHECKED' });\n      };\n    \n      const toggleRegExAllChecked = () => {\n        dispatch({ type: 'TOGGLE_REG_EX_ALL_CHECKED' });\n      };\n    \n      const handleSearchKeyword = (keyword: string) => {\n        dispatch({ type: 'UPDATE_SEARCH_KEYWORD', keyword });\n      };\n    \n      const toggleOption = (value: string) => {\n        dispatch({ type: 'TOGGLE_ONE', value });\n      };\n    \n      // ======================================infinite scroll ========================================================\n      const limit = 5;\n      const projectID = useMemo(() => BiginStorage.selectedProject?.id, []);\n      const queryOptions = useMemo(\n        () => ({ enabled: Boolean(projectID), refetchOnWindowFocus: false, cacheTime: 0, retry: false }),\n        [],\n      );\n      const query = useMemo(() => {\n        const basicQuery: Query = {\n          application: projectID,\n          name: selectedProductProperty.id,\n          notFiltered,\n        };\n        const finalQuery = basicQuery;\n        if (debouncedSearchKeyword) finalQuery.searchText = debouncedSearchKeyword;\n        return finalQuery;\n      }, [projectID, debouncedSearchKeyword, selectedProductProperty.id]);\n    \n      // api ìš”ì²­\n      const { data: newPropertyValueList, isFetching, fetchNextPage, hasNextPage } = useInfiniteFormattingQuery(\n        ['propertyValueList', debouncedSearchKeyword],\n        ({ pageParam = 0 }) => {\n          return EventPropertyApi.findEventPropValue({\n            query,\n            limit,\n            skip: pageParam,\n          });\n        },\n        {\n          ...queryOptions,\n          getNextPageParam: () => {\n            return state.infiniteScrollSkip ?? false;\n          },\n        },\n        formattingResult,\n      );\n    \n      // add option list\n      useEffect(() => {\n        if (newPropertyValueList.length > 0) dispatch({ type: 'UPDATE_OPTION_LIST', list: newPropertyValueList });\n      }, [newPropertyValueList]);\n    \n      const loadMore = useCallback(() => fetchNextPage(), [fetchNextPage]);\n    \n    // ====================================== make filter result ========================================================\n      const createFilterInfo = () => {\n        // ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¡œ ì„ íƒ ì •ë³´ ì „ë‹¬\n        const isAll = state.isAllChecked && !state.searchKeyword;\n        const isRegEx = state.isAllChecked && state.searchKeyword;\n    \n        if (isAll) {\n          const createdFilterInfo: FilterEach | FilterRegEx = {\n            dimension: selectedProductProperty.id,\n            regex: '.*',\n          };\n          handleFilter(createdFilterInfo);\n        } else if (isRegEx) {\n          const createdFilterInfo: FilterEach | FilterRegEx = {\n            dimension: selectedProductProperty.id,\n            regex: state.searchKeyword,\n          };\n          // createdFilterInfo.value = productIDList\n          handleFilter(createdFilterInfo);\n        } else {\n          // ê°œë³„ ì„ íƒ\n          const createdFilterInfo: FilterEach | FilterRegEx = {\n            dimension: selectedProductProperty.id,\n            value: state.checkedPropertyValueList,\n          };\n          handleFilter(createdFilterInfo);\n        }\n      };\n    \n      // // init filter\n      useEffect(() => {\n        if (!initFilter) return;\n        if (initFilter.dimension !== selectedProductProperty.id) return;\n        dispatch({ type: 'LOAD', filter: initFilter });\n      }, [initFilter]);\n    \n      return (\n        <PropertyValueFilterModal2Presenter\n          isAllChecked={state.isAllChecked}\n          toggleAllChecked={toggleAllChecked}\n          toggleRegExAllChecked={toggleRegExAllChecked}\n          searchKeyword={state.searchKeyword}\n          handleSearchKeyword={handleSearchKeyword}\n          backToModal1={backToModal1}\n          closeModal={closeModal}\n          optionList={state.optionList}\n          toggleOption={toggleOption}\n          isFetching={isFetching}\n          infiniteNext={loadMore}\n          infiniteHasMore={!!hasNextPage}\n          infiniteSkip={state.infiniteScrollSkip}\n          selectedProductProperty={selectedProductProperty}\n          createFilterInfo={createFilterInfo}\n        />\n      );\n    };\n    ```\n    \n- action\n    \n    ```tsx\n    import { cloneDeep } from 'lodash';\n    import { FilterEach, FilterRegEx, IPropertyValue } from './PropertyValueFilterModal2.interface';\n    \n    interface State {\n      searchKeyword: string;\n      isAllChecked: boolean;\n      optionList: IPropertyValue[];\n      checkedPropertyValueList: string[];\n      infiniteScrollSkip: number;\n    }\n    \n    export const initialState: State = {\n      searchKeyword: '',\n      isAllChecked: false,\n      optionList: [],\n      checkedPropertyValueList: [],\n      infiniteScrollSkip: 0,\n    };\n    \n    interface Action {\n      type: 'RESET' | 'TOGGLE_ALL_CHECKED' | 'TOGGLE_REG_EX_ALL_CHECKED';\n    }\n    \n    interface LoadAction {\n      type: 'LOAD';\n      filter: FilterEach | FilterRegEx;\n    }\n    \n    interface UpdateKeywordAction {\n      type: 'UPDATE_SEARCH_KEYWORD';\n      keyword: string;\n    }\n    \n    interface ToggleOneAction {\n      type: 'TOGGLE_ONE';\n      value: string;\n    }\n    \n    interface AddOptionListAction {\n      type: 'UPDATE_OPTION_LIST';\n      list: string[];\n    }\n    \n    // action Functions\n    const load = (state: State, filter: FilterEach | FilterRegEx) => {\n      const newState = cloneDeep(state);\n    \n      // ì •ê·œì‹\n      if ('regex' in filter) {\n        newState.isAllChecked = true;\n        newState.searchKeyword = filter.regex === '.*' ? '' : filter.regex;\n      } else {\n        // ê°œë³„ ì„ íƒ\n        newState.isAllChecked = false;\n        if (filter.value) newState.checkedPropertyValueList = filter.value;\n      }\n    \n      return newState;\n    };\n    \n    const toggleAllChecked = (state: State) => {\n      const newState = cloneDeep(state);\n      const isChecked = !state.isAllChecked;\n      newState.isAllChecked = isChecked;\n      newState.optionList = state.optionList.map((option) => ({ ...option, checked: isChecked }));\n      if (isChecked) {\n        newState.checkedPropertyValueList = state.optionList.map((option) => option.value);\n      } else {\n        newState.checkedPropertyValueList = [];\n      }\n      return newState;\n    };\n    \n    const updateKeyword = (state: State, keyword: string) => {\n      const newState = cloneDeep(state);\n      newState.searchKeyword = keyword;\n      newState.isAllChecked = false;\n      newState.infiniteScrollSkip = 0;\n      newState.checkedPropertyValueList = [];\n      newState.optionList = [];\n      return newState;\n    };\n    \n    const toggleOne = (state: State, value: string) => {\n      const newState = cloneDeep(state);\n      const index = state.optionList.findIndex((option) => option.value === value);\n      const isChecked = !state.optionList[index].checked;\n    \n      // optionList\n      newState.optionList[index].checked = isChecked;\n    \n      // checkedPropertyValueList\n      // - add\n      if (isChecked) newState.checkedPropertyValueList.push(value);\n      else {\n        // - remove\n        const isPrevAllChecked = state.isAllChecked;\n        if (isPrevAllChecked) {\n          const allList = state.optionList.map((option) => option.value);\n          newState.checkedPropertyValueList = allList.filter((item) => item !== value);\n        } else {\n          newState.checkedPropertyValueList = state.checkedPropertyValueList.filter((item) => item !== value);\n        }\n      }\n    \n      // isAllChecked\n      if (newState.optionList.every((option) => option.checked === true)) {\n        newState.isAllChecked = true;\n      } else {\n        newState.isAllChecked = false;\n      }\n      return newState;\n    };\n    \n    const updateOptionList = (state: State, newList: string[]) => {\n      const newState = cloneDeep(state);\n      const newOptionList = newList.map((value) => {\n        const isPrevChecked = state.checkedPropertyValueList.includes(value);\n        return { value, checked: state.isAllChecked || isPrevChecked };\n      });\n      newState.optionList = newOptionList;\n      newState.infiniteScrollSkip = newOptionList.length;\n      return newState;\n    };\n    \n    // reducer\n    export const reducer = (\n      state: State,\n      action: Action | LoadAction | UpdateKeywordAction | ToggleOneAction | AddOptionListAction,\n    ): State => {\n      switch (action.type) {\n        default:\n        case 'RESET':\n          return initialState;\n        case 'LOAD':\n          return load(state, action.filter);\n        case 'TOGGLE_ALL_CHECKED':\n          return toggleAllChecked(state);\n        case 'TOGGLE_REG_EX_ALL_CHECKED':\n          return toggleAllChecked(state);\n        case 'TOGGLE_ONE':\n          return toggleOne(state, action.value);\n        case 'UPDATE_OPTION_LIST':\n          return updateOptionList(state, action.list);\n        case 'UPDATE_SEARCH_KEYWORD':\n          return updateKeyword(state, action.keyword);\n      }\n    };\n    ```\n    \n\n- <ProductSelectBox/> ì ‘ê¸°\n    \n    ```tsx\n    //action\n    \n    import { IFilterNotIn, IFilterNotMatch } from '../PropertyValueFilterModal2/PropertyValueFilterModal2.interface';\n    import { IProductProperty, productPropertyList } from './ProductSelectBox.interface';\n    \n    export interface State {\n      text: string;\n      isModal1Open: boolean;\n      isModal2Open: boolean;\n      selectedProductProperty: IProductProperty;\n    }\n    export interface Action {\n      type: 'RESET' | 'OPEN_MODAL1' | 'BACK_TO_MODAL1' | 'CLOSE';\n    }\n    export interface OpenModal2Action {\n      type: 'OPEN_MODAL2';\n      selectedProductProperty: IProductProperty;\n    }\n    export interface LoadAction {\n      type: 'LOAD';\n      propertyValueFilter: IFilterNotIn | IFilterNotMatch;\n    }\n    export const initialState: State = {\n      text: '',\n      isModal1Open: false,\n      isModal2Open: false,\n      selectedProductProperty: productPropertyList[0],\n    };\n    const getSelectBoxText = (propertyValueFilter: IFilterNotIn | IFilterNotMatch) => {\n      const selectedProductProperty =\n        productPropertyList.find((property) => property.id === propertyValueFilter.dimension) || productPropertyList[0];\n    \n      const isê°œë³„ì„ íƒ1ê°œ = propertyValueFilter.type === 'not in' && propertyValueFilter.value.length === 1;\n      const isê°œë³„ì„ íƒ2ê°œì´ìƒ = propertyValueFilter.type === 'not in' && propertyValueFilter.value.length > 1;\n      const isëª¨ë“ ì†ì„±ì„ íƒ = propertyValueFilter.type === 'notMatch' && propertyValueFilter.value === '.*';\n      const isë¬¸ìì—´í¬í•¨í•œëª¨ë“ ì†ì„±ì„ íƒ = propertyValueFilter.type === 'notMatch' && propertyValueFilter.value !== '.*';\n    \n      if (isê°œë³„ì„ íƒ1ê°œ) {\n        return `${selectedProductProperty.name}: ${propertyValueFilter.value[0]}`;\n      }\n    \n      if (isê°œë³„ì„ íƒ2ê°œì´ìƒ) {\n        return `${selectedProductProperty.name}: ${propertyValueFilter.value[0]} ì™¸ ${\n          propertyValueFilter.value.length - 1\n        }ê°œ`;\n      }\n    \n      if (isëª¨ë“ ì†ì„±ì„ íƒ) {\n        return `${selectedProductProperty.name}: ëª¨ë“  ì†ì„±`;\n      }\n    \n      if (isë¬¸ìì—´í¬í•¨í•œëª¨ë“ ì†ì„±ì„ íƒ) {\n        return `${selectedProductProperty.name}: \"${propertyValueFilter.value}\"ì„ í¬í•¨í•œ ëª¨ë“  ì†ì„±`;\n      }\n      return '';\n    };\n    const filterMapper = (state: State, propertyValueFilter: IFilterNotIn | IFilterNotMatch): State => {\n      const text = getSelectBoxText(propertyValueFilter);\n      const selectedProductProperty =\n        productPropertyList.find((property) => property.id === propertyValueFilter.dimension) || productPropertyList[0];\n      return { ...state, text, selectedProductProperty };\n    };\n    export const reducer = (state: State, action: Action | OpenModal2Action | LoadAction): State => {\n      switch (action.type) {\n        default:\n        case 'RESET':\n          return initialState;\n        case 'LOAD':\n          return filterMapper(state, action.propertyValueFilter);\n        case 'OPEN_MODAL1':\n          return { ...state, isModal1Open: true };\n        case 'OPEN_MODAL2':\n          return {\n            ...state,\n            isModal1Open: false,\n            isModal2Open: true,\n            selectedProductProperty: action.selectedProductProperty,\n          };\n        case 'BACK_TO_MODAL1':\n          return { ...state, isModal1Open: true, isModal2Open: false };\n        case 'CLOSE':\n          return { ...state, isModal1Open: false, isModal2Open: false };\n      }\n    };\n    ```\n    \n    ```tsx\n    // component\n    \n    import React, { FC, useEffect, useReducer } from 'react';\n    import { IProductProperty, productPropertyList } from './ProductSelectBox.interface';\n    import { IFilterNotIn, IFilterNotMatch } from '../PropertyValueFilterModal2/PropertyValueFilterModal2.interface';\n    import { PropertyValueFilterModal2Container } from '../PropertyValueFilterModal2/PropertyValueFilterModal2Container';\n    import { StyledSelectBox, StyledModalLayout, StyledRow } from './ProductSelectBox.style';\n    import { FontIcon } from '../../FontIcon/FontIcon';\n    import { Backdrop } from '../../Backdrop/Backdrop';\n    import { reducer, initialState } from './ProductSelectBox.action';\n    \n    export interface ProductSelectBoxProps {\n      propertyValueFilter: IFilterNotIn | IFilterNotMatch | undefined;\n      handlePropertyValueFilter: (createdFilter: IFilterNotIn | IFilterNotMatch) => void; // ì™„ì„±ëœ í•„í„° ë°˜í™˜\n    }\n    export const ProductSelectBox: FC<ProductSelectBoxProps> = ({\n      propertyValueFilter,\n      handlePropertyValueFilter,\n    }: ProductSelectBoxProps) => {\n      const [state, dispatch] = useReducer(reducer, initialState);\n    \n      const openModal1 = () => {\n        dispatch({ type: 'OPEN_MODAL1' });\n      };\n    \n      const backToModal1 = () => {\n        dispatch({ type: 'BACK_TO_MODAL1' });\n      };\n    \n      const closeModal = () => {\n        dispatch({ type: 'CLOSE' });\n      };\n    \n      const openModal2 = (property: IProductProperty) => {\n        dispatch({ type: 'OPEN_MODAL2', selectedProductProperty: property });\n      };\n    \n      useEffect(() => {\n        if (!propertyValueFilter) return;\n        dispatch({ type: 'LOAD', propertyValueFilter });\n      }, [propertyValueFilter]);\n    \n      return (\n        <div style={{ position: 'relative' }}>\n          <StyledSelectBox onClick={openModal1}>\n            <div className=\"text\">{state.text || state.selectedProductProperty.name}</div>\n            <FontIcon name=\"ic-arrow-down\" size=\"20px\" />\n          </StyledSelectBox>\n          {state.isModal1Open && (\n            <React.Fragment>\n              <Backdrop handleClick={closeModal} />\n              <StyledModalLayout>\n                <StyledRow notHover onClick={closeModal}>\n                  <div className=\"text\">{state.text || state.selectedProductProperty.name}</div>\n                  <FontIcon name=\"ic-arrow-up\" size=\"20px\" />\n                </StyledRow>\n                {productPropertyList.map((property) => (\n                  <StyledRow\n                    key={property.id}\n                    selected={state.selectedProductProperty.id === property.id}\n                    onClick={() => openModal2(property)}\n                  >\n                    {property.name}\n                  </StyledRow>\n                ))}\n              </StyledModalLayout>\n            </React.Fragment>\n          )}\n    \n          {state.isModal2Open && (\n            <PropertyValueFilterModal2Container\n              initFilter={propertyValueFilter}\n              backToModal1={backToModal1}\n              closeModal={closeModal}\n              handleFilter={handlePropertyValueFilter}\n              selectedProductProperty={state.selectedProductProperty}\n            />\n          )}\n        </div>\n      );\n    };\n    ```"},{"id":1641913200,"title":"Reactì™€ Recoilì„ ì‚¬ìš©í•´ íŠœí† ë¦¬ì–¼ì„ ë§Œë“¤ì–´ë³´ì","author":"jangky000","desc":"ì²˜ìŒ í˜ì´ì§€ì— ë°©ë¬¸í•œ ì‚¬ëŒì´ ë³µì¡í•œ ì†”ë£¨ì…˜ ì„œë¹„ìŠ¤ë¥¼ ì²˜ìŒë¶€í„° ì˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì–´ë µê¸° ë•Œë¬¸ì— ë§ì€ ì„œë¹„ìŠ¤ì—ì„œëŠ” íŠœí† ë¦¬ì–¼ì„ ì œê³µí•œë‹¤. Recoilì„ ì‚¬ìš©í•˜ì—¬ ì›¹ì‚¬ì´íŠ¸ì˜ íŠœí† ë¦¬ì–¼ ìŠ¤í…ê³¼ ë¬¸êµ¬, ê·¸ë¦¬ê³  í•´ë‹¹ ì˜ì—­ í¬ì»¤ì‹±ì„ ê´€ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•œë‹¤.","date":"2022.01.12","content":"\n# ê¸°íš ë‚´ìš©\n\n- ì „ë‹¬ ë°›ì€ íŠœí† ë¦¬ì–¼ ë‚´ìš©\n    - íŠ¹ì´ ì‚¬í•­: í¬ì»¤ìŠ¤ê°€ ë³€í•˜ì§€ ì•Šì•„ë„, íŒì˜¤ë²„ ì„¤ëª… í…ìŠ¤íŠ¸ê°€ ë³€í•  ìˆ˜ ìˆë‹¤. (í¬ì»¤ìŠ¤ ê°œìˆ˜  â‰¤ íŠœí† ë¦¬ì–¼ ê°œìˆ˜)\n    \n    ![1](https://user-images.githubusercontent.com/46799722/149144274-e7ecc1f0-786d-45bd-9ea9-d8c7151090fe.png)\n    \n\n- ì²« í™”ë©´\n    \n    ![2](https://user-images.githubusercontent.com/46799722/149144272-f16aa2de-6095-4397-981d-63c9100d245c.png)\n    \n\n- ë‹¤ìŒ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„¤ëª…ì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ì´ë™í•˜ë©° í¬ì»¤ì‹±\n    \n    ![3](https://user-images.githubusercontent.com/46799722/149144263-e3b5c3ee-d8dc-4b18-a040-6fa3171ae81a.png)\n    \n    ![4](https://user-images.githubusercontent.com/46799722/149144251-71981a02-f214-45d6-a979-ee91feb5e2a9.png)\n    \n\n- ì ‘ê¸° > PopOverë¥¼ ì ‘ê³  FAB ì‚¬ì´ì¦ˆê°€ ì¤„ì–´ë“¦\n    \n    ![5](https://user-images.githubusercontent.com/46799722/149144269-fbda31a6-4741-4ef9-8fcd-234edb27bc31.png)\n    \n\n# ì „ì—­ ìƒíƒœ ê´€ë¦¬\n\n- atom & selector\n    \n    ```tsx\n    import { atom, selector } from 'recoil';\n    import { tutorialHelperText } from '@/components/Demo/TutorialHelper/TutorialHelper.data';\n    import { TutorialNode } from '@/components/Demo/TutorialHelper/TutorialNode';\n    import { TutorialMenu } from '@/components/Demo/TutorialHelper/TutorialHelper.interface';\n    \n    interface DemoTutorialState {\n      isDemo: boolean;\n      isExpired: boolean;\n      isEmailVerified: boolean;\n      isFolded: boolean;\n      tutorialNode: TutorialNode | null;\n    }\n    \n    const isDemo = JSON.parse(sessionStorage.getItem('isDemo') || 'false') as boolean;\n    \n    export const demoTutorialState = atom<DemoTutorialState>({\n      key: 'demoGuideState',\n      default: {\n        isDemo,\n        isExpired: false,\n        isEmailVerified: false,\n        isFolded: false,\n        tutorialNode: null,\n      },\n    });\n    \n    interface TutorialHelperState {\n      menu: TutorialMenu | null;\n      title: string | null;\n      subTitle: string | null;\n      desc: string | null;\n      tutorialStep: number;\n      totalStep: number;\n      prev: TutorialNode | null;\n      next: TutorialNode | null;\n    }\n    \n    export const demoTutorialStateSelector = selector({\n      key: 'demoGuideStateSelector',\n      get: ({ get }) => {\n        const { tutorialNode } = get(demoTutorialState);\n    \n        if (tutorialNode === null)\n          return {\n            menu: null,\n            title: null,\n            subTitle: null,\n            desc: null,\n            tutorialStep: 0,\n            totalStep: 0,\n            prev: null,\n            next: null,\n          };\n    \n        const {\n          info: { menu, tutorialStep },\n          prev,\n          next,\n        } = tutorialNode;\n        const { title, step } = tutorialHelperText[menu];\n        const { subTitle, desc } = step[tutorialStep];\n        const totalStep = tutorialHelperText[menu].step.length;\n        const derivedState = {\n          menu,\n          title,\n          subTitle: subTitle || null,\n          desc,\n          tutorialStep,\n          totalStep,\n          prev,\n          next,\n        };\n        return derivedState as TutorialHelperState;\n      },\n    });\n    ```\n    \n- íŠœí† ë¦¬ì–¼ ë‚´ìš© ê´€ë¦¬\n    - ì–‘ë°©í–¥ ì—°ê²° ë¦¬ìŠ¤íŠ¸ë¡œ íŠœí† ë¦¬ì–¼ì˜ ë‚´ìš© ì—°ê²° ìˆœì„œ ê´€ë¦¬\n    - íŠœí† ë¦¬ì–¼ ì•ˆë‚´ ë¬¸êµ¬ ê´€ë¦¬\n    \n    ```tsx\n    import { TutorialLinkedList } from './TutorialLinkedList';\n    import { TutorialHelperText } from './TutorialHelper.interface';\n    \n    //íŠœí† ë¦¬ì–¼ ì•ˆë‚´ ë¬¸êµ¬\n    export const tutorialHelperText: TutorialHelperText = {\n      Automation: {\n        title: 'ìë™í™”',\n        step: [\n          {\n            desc:\n              'ë‚´ ì‚¬ì´íŠ¸ì˜ í¼ë„, íŒë§¤ í˜„í™©ì„ íŒŒì•…í•˜ê³  ê° í¼ë„ ë‹¨ê³„ë³„ë¡œ ê³ ê°ê·¸ë£¹ì„ ë¶„ë¥˜í•˜ì—¬ ìº í˜ì¸ì„ ë¹ ë¥´ê²Œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'í¼ë„ í˜„í™©',\n            desc:\n              'ë°©ë¬¸ë¶€í„° ê²°ì œê¹Œì§€ ê° í¼ë„ ë‹¨ê³„ë³„ ì „í™˜ê³¼ ì´íƒˆ ìˆ˜ì¹˜ë¥¼ í™•ì¸í•˜ê³ , ì´íƒˆê³ ê°ì„ ë¶™ì¡ê¸° ìœ„í•œ ì¶”ì²œ ìº í˜ì¸ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'í¼ë„ í˜„í™©-ì£¼ìš”ê´€ë¦¬í•„ìš”êµ¬ê°„',\n            desc: 'ì´íƒˆ ìˆ˜ì¹˜ê°€ ê°€ì¥ ë†’ì€ í¼ë„ì˜ ê³ ê°ì„ í™•ì¸í•˜ê±°ë‚˜ ì¶”ì²œ ìº í˜ì¸ì„ ë°”ë¡œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'ìº í˜ì¸ ì„±ê³¼',\n            desc: 'ë¹…ì¸ì„ í†µí•´ ì§„í–‰í•œ ìº í˜ì¸ ì„±ê³¼ë¥¼ ìœ í˜•ë³„ë¡œ ìš”ì•½í•˜ì—¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'êµ¬ë§¤ í˜„í™©',\n            desc: 'ì‚¬ì´íŠ¸ì˜ êµ¬ë§¤ ì „í™˜ ë¶„ì„ ë°ì´í„°ì™€ ìƒí’ˆ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n        ],\n      },\n      CampaignList: {\n        title: 'ìº í˜ì¸',\n        step: [\n          {\n            desc: 'ê³ ê° í–‰ë™ ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ íƒ€ê²ŸíŒ… í•˜ì—¬ ì‚¬ì´íŠ¸ ë‚´ì—ì„œ ë˜ëŠ” ë©”ì‹ ì €ë¥¼ í†µí•´ ìë™í™” ìº í˜ì¸ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'ìº í˜ì¸ ì‹œì‘í•˜ê¸° ë²„íŠ¼ - ìº í˜ì¸ ì¢…ë¥˜ ì„ íƒ ë ˆì´ì–´',\n            desc: 'íŒì—…, í† ìŠ¤íŠ¸ë¥¼ í™œìš©í•´ ì›¹ ì‚¬ì´íŠ¸ ë‚´ì—ì„œ ì˜¨ì‚¬ì´íŠ¸ ìº í˜ì¸ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'ìº í˜ì¸ ì‹œì‘í•˜ê¸° ë²„íŠ¼ - ìº í˜ì¸ ì¢…ë¥˜ ì„ íƒ ë ˆì´ì–´',\n            desc: 'ì¹´ì¹´ì˜¤ ì¹œêµ¬í†¡/ì•Œë¦¼í†¡, SMS ë¥¼ í™œìš© í•´ ì˜¤í”„ì‚¬ì´íŠ¸ ìº í˜ì¸ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'ìº í˜ì¸ ë¦¬ìŠ¤íŠ¸',\n            desc: 'ìº í˜ì¸ë“¤ì˜ ì§„í–‰ ìƒí™©ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n        ],\n      },\n      SegmentSmartList: {\n        title: 'ìŠ¤ë§ˆíŠ¸ ê·¸ë£¹',\n        step: [\n          {\n            desc:\n              'ë°©ë¬¸, êµ¬ë§¤ì´ë ¥ ë“±ì˜ ìˆ˜ì§‘ ë°ì´í„°ë¥¼ í†µí•´ ë¹…ì¸ì˜ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë¶„ì„í•œ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ì…ë‹ˆë‹¤. SDK ë¥¼ ì„¤ì¹˜í•˜ë©´ 2ì£¼ ë’¤ì— í™œì„±í™” ë©ë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'ìŠ¤ë§ˆíŠ¸ê·¸ë£¹ ë¦¬ìŠ¤íŠ¸',\n            desc:\n              'ë¦¬ìŠ¤íŠ¸ì˜ ê³ ê° ê·¸ë£¹ì„ ì„ íƒí•˜ë©´ í•´ë‹¹í•˜ëŠ” ê³ ê° ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ë°ì´í„°ê°€ ì¶©ë¶„í•˜ì§€ ì•Šìœ¼ë©´ í•´ë‹¹ ì„¸ê·¸ë¨¼íŠ¸ì— ê³ ê° ë¦¬ìŠ¤íŠ¸ê°€ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n        ],\n      },\n      SegmentManualList: {\n        title: 'ê³ ê° ë¶„ë¥˜',\n        step: [\n          {\n            desc: 'CRM, ë§ˆì¼€íŒ… ëª©ì ì— ë§ëŠ” ê³ ê° ê·¸ë£¹ì„ ì§ì ‘ ë§Œë“¤ì–´ ìº í˜ì¸ì— í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'ê¸°ë³¸',\n            desc:\n              'ë§ˆì¼€í„°ë“¤ì´ ë§ì´ ê¶ê¸ˆí•´í•˜ëŠ” ê³ ê° ëª©ë¡ì´ ê¸°ë³¸ìœ¼ë¡œ ì œê³µ ë©ë‹ˆë‹¤. ë³„ë„ì˜ ì¡°ê±´ ì„¤ì • ì—†ì´ ë¹ ë¥´ê²Œ ê³ ê°ëª©ë¡ì„ í™•ì¸í•˜ê³  ìº í˜ì¸ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'ë§ì¶¤',\n            desc: 'ë¹…ì¸ ì‚¬ìš©ìê°€ ì§ì ‘ ì¡°ê±´ì„ ì„¤ì •í•´ ìƒì„±í•œ ê³ ê° ê·¸ë£¹ ì…ë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'ìƒˆ ê³ ê° ê·¸ë£¹ ìƒì„±',\n            desc: 'ë§ì¶¤ ê³ ê° ê·¸ë£¹ì„ ìƒì„±í•˜ëŠ” í™”ë©´ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n        ],\n      },\n      ReportList: {\n        title: 'ë³´ê³ ì„œ',\n        step: [\n          {\n            desc:\n              'ë¹…ì¸ SDK ë¡œ ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” í˜•íƒœë¡œ ë³´ê³ ì„œë¥¼ ë§Œë“¤ê³ , ê³ ê°ì˜ í–‰ë™ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'ë³´ê³ ì„œ ë§Œë“¤ê¸° - ì´ë²¤íŠ¸',\n            desc: 'ì´ë²¤íŠ¸ ë³´ê³ ì„œë¥¼ í†µí•´ ë§ˆì¼€í„°ê°€ ì§ì ‘ ë¶„ì„í•˜ê³ ì í•˜ëŠ” ì¡°ê±´ì„ ì„¤ì •í•˜ì—¬ ë³´ê³ ì„œë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'ë³´ê³ ì„œ ë§Œë“¤ê¸° - ë¼ì´ë¸Œ',\n            desc: 'ì‚¬ì´íŠ¸ì—ì„œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n          {\n            subTitle: 'ë³´ê³ ì„œ ë§Œë“¤ê¸° - ê³ ê° íƒìƒ‰',\n            desc: 'ì‚¬ìš©ìê°€ ìƒì„±í•œ ê³ ê° ê·¸ë£¹ì— í•´ë‹¹í•˜ëŠ” ê³ ê° ëª©ë¡ì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\n          },\n        ],\n      },\n    };\n    \n    \n    //íŠœí† ë¦¬ì–¼ ìˆœì„œ ì„¤ì • ì—°ê²° ë¦¬ìŠ¤íŠ¸ ìƒì„±\n    export const TutorialAutomationList = new TutorialLinkedList();\n    tutorialHelperText.Automation.step.forEach((_, index) =>\n      TutorialAutomationList.add({ menu: 'Automation', tutorialStep: index }),\n    );\n    export const TutorialCampaignList = new TutorialLinkedList();\n    tutorialHelperText.CampaignList.step.forEach((_, index) =>\n      TutorialCampaignList.add({ menu: 'CampaignList', tutorialStep: index }),\n    );\n    export const TutorialSegmentSmartList = new TutorialLinkedList();\n    tutorialHelperText.SegmentSmartList.step.forEach((_, index) =>\n      TutorialSegmentSmartList.add({ menu: 'SegmentSmartList', tutorialStep: index }),\n    );\n    export const TutorialSegmentManualList = new TutorialLinkedList();\n    tutorialHelperText.SegmentManualList.step.forEach((_, index) =>\n      TutorialSegmentManualList.add({ menu: 'SegmentManualList', tutorialStep: index }),\n    );\n    export const TutorialReportList = new TutorialLinkedList();\n    tutorialHelperText.ReportList.step.forEach((_, index) =>\n      TutorialReportList.add({ menu: 'ReportList', tutorialStep: index }),\n    );\n    ```\n    \n    - ì¸í„°í˜ì´ìŠ¤, ë…¸ë“œ, ì—°ê²°ë¦¬ìŠ¤íŠ¸ ë³´ê¸°\n        \n        ```tsx\n        // TutorialHelper.interface.ts\n        \n        export type TutorialMenu = 'Automation' | 'CampaignList' | 'SegmentSmartList' | 'SegmentManualList' | 'ReportList';\n        \n        export type TutorialHelperText = {\n          [key in TutorialMenu]: {\n            title: string;\n            step: Array<{\n              subTitle?: string;\n              desc: string;\n            }>;\n          };\n        };\n        \n        export interface TutorialInfo {\n          menu: TutorialMenu;\n          tutorialStep: number;\n        }\n        ```\n        \n        ```tsx\n        // TutorialNode.ts\n        \n        import { TutorialInfo } from './TutorialHelper.interface';\n        \n        export class TutorialNode {\n          info: TutorialInfo;\n        \n          prev: TutorialNode | null;\n        \n          next: TutorialNode | null;\n        \n          constructor(info: TutorialInfo) {\n            this.info = info;\n            this.prev = null;\n            this.next = null;\n          }\n        }\n        ```\n        \n        ```tsx\n        // TutorialLinkedList.ts\n        \n        import { TutorialInfo } from './TutorialHelper.interface';\n        import { TutorialNode } from './TutorialNode';\n        \n        export class TutorialLinkedList {\n          public head: TutorialNode | null = null;\n        \n          tail: TutorialNode | null = null;\n        \n          constructor(headInfo?: TutorialInfo) {\n            if (headInfo) this.init(headInfo);\n          }\n        \n          init(headInfo: TutorialInfo): void {\n            this.head = new TutorialNode(headInfo);\n            this.tail = this.head;\n          }\n        \n          add(newInfo: TutorialInfo): void {\n            if (this.tail === null) this.init(newInfo);\n            else {\n              const newNode = new TutorialNode(newInfo);\n              newNode.prev = this.tail;\n              this.tail.next = newNode;\n              this.tail = newNode;\n            }\n          }\n        }\n        ```\n        \n\n# í¬ì»¤ìŠ¤ ì»´í¬ë„ŒíŠ¸\n\n- í¬ì»¤ìŠ¤\n    \n    ```tsx\n    import React, { FC, useMemo, useEffect, useRef } from 'react';\n    import { useRecoilValue } from 'recoil';\n    import { isEqual } from 'lodash';\n    import { demoTutorialState } from '../../../recoil/DemoTutorialState';\n    import { TutorialMenu } from '../TutorialHelper/TutorialHelper.interface';\n    import { StyledLayout } from './TutorialFocus.style';\n    \n    export interface FocusTarget {\n      menu: TutorialMenu;\n      tutorialStep: number;\n    }\n    \n    const isMatch = (propTarget: FocusTarget | FocusTarget[], recoilInfo: FocusTarget) => {\n      if (Array.isArray(propTarget)) return propTarget.some((target) => isEqual(target, recoilInfo));\n      return isEqual(propTarget, recoilInfo);\n    };\n    export interface TutorialFocusProps {\n      focusTarget: FocusTarget | FocusTarget[];\n      style?: React.CSSProperties;\n      children: React.ReactNode;\n    }\n    export const TutorialFocus: FC<TutorialFocusProps> = ({ focusTarget, style, children }: TutorialFocusProps) => {\n      const ref = useRef<HTMLDivElement>(null);\n      const { tutorialNode, isFolded } = useRecoilValue(demoTutorialState);\n    \n      const isFocusOn = useMemo(() => {\n        if (isFolded) return false;\n        if (tutorialNode === null) return false;\n        const { info } = tutorialNode;\n        return isMatch(focusTarget, info);\n      }, [isFolded, tutorialNode]);\n    \n      useEffect(() => {\n        if (isFocusOn) ref.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }, [isFocusOn]);\n    \n      return (\n        <StyledLayout isFocusOn={isFocusOn} style={style} ref={ref}>\n          {isFocusOn && <span className=\"dot\" />}\n          {children}\n        </StyledLayout>\n      );\n    };\n    ```\n    \n    - ìŠ¤íƒ€ì¼\n        \n        ```tsx\n        // TutorialFocus.style.tsx\n        \n        import { keyframes } from '@emotion/react';\n        import styled from '@emotion/styled';\n        \n        const pulse = keyframes`\n          0% {\n            transform: scale(1);\n          }\n        \n          70% {\n            opacity: 0;\n          }\n        \n          100% {\n            transform: scale(2);\n            opacity: 0;\n          }\n        `;\n        \n        export const StyledLayout = styled.div<{ isFocusOn: boolean }>`\n          label: tutorial-focus-layout;\n        \n          ${({ isFocusOn, theme }) =>\n            isFocusOn &&\n            `\n          border-radius: 8px;\n          border: solid 1px ${theme.colors.primary};\n          position: relative;\n          `}\n          \n          .dot {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 12px;\n            height: 12px;\n            background-color: ${({ theme }) => theme.colors.primary};\n            border-radius: 50%;\n            transform: translate(-50%, -50%);\n            z-index: 1;\n        \n            :before {\n              content: '';\n              position: absolute;\n              left: 0;\n              right: 0;\n              top: 0;\n              bottom: 0;\n              background-color: ${({ theme }) => theme.colors.primary};\n              border-radius: 50%;\n              animation: ${pulse} 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;\n            }\n        `;\n        ```\n        \n\n# íŠœí† ë¦¬ì–¼ FAB ì»´í¬ë„ŒíŠ¸\n\n- Tutorial FAB & PopOver\n    \n    ```tsx\n    // TutorialHelper.tsx\n    ...\n    import { useRecoilValue, useSetRecoilState } from 'recoil';\n    import { demoTutorialState, demoTutorialStateSelector } from '../../../recoil/DemoTutorialState';\n    ...\n    \n    export const TutorialHelper: FC = () => {\n      const i18next = useTranslation();\n    \n      const { title, subTitle, desc, prev, next } = useRecoilValue(demoTutorialStateSelector);\n      const { isDemo, isFolded } = useRecoilValue(demoTutorialState);\n      const setDemoTutorial = useSetRecoilState(demoTutorialState);\n    \n      const openPopOver = () => setDemoTutorial((curVal) => ({ ...curVal, isFolded: false }));\n      const closePopOver = () => setDemoTutorial((curVal) => ({ ...curVal, isFolded: true }));\n    \n      const toPrevTutorial = () => {\n        if (prev !== null) setDemoTutorial((currVal) => ({ ...currVal, tutorialNode: prev }));\n      };\n      const toNextTutorial = () => {\n        if (next !== null) setDemoTutorial((currVal) => ({ ...currVal, tutorialNode: next }));\n      };\n    \n      const List: FC<{ href: string; children: React.ReactNode }> = ({\n        href,\n        children,\n      }: {\n        href: string;\n        children: React.ReactNode;\n      }) => {\n        return (\n          <React.Fragment>\n            <StyledList\n              onClick={() => {\n                window.open(href, '_blank');\n              }}\n            >\n              <div className=\"children\">{children}</div>\n              <FontIcon name=\"ic-arrow-right\" size=\"16px\" />\n            </StyledList>\n          </React.Fragment>\n        );\n      };\n      return isDemo && title && desc ? (\n        <StyledLayout>\n          {!isFolded && (\n            <React.Fragment>\n              <StyledUpperPopOver>\n                <div className=\"title\">{i18next.t('ë°”ë¡œê°€ê¸°')}</div>\n    \n                <ul className=\"menu-list\">\n                  <List href=\"https://bigin.io/contact\">\n                    <span role=\"img\" aria-label=\"\">\n                      ğŸ’Œ\n                    </span>\n                    <span>{i18next.t('ìƒë‹´ ì‹ ì²­í•˜ê¸°')}</span>\n                  </List>\n    \n                  <List href=\"https://docs.google.com/forms/d/e/1FAIpQLScH1ZlWpgqPtcTS0RWHxGxOsUO_4cCYiBFdgxfh6SWEIZgEBA/viewform\">\n                    <span role=\"img\" aria-label=\"\">\n                      ğŸ‘©â€ğŸ’»\n                    </span>\n                    <span>{i18next.t('ë¹„ëŒ€ë©´ ì˜¤ë¦¬ì—”í…Œì´ì…˜ ë“£ê¸°')}</span>\n                    <BGTooltip\n                      title={\n                        i18next.t(\n                          'bigin ì˜¤ë¦¬ì—”í…Œì´ì…˜ì€ biginì„ í†µí•´ í™œìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„° í•­ëª©, ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³ ê°ì„ ë¶„ë¥˜í•˜ëŠ” ì„¸ ê°€ì§€ ë°©ë²•, CRM ë§ˆì¼€íŒ… í™œìš© ì‚¬ë¡€ë¥¼ ê³µìœ í•˜ê³  ê°„ëµí•œ bigin ëŒ€ì‹œë³´ë“œ ì‹œì—°í•©ë‹ˆë‹¤.',\n                        ) || ''\n                      }\n                    >\n                      <div className=\"tip\">\n                        <FontIcon name=\"ic-info\" size=\"16px\" />\n                      </div>\n                    </BGTooltip>\n                  </List>\n                </ul>\n              </StyledUpperPopOver>\n    \n              {title && desc && (\n                <StyledPopOver>\n                  <div className=\"border-box\">\n                    <div className=\"title\">{subTitle ? `${title}: ${subTitle}` : title}</div>\n                    <div className=\"desc\">{desc}</div>\n                  </div>\n    \n                  <div className=\"bottom\">\n                    <button type=\"button\" className=\"close\" onClick={closePopOver}>\n                      ì ‘ê¸°\n                    </button>\n    \n                    <BGButtonGroup>\n                      {prev !== null && (\n                        <BGButton appearance=\"secondary\" onClick={toPrevTutorial}>\n                          <FontIcon name=\"ic-arrow-left\" size=\"20px\" />\n                        </BGButton>\n                      )}\n    \n                      {next !== null && (\n                        <BGButton onClick={toNextTutorial}>\n                          <FontIcon name=\"ic-arrow-right\" size=\"20px\" />\n                        </BGButton>\n                      )}\n                    </BGButtonGroup>\n                  </div>\n                </StyledPopOver>\n              )}\n            </React.Fragment>\n          )}\n    \n          {/* button */}\n          <StyledFAB type=\"button\" active={!isFolded} onClick={isFolded ? openPopOver : closePopOver}>\n            <img\n              src={isFolded ? '/assets/img/demo/logo-symbol-white.svg' : '/assets/img/demo/img-tutorial-helper.svg'}\n              alt=\"tutorial helper\"\n            />\n          </StyledFAB>\n        </StyledLayout>\n      ) : (\n        <React.Fragment />\n      );\n    };\n    ```\n    \n    - ìŠ¤íƒ€ì¼\n        \n        ```tsx\n        // TutorialHelper.style.tsx\n        \n        import { keyframes, css } from '@emotion/react';\n        import styled from '@emotion/styled';\n        \n        const borderRadiusBig = 12;\n        const borderRadiusSmall = 8;\n        \n        const pulse = keyframes`\n          0% {\n            transform: scale(1);\n          }\n        \n          70% {\n            opacity: 0;\n          }\n        \n          100% {\n            transform: scale(1.2);\n            opacity: 0;\n          }\n        `;\n        \n        export const StyledLayout = styled.div`\n          label: tutorial-helper-layout;\n        \n          box-sizing: border-box;\n        \n          position: fixed;\n          right: 30px;\n          bottom: 30px;\n          z-index: 99;\n          display: flex;\n          flex-direction: column;\n          align-items: flex-end;\n        `;\n        \n        export const StyledUpperPopOver = styled.div`\n          label: tutorial-helper-upper-pop-over;\n        \n          box-sizing: border-box;\n        \n          width: 320px;\n          padding: 9px 12px;\n          border-radius: ${borderRadiusBig}px;\n          background-color: #000a29;\n        \n          .title {\n            font-size: 14px;\n            font-weight: bold;\n            line-height: 1.43;\n            color: #e3e5eb;\n            margin-bottom: 8px;\n          }\n        \n          .menu-list {\n            list-style: none;\n            margin: 0;\n            padding: 0;\n          }\n        `;\n        \n        export const StyledList = styled.li`\n          label: upper-pop-over-list;\n        \n          box-sizing: border-box;\n          list-style: none;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 6px 10px;\n          border-radius: ${borderRadiusSmall}px;\n          border: solid 1px #2b4289;\n          font-size: 14px;\n          font-weight: normal;\n          line-height: 1.71;\n          color: #e4e4e4;\n        \n          :hover {\n            cursor: pointer;\n          }\n        \n          :not(:last-child) {\n            margin-bottom: 8px;\n          }\n        \n          .children {\n            display: flex;\n        \n            span[role='img'] {\n              margin-right: 10px;\n            }\n        \n            .tip {\n              margin-left: 3px;\n              display: flex;\n              align-items: center;\n            }\n          }\n        `;\n        \n        export const StyledPopOver = styled.div`\n          label: tutorial-helper-pop-over;\n        \n          box-sizing: border-box;\n        \n          width: 320px;\n          margin-top: 5px;\n          padding: 8px 8px 12px;\n          border-radius: ${borderRadiusBig}px;\n          background-color: #000a29;\n          position: relative;\n        \n          :before {\n            content: '';\n            position: absolute;\n            right: 40px;\n            bottom: -16px;\n            width: 0;\n            height: 0;\n            border-top: 16px solid black;\n            border-left: 16px solid transparent;\n          }\n        \n          .border-box {\n            border-radius: ${borderRadiusSmall}px;\n            border: solid 1px #2b4289;\n            padding: 12px;\n            margin-bottom: 18px;\n        \n            .title {\n              font-size: 16px;\n              font-weight: bold;\n              line-height: 1.5;\n              color: #fff;\n              margin-bottom: 12px;\n            }\n        \n            .desc {\n              font-size: 14px;\n              font-weight: normal;\n              line-height: 1.71;\n              color: #d8d8d8;\n            }\n          }\n        \n          .bottom {\n            display: flex;\n            justify-content: space-between;\n        \n            .close {\n              border: 0;\n              outline: 0;\n              background-color: transparent;\n              font-size: 16px;\n              font-weight: normal;\n              line-height: normal;\n              color: #abb3c2;\n        \n              :hover {\n                cursor: pointer;\n                font-weight: bold;\n                text-decoration: underline;\n              }\n            }\n        \n            .bg-button {\n              padding: 8px;\n            }\n          }\n        `;\n        \n        export const StyledFAB = styled.button<{ active?: boolean }>`\n          label: tutorial-helper-fab;\n        \n          all: unset;\n        \n          display: flex;\n          justify-content: center;\n          align-items: center;\n          position: relative;\n          transition: width 1s ease, height 1s ease;\n        \n          :hover {\n            cursor: pointer;\n          }\n        \n          ${({ active, theme }) => {\n            if (active)\n              return css`\n                background-color: ${theme.colors.primary};\n                margin-top: 30px;\n                border-radius: ${borderRadiusBig}px;\n                width: 80px;\n                height: 80px;\n        \n                &:before {\n                  content: '';\n                  position: absolute;\n                  left: 0;\n                  top: 0;\n                  right: 0;\n                  bottom: 0;\n                  border-radius: ${borderRadiusBig}px;\n                  transform: scale(1);\n                  border: 1px solid ${theme.colors.primary};\n                  animation: ${pulse} 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;\n                }\n        \n                &:after {\n                  content: '';\n                  position: absolute;\n                  left: 0;\n                  top: 0;\n                  right: 0;\n                  bottom: 0;\n                  border-radius: ${borderRadiusBig}px;\n                  transform: scale(1);\n                  border: 1px solid ${theme.colors.primary};\n                  animation: ${pulse} 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;\n                  animation-delay: 0.2s;\n                }\n        \n                img {\n                  width: 100%;\n                  height: auto;\n                }\n              `;\n        \n            return css`\n              background-color: #000a29;\n              width: 48px;\n              height: 48px;\n              border-radius: ${borderRadiusSmall}px;\n        \n              img {\n                width: 45%;\n                height: auto;\n              }\n            `;\n          }}\n        `;\n        ```\n        \n\n# ì‚¬ìš©\n\n- /demo ë¼ìš°í„°ë¡œ ë“¤ì–´ì™”ì„ ë•Œ, ë°ëª¨ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í•œ í›„ isDemo ì—…ë°ì´íŠ¸\n    \n    ```tsx\n    \n    demoLoginPromise.then((res)=>{\n    \t...\n    \tsetDemoTutorial((prev) => ({ ...prev, isDemo: true }));\n    \t...\n    })\n    ```\n    \n- íŠœí† ë¦¬ì–¼ FAB + íŒì˜¤ë²„\n    \n    ```tsx\n    // ìµœìƒë‹¨ ì»´í¬ë„ŒíŠ¸ì— ì¶”ê°€\n    <TutorialHelper />\n    ```\n    \n- í˜ì´ì§€ ì‹œì‘ ë¶€ë¶„ì—ì„œ ì´ˆê¸°í™”\n\n```tsx\n// /pages/Automation.tsx\n\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\nimport { demoTutorialState } from '@/recoil/DemoTutorialState';\nimport { TutorialAutomationList } from '@/components/Demo/TutorialHelper/TutorialHelper.data';\n\nexport const Automation = (): ReactElement => {\n\t...\n  const { isDemo } = useRecoilValue(demoTutorialState);\n  const setDemoTutorial = useSetRecoilState(demoTutorialState);\n\n\t...\n\n  useEffect(() => {\n    if (isDemo) setDemoTutorial((curVal) => ({ ...curVal, tutorialNode: TutorialAutomationList.head }));\n    return () => {\n      if (isDemo) setDemoTutorial((curVal) => ({ ...curVal, tutorialNode: null }));\n    };\n  }, [isDemo]);\n\n\t...\n\n  return (\n    <BGPage className=\"container-section\" direction=\"column\" css={[baseCss]}>\n      ...\n    </BGPage>\n  );\n};\n```\n\n- í¬ì»¤ìŠ¤ ì„¤ì •\n    - demoTutorialStateì˜ menuê°€ â€œAutomationâ€ì´ê³  focusStepì´ 1ì´ë©´ í¬ì»¤ì‹±ì´ í™œì„±í™”ëœë‹¤.\n\n```tsx\n<TutorialFocus focusTarget={{ menu: 'Automation', tutorialStep: 3 }}>\n  <BorderSection>\n    ...\n  </BorderSection> \n</TutorialFocus>\n```\n\n```tsx\n<TutorialFocus\n  focusTarget={[\n    { menu: 'Automation', tutorialStep: 3 },\n    { menu: 'CampaignList', tutorialStep: 2 },\n  ]}\n>\n  <BorderSection>\n    ...\n  </BorderSection>\n</TutorialFocus>\n```"},{"id":1635951600,"title":"Reactì—ì„œ HOCë¡œ ê³µí†µ ë¡œì§ì„ ë¬¶ì–´ì„œ ê´€ë¦¬í•´ë³´ì(+ Custom hook)","author":"jangky000","desc":"React ê³µì‹ ë¬¸ì„œì—ì„œ classí˜•ìœ¼ë¡œ êµ¬í˜„ëœ ì˜ˆì œë§Œ ìˆëŠ” HOCë¥¼ êµ³ì´ í•¨ìˆ˜í˜•ìœ¼ë¡œ êµ¬í˜„/ì ìš©í•´ë³´ê³  ëŠë‚€ Custom hookì˜ ì†Œì¤‘í•¨ì— ëŒ€í•´ ì´ì•¼ê¸°í•´ë³¸ë‹¤.","date":"2021.11.04","content":"\n# ìƒí™© #1\n\nReact í”„ë¡œì íŠ¸ì— 4ê°œì˜ ìƒˆë¡œìš´ í˜ì´ì§€ë¥¼ ì¶”ê°€í•˜ëŠ” íƒœìŠ¤í¬ë¥¼ ë§¡ê²Œ ë˜ì—ˆë‹¤. \n\nì•„ë˜ì™€ ê°™ì´ 4ê°œì˜ í˜ì´ì§€ë¥¼ ì œì‘í•´ì•¼ í•œë‹¤ê³  í•˜ì, 4ê°œì˜ í˜ì´ì§€ì—ëŠ” ê³µí†µì ìœ¼ë¡œ ë‚ ì§œë¥¼ ì„ íƒí•  ìˆ˜ ìˆëŠ” Calendar Selectorê°€ ìˆê³ , ì´ ì…€ë ‰í„°ì—ëŠ” ì‚¬ìš©ìì— ë”°ë¼ **ì„ íƒ ê°€ëŠ¥í•œ ê¸°ê°„**ê³¼ **ê¸°ë³¸ ì„¤ì • ê¸°ê°„** ì •ë³´ê°€ í•„ìš”í•˜ë‹¤.\n- **ì„ íƒ ê°€ëŠ¥í•œ ê¸°ê°„**ì€ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ ì „ì—­ ìƒíƒœë¡œ ê´€ë¦¬ë˜ê³  ìˆëŠ” ë°ì´í„°ë‹¤.\n- **ê¸°ë³¸ ì„¤ì • ê¸°ê°„** ì—­ì‹œ ì „ì—­ ìƒíƒœ ë°ì´í„°ë‹¤.\n- ê°ê°ì˜ í˜ì´ì§€ëŠ” Calendar Selectorì—ì„œ ì„ íƒí•œ ê¸°ê°„ì— ë”°ë¼ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ ì¶œë ¥í•´ì•¼ í•œë‹¤.\n\n<div style=\"display: grid;grid-template-columns: repeat(2, 1fr);grid-column-gap: 20px;grid-row-gap: 20px;\">\n    <img src=\"https://user-images.githubusercontent.com/46799722/140294319-00c25762-be33-4452-93ad-b9ffec94b290.png\" style=\"width:100%;\"/>\n    <img src=\"https://user-images.githubusercontent.com/46799722/140294330-2092adfa-5527-4b24-a23b-2c75838e98f7.png\" style=\"width:100%;\"/>\n    <img src=\"https://user-images.githubusercontent.com/46799722/140294336-21ddcf01-228d-4ff0-b74c-4148139496cc.png\" style=\"width:100%;\"/>\n    <img src=\"https://user-images.githubusercontent.com/46799722/140294339-c4061391-c5a0-47ab-b619-4a34e8a11ec8.png\" style=\"width:100%;\"/>\n</div>\n\n# ì½”ë“œì˜ ì¬ì‚¬ìš©\n\n*ì „ì—­ ìƒíƒœ ê´€ë¦¬ ìŠ¤í† ì–´ì—ì„œ **ì„ íƒ ê°€ëŠ¥í•œ ê¸°ê°„**ê³¼ **ê¸°ë³¸ ì„¤ì • ê¸°ê°„**ì„ ê°€ì ¸ì™€ ë°ì´í„°ë¥¼ ê²€ì¦ì„ í•œ ë’¤ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤, 4ê°œì˜ í˜ì´ì§€ì—ì„œ ë˜‘ê°™ì´.*\n\n**ì„ íƒ ê°€ëŠ¥í•œ ê¸°ê°„**ê³¼, **ê¸°ë³¸ ì„¤ì • ê¸°ê°„** ì •ë„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë°, ì´ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê² ë‹¤ê³  ê²°ì‹¬í•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- ìœ ì§€ ë³´ìˆ˜í•  ë•Œ, ë³µì‚¬ ë¶™ì—¬ë„£ê¸° ë˜ì–´ ìˆëŠ” 4ê°œì˜ ì†ŒìŠ¤ë¥¼ í•˜ë‚˜ì”© ì°¾ì•„ ê³ ì¹˜ê³  ì‹¶ì§€ ì•Šë‹¤.\n- ê°ê°ì˜ í˜ì´ì§€ì—ì„œ ìµœëŒ€í•œ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ëŠ” ë¡œì§ì„ ì œê±°í•˜ê³ , Viewë¥¼ ê·¸ë¦¬ëŠ” ì—­í• ì—ë§Œ ì§‘ì¤‘í•˜ê³  ì‹¶ë‹¤.\n\n# ë¦¬ì•¡íŠ¸ì—ì„œ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•\n\n- Util ì„± ìˆœìˆ˜ í•¨ìˆ˜\n- Composition\n- Render Props\n- HOC\n- Custom Hook\n\n# ì´ì¤‘ HOCë¥¼ ì„ íƒí•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- Util ì„± ìˆœìˆ˜í•¨ìˆ˜ëŠ” ì „ì—­ ìƒíƒœ ê´€ë¦¬ ìŠ¤í† ì–´ ê°’ì„ í™œìš© í•  ìˆ˜ ì—†ë‹¤.(ìˆœìˆ˜ í•¨ìˆ˜ ì •ì˜ì— ìœ„ë°°)\n- Compositionì€, Render PropsëŠ” JSX Element í˜•íƒœë¡œ ì‚¬ìš©í•˜ì—¬ ë™ì ìœ¼ë¡œ ë¬´ì—‡ì„ ê·¸ë¦´ì§€ì— ì´ˆì ì´ ìˆëŠ” ëŠë‚Œì´ë‹¤.\n- í•˜ì§€ë§Œ ë‚´ê²Œ í•„ìš”í•œ ê¸°ëŠ¥ì€ ë‹¨ìˆœíˆ ì „ì—­ ìƒíƒœ ê´€ë¦¬ ìŠ¤í† ì–´ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥ì´ë‹¤.\n- <s>ì„ íƒì§€ê°€ ì•„ì§ ë‘ ê°œê°€ ë‚¨ì•˜ì§€ë§Œ ë‚´ê²Œ ê°€ì¥ ë‚¯ì„  HOCë¥¼ ì‚¬ìš©í•´ë³´ê³  ì‹¶ì—ˆë‹¤.</s>\n\n# HOC(Higher Order Component): ê³ ì°¨í•¨ìˆ˜\n\n> ê³ ì°¨ ì»´í¬ë„ŒíŠ¸(HOC, Higher Order Component)ëŠ” ì»´í¬ë„ŒíŠ¸ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•œ Reactì˜ ê³ ê¸‰ ê¸°ìˆ ì´ë‹¤. ê³ ì°¨ ì»´í¬ë„ŒíŠ¸(HOC)ëŠ” React APIì˜ ì¼ë¶€ê°€ ì•„ë‹ˆë©°, Reactì˜ êµ¬ì„±ì  íŠ¹ì„±ì—ì„œ ë‚˜ì˜¤ëŠ” íŒ¨í„´ì´ë‹¤. ([ì°¸ê³ ](https://ko.reactjs.org/docs/higher-order-components.html))\n\n> *\"íš¡ë‹¨ ê´€ì‹¬ì‚¬(Cross-Cutting Concerns)ì— ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\"*\n\nì´ ì„¤ëª…ì„ ë³´ê³  JAVAì˜ AOPê°€ ë– ì˜¬ëë‹¤. ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¡œì§ì„ íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¡œ ë³´ì•„ í•˜ë‚˜ë¡œ ë¬¶ì–´ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.\n\n## HOCëŠ”\n\n- ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¸ìë¡œ ë°›ì•„ì„œ ë‹¤ë¥¸ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜\n- ì»´í¬ë„ŒíŠ¸ì— íŠ¹ì • ê¸°ëŠ¥ì„ ë¶€ì—¬í•œë‹¤.\n- íŠ¹ì •í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œ í›„ ì¸ìë¡œ ë°›ì€ ì»´í¬ë„ŒíŠ¸ì— ë°ì´í„°ë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ë„ ìˆë‹¤.\n\n\n# ì–´ë– í•œ ê²½ìš°ì— HOCë¥¼ ì‚¬ìš©í• ê¹Œ?\n\n- ë¡œë”©, ì—ëŸ¬, ë°ì´í„° ìš”ì²­ ë“± ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¡œì§ì„ ì»´í¬ë„ŒíŠ¸ ë°”ê¹¥ìœ¼ë¡œ ë¶„ë¦¬í•  ë•Œ ê³ ë ¤ë  ìˆ˜ ìˆë‹¤.\n\n# Functionalí•˜ê²Œ HOC ì‚¬ìš©í•˜ê¸°\n\n- React ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œëŠ” class í˜•íƒœë¡œ HOCë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œê°€ ë‚˜ì™€ ìˆì§€ë§Œ, ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ì—ì„œ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë¡œ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, í•¨ìˆ˜ì˜ í˜•íƒœë¡œ HOCë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì¡°ì‚¬í–ˆë‹¤.\n\n# ì‚¬ìš© ì˜ˆì œ\n\n````typescript\n// HOC í•¨ìˆ˜: withCalendarDateRange\nimport React, { FC, useMemo } from 'react';\nimport moment from 'moment';\nimport { useDataStore } from './context/Store';\nimport { DateRange } from './Calendar';\n\nexport interface CalendarDateRangeProps {\n  selectableDateRange: DateRange;\n  initSelectedDateRange: DateRange;\n}\n\ninterface WrapperProps extends CalendarDateRangeProps {\n  [props: string]: unknown;\n}\n\nexport const withCalendarDateRange = <OriginProps,>(WrappedComponent: FC<WrapperProps>): FC<OriginProps> => {\n  const WrapperComponent = (props?: OriginProps) => {\n    const { projectStore } = useDataStore();\n\n    const selectableDateRange = useMemo(() => {\n      const dateRange = projectStore.date.selectable\n      // ê²€ì¦ ë¡œì§...\n      return dateRange;\n    }, []);\n\n    const initSelectedDateRange = useMemo(() => {\n      const dateRange = projectStore.date.init\n      // ê²€ì¦ ë¡œì§...\n      return dateRange;\n    }, []);\n\n    return (\n      <WrappedComponent\n        {...props}\n        selectableDateRange={selectableDateRange}\n        initSelectedDateRange={initSelectedDateRange}\n      />\n    );\n  };\n  WrapperComponent.displayName = WrappedComponent.displayName || WrappedComponent.name || 'CalendarDateRangeWrapper';\n  return WrapperComponent;\n};\n````\n\n````typescript\n// ê³µí†µ ë¡œì§ì„ ì¶”ê°€í•  ì»´í¬ë„ŒíŠ¸: WrappedVisitStatus\n// Propsë¥¼ í†µí•´ selectableDateRange, initSelectedDateRange ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤.\nimport React, { useState } from 'react';\nimport { Calendar, DateRange } from './Calendar';\nimport { withCalendarDateRange, CalendarDateRangeProps } from './HOC/withCalendarDateRange';\n\ntype WrappedVisitStatusProps = CalendarDateRangeProps;\n\nconst WrappedVisitStatus = ({ selectableDateRange, initSelectedDateRange }: WrappedVisitStatusProps) => {\n  const [dateRange, setDateRange] = useState<DateRange>();\n  const handleDateRange = (changedDateRange: DateRange) => setDateRange(changedDateRange);\n\n  return (\n    <StyledLayout>\n      <StyledTitleWrapper>\n        <StyledTitle>ë°©ë¬¸ í˜„í™©</StyledTitle>\n        <Calendar\n          selectableRange={selectableDateRange}\n          initDateRange={initSelectedDateRange}\n          dateHandle={handleDateRange}\n        />\n      </StyledTitleWrapper>\n    </StyledLayout>\n  );\n};\n\n// HOCë¥¼ í†µí•´ ìº˜ë¦°ë” ë°ì´í„° Props ì‚½ì…\nexport const VisitStatus = withCalendarDateRange(WrappedVisitStatus);\n````\n\n````typescript\n// ê³µí†µ ë¡œì§ì´ ì¶”ê°€ëœ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©: Dashboard\nimport React, { FC, useState } from 'react';\nimport { BGTab, ITab } from './components/BGTab';\nimport { TopNavBar } from './components/TopNavBar';\nimport { Container } from './Dashboard.style';\nimport { tabList } from './Dashboard.data';\nimport { BorderSection } from './components/BorderSection';\nimport { VisitStatus } from './components/VisitStatus';\n\ninterface IUseTab {\n  selectedTab: ITab;\n  handleTab: (tab: ITab) => void;\n}\nexport const useTab = (defaultTab: ITab): IUseTab => {\n  const [selectedTab, setTab] = useState<ITab>(defaultTab);\n  const handleTab = (tab: ITab) => {\n    setTab(tab);\n  };\n  return { selectedTab, handleTab };\n};\n\nexport const Dashboard: FC = () => {\n  const { selectedTab, handleTab } = useTab(tabList[0]);\n\n  return (\n    <Container>\n      <TopNavBar title=\"CRM ëŒ€ì‹œë³´ë“œ\" style={{ border: 0 }} />\n      <BGTab tabList={tabList} selectedTab={selectedTab} handleTab={handleTab} />\n      <BorderSection style={{ marginTop: '32px', borderRadius: '8px' }}>\n        {selectedTab.key === 'visitStatus' && <VisitStatus />}\n      </BorderSection>\n    </Container>\n  );\n};\n\n````\n\n# ì¢€ ë” ê°„ë‹¨í•œ ì½”ë“œ\n\n````javascript\n// HOC\nexport const withHOC = WrappedComponent => {\n  const NewComponent = async (props) => {\n    // ê³µí†µ ë¡œì§\n    const { newData } = await fetchNewDate(); // newData = 'Higher Order Component'\n    return (\n        <WrappedComponent {...props} data={newData} />\n      );\n  }\n  NewComponent.displayName = 'NewComponent'\n  return NewComponent;\n}\n````\n\n````javascript\n// ê³µí†µ ë¡œì§ì„ ì¶”ê°€í•  ì»´í¬ë„ŒíŠ¸\nimport { withHOC } from 'withHOC.tsx'\nconst WrappedComponent = ({text, data})=>{\n    // nameì€ PageComponentì—ì„œ propsë¡œ ë„˜ê²¨ì¤€ ë°ì´í„°\n    // dataëŠ” HOCì— ì˜í•´ propsì— ì¶”ê°€ëœ\n    return (\n        <div>\n            <div>{text}</div>\n            <div>{data}</div>\n        </div>\n    );\n}\nexport const MyComponent = withHOC(WrappedComponent)\n````\n\n````javascript\nimport { MyComponent } from 'MyComponent.tsx'\n// ê³µí†µ ë¡œì§ì´ ì¶”ê°€ëœ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©\nconst PageComponentì—ì„œ = ()=>{\n    return <MyComponent text={'HOC'}/>\n}\n````\n````\nê²°ê³¼ í™”ë©´:\n\nHOC\nHigher Order Component\n````\n\n# ê·¸ëŸ°ë°,\n\nì–´ì°Œì €ì°Œ HOCë¥¼ ì‚¬ìš©í•´ë³´ê³  ì‹¶ì€ ì§€ì ì¸ ìš•ì‹¬ì€ í’€ì—ˆìœ¼ë‚˜ HOCì˜ ë‹¨ì ë“¤ì´ ëˆˆì— ë“¤ì–´ì˜¤ê¸° ì‹œì‘í–ˆë‹¤.\n\n- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤ë©´, íƒ€ì…ì„ ë§ì¶”ê¸°ë„ ì–´ë ¤ìš¸ ë¿ë”ëŸ¬, ì½ê¸°ë„ ì–´ë µë‹¤.\n\n````typescript\nexport interface CalendarDateRangeProps {\n  selectableDateRange: DateRange;\n  initSelectedDateRange: DateRange;\n}\n\ninterface WrapperProps extends CalendarDateRangeProps {\n  [props: string]: unknown;\n}\n\nexport const withCalendarDateRange = <OriginProps,>(WrappedComponent: FC<WrapperProps>): FC<OriginProps> => {\n  const WrapperComponent = (props?: OriginProps) => {\n    ...\n````\n\n- ì—¬ëŸ¬ HOCë¥¼ í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•´ì•¼ í•  ê²½ìš°ê°€ ìƒê¸´ë‹¤ë©´, `withA(withB(withC(MyComponent)))` ì²˜ëŸ¼ í•¨ìˆ˜ í˜¸ì¶œ Depthê°€ ê¹Šì–´ì§„ë‹¤(Nesting).\n\n# ë‚˜ëŠ” í‰ì†Œ Hooksë¥¼ ì†Œì¤‘íˆ ì—¬ê¸°ì§€ ì•Šì•˜ì§€\n\ní•„ìëŠ” ë¦¬ì•¡íŠ¸ë¥¼ ì²˜ìŒ ì‹œì‘í•  ë•Œë¶€í„° í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì™€ ë¦¬ì•¡íŠ¸ Hooksë¥¼ ì‚¬ìš©í•´ì™”ê¸° ë•Œë¬¸ì— Hooksì˜ í¸ë¦¬í•¨ì„ ì˜ ëª°ëë‹¤. [ë¦¬ì•¡íŠ¸ HooksëŠ” ëŒ€ë¶€ë¶„ì˜ HOCì™€ Render Propsë¥¼ ëŒ€ì²´ ê°€ëŠ¥í•˜ë©°, ë” ê°„ë‹¨í•˜ê³  ë¦¬ì•¡íŠ¸ ê°€ìƒ DOM Treeì˜ Nestingì„ ì¤„ì—¬ì¤€ë‹¤.](https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components)\në‹¤ìŒê³¼ ê°™ì´ Custom Hookì„ ì‚¬ìš©í•˜ì—¬ í•´ê²°ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n````typescript\n// useCalendarDateRange.ts\nconst useCalendarDateRange = ()=>{\n  const { projectStore } = useDataStore();\n\n    const selectableDateRange = useMemo(() => {\n      const dateRange = projectStore.date.selectable\n      // ê²€ì¦ ë¡œì§...\n      return dateRange;\n    }, []);\n\n    const initSelectedDateRange = useMemo(() => {\n      const dateRange = projectStore.date.init\n      // ê²€ì¦ ë¡œì§...\n      return dateRange;\n    }, []);\n  return {selectableDateRange, initSelectedDateRange}\n}\n````\n\n````typescript\n// ê³µí†µ ë¡œì§ì„ ì¶”ê°€í•  ì»´í¬ë„ŒíŠ¸: VisitStatus\n// Propsë¥¼ í†µí•´ì„œê°€ ì•„ë‹Œ useCalendarDateRange()ë¥¼ í˜¸ì¶œí•´ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤.\nimport React, { useState } from 'react';\nimport { Calendar, DateRange } from './Calendar';\nimport { useCalendarDateRange } from './hooks/useCalendarDateRange';\n\nexport const VisitStatus = () => {\n  const [dateRange, setDateRange] = useState<DateRange>();\n  const handleDateRange = (changedDateRange: DateRange) => setDateRange(changedDateRange);\n  const {selectableDateRange, initSelectedDateRange} = useCalendarDateRange();\n\n  return (\n    <StyledLayout>\n      <StyledTitleWrapper>\n        <StyledTitle>ë°©ë¬¸ í˜„í™©</StyledTitle>\n        <Calendar\n          selectableRange={selectableDateRange}\n          initDateRange={initSelectedDateRange}\n          dateHandle={handleDateRange}\n        />\n      </StyledTitleWrapper>\n    </StyledLayout>\n  );\n};\n````\n\n# ê²°ë¡ \n\n- HOCëŠ” í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì™€ ë¦¬ì•¡íŠ¸ Hooksê°€ ë‚˜ì˜¤ê¸° ì´ì „ë¶€í„° Class Component ê°œë°œì—ì„œ ë¦¬ì•¡íŠ¸ Life Cycleì— ì¢…ì†ì ì´ì§€ ì•Šì€ ì¤‘ë³µëœ ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ì—ˆë‹¤. (ê·¸ë˜ì„œ ê³µì‹ í™ˆí˜ì´ì§€ì— í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ì–´ì§„ HOC ì˜ˆì œê°€ ìˆë‚˜ë³´ë‹¤.)\n- HOCëŠ” í´ë˜ìŠ¤í˜•, ê·¸ë¦¬ê³  í•¨ìˆ˜í˜• ëª¨ë‘ì— ì ìš©í•  ìˆ˜ ìˆì–´, ë ˆê±°ì‹œì™€ ëª¨ë˜í•œ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ì—ì„œ ì—°ê²° ë‹¤ë¦¬ì²˜ëŸ¼ ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. \n- í˜„ì¬ëŠ” ë¦¬ì•¡íŠ¸ Hooksë¥¼ ì‚¬ìš©í•´ Custom Hookì„ ë§Œë“¤ì–´ HOCë¥¼ ëŒ€ë¶€ë¶„ ëŒ€ì²´í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë ‡ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ê°„ë‹¨í•˜ê³  ì§ê´€ì ì´ë‹¤.\n- ê·¸ëŸ¬ë‹ˆ ë‹¤ì‹œ ì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•˜ëŸ¬ ê°€ì•¼ê² ë‹¤.\n\n# ì°¸ê³ \n- [https://ko.reactjs.org/docs/higher-order-components.html](https://ko.reactjs.org/docs/higher-order-components.html)\n- [https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components](https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components)\n- [https://velog.io/@yeonseo07/%EB%AA%A8%EB%8B%AC%EC%9D%84-%EB%A7%8C%EB%93%A4%EB%8B%A4-%EC%83%9D%EA%B8%B4-%EC%9D%BC](https://velog.io/@yeonseo07/%EB%AA%A8%EB%8B%AC%EC%9D%84-%EB%A7%8C%EB%93%A4%EB%8B%A4-%EC%83%9D%EA%B8%B4-%EC%9D%BC)\n- [https://yceffort.kr/2020/10/react-hooks-and-hocs](https://yceffort.kr/2020/10/react-hooks-and-hocs)"},{"id":1635778800,"title":"ì²« ê²Œì‹œê¸€","author":"jangky000","desc":"ì²« ê²Œì‹œê¸€ì…ë‹ˆë‹¤.","date":"2021.11.02","content":"\nNextJS í”„ë ˆì„ì›Œí¬ë¡œ ë§Œë“  Markdown ë¸”ë¡œê·¸ì…ë‹ˆë‹¤."}]