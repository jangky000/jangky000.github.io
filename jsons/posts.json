[{"id":1641913200,"title":"Reactì™€ Recoilì„ ì‚¬ìš©í•´ íŠœí† ë¦¬ì–¼ì„ ë§Œë“¤ì–´ë³´ì\r","author":"jangky000\r","date":"2022.01.12\r","content":"\r\n# ê¸°íš ë‚´ìš©\r\n\r\n- ì „ë‹¬ ë°›ì€ íŠœí† ë¦¬ì–¼ ë‚´ìš©\r\n    - íŠ¹ì´ ì‚¬í•­: í¬ì»¤ìŠ¤ê°€ ë³€í•˜ì§€ ì•Šì•„ë„, íŒì˜¤ë²„ ì„¤ëª… í…ìŠ¤íŠ¸ê°€ ë³€í•  ìˆ˜ ìˆë‹¤. (í¬ì»¤ìŠ¤ ê°œìˆ˜  â‰¤ íŠœí† ë¦¬ì–¼ ê°œìˆ˜)\r\n    \r\n    ![1](https://user-images.githubusercontent.com/46799722/149144274-e7ecc1f0-786d-45bd-9ea9-d8c7151090fe.png)\r\n    \r\n\r\n- ì²« í™”ë©´\r\n    \r\n    ![2](https://user-images.githubusercontent.com/46799722/149144272-f16aa2de-6095-4397-981d-63c9100d245c.png)\r\n    \r\n\r\n- ë‹¤ìŒ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„¤ëª…ì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ì´ë™í•˜ë©° í¬ì»¤ì‹±\r\n    \r\n    ![3](https://user-images.githubusercontent.com/46799722/149144263-e3b5c3ee-d8dc-4b18-a040-6fa3171ae81a.png)\r\n    \r\n    ![4](https://user-images.githubusercontent.com/46799722/149144251-71981a02-f214-45d6-a979-ee91feb5e2a9.png)\r\n    \r\n\r\n- ì ‘ê¸° > PopOverë¥¼ ì ‘ê³  FAB ì‚¬ì´ì¦ˆê°€ ì¤„ì–´ë“¦\r\n    \r\n    ![5](https://user-images.githubusercontent.com/46799722/149144269-fbda31a6-4741-4ef9-8fcd-234edb27bc31.png)\r\n    \r\n\r\n# ì „ì—­ ìƒíƒœ ê´€ë¦¬\r\n\r\n- atom & selector\r\n    \r\n    ```tsx\r\n    import { atom, selector } from 'recoil';\r\n    import { tutorialHelperText } from '@/components/Demo/TutorialHelper/TutorialHelper.data';\r\n    import { TutorialNode } from '@/components/Demo/TutorialHelper/TutorialNode';\r\n    import { TutorialMenu } from '@/components/Demo/TutorialHelper/TutorialHelper.interface';\r\n    \r\n    interface DemoTutorialState {\r\n      isDemo: boolean;\r\n      isExpired: boolean;\r\n      isEmailVerified: boolean;\r\n      isFolded: boolean;\r\n      tutorialNode: TutorialNode | null;\r\n    }\r\n    \r\n    const isDemo = JSON.parse(sessionStorage.getItem('isDemo') || 'false') as boolean;\r\n    \r\n    export const demoTutorialState = atom<DemoTutorialState>({\r\n      key: 'demoGuideState',\r\n      default: {\r\n        isDemo,\r\n        isExpired: false,\r\n        isEmailVerified: false,\r\n        isFolded: false,\r\n        tutorialNode: null,\r\n      },\r\n    });\r\n    \r\n    interface TutorialHelperState {\r\n      menu: TutorialMenu | null;\r\n      title: string | null;\r\n      subTitle: string | null;\r\n      desc: string | null;\r\n      tutorialStep: number;\r\n      totalStep: number;\r\n      prev: TutorialNode | null;\r\n      next: TutorialNode | null;\r\n    }\r\n    \r\n    export const demoTutorialStateSelector = selector({\r\n      key: 'demoGuideStateSelector',\r\n      get: ({ get }) => {\r\n        const { tutorialNode } = get(demoTutorialState);\r\n    \r\n        if (tutorialNode === null)\r\n          return {\r\n            menu: null,\r\n            title: null,\r\n            subTitle: null,\r\n            desc: null,\r\n            tutorialStep: 0,\r\n            totalStep: 0,\r\n            prev: null,\r\n            next: null,\r\n          };\r\n    \r\n        const {\r\n          info: { menu, tutorialStep },\r\n          prev,\r\n          next,\r\n        } = tutorialNode;\r\n        const { title, step } = tutorialHelperText[menu];\r\n        const { subTitle, desc } = step[tutorialStep];\r\n        const totalStep = tutorialHelperText[menu].step.length;\r\n        const derivedState = {\r\n          menu,\r\n          title,\r\n          subTitle: subTitle || null,\r\n          desc,\r\n          tutorialStep,\r\n          totalStep,\r\n          prev,\r\n          next,\r\n        };\r\n        return derivedState as TutorialHelperState;\r\n      },\r\n    });\r\n    ```\r\n    \r\n- íŠœí† ë¦¬ì–¼ ë‚´ìš© ê´€ë¦¬\r\n    - ì–‘ë°©í–¥ ì—°ê²° ë¦¬ìŠ¤íŠ¸ë¡œ íŠœí† ë¦¬ì–¼ì˜ ë‚´ìš© ì—°ê²° ìˆœì„œ ê´€ë¦¬\r\n    - íŠœí† ë¦¬ì–¼ ì•ˆë‚´ ë¬¸êµ¬ ê´€ë¦¬\r\n    \r\n    ```tsx\r\n    import { TutorialLinkedList } from './TutorialLinkedList';\r\n    import { TutorialHelperText } from './TutorialHelper.interface';\r\n    \r\n    //íŠœí† ë¦¬ì–¼ ì•ˆë‚´ ë¬¸êµ¬\r\n    export const tutorialHelperText: TutorialHelperText = {\r\n      Automation: {\r\n        title: 'ìë™í™”',\r\n        step: [\r\n          {\r\n            desc:\r\n              'ë‚´ ì‚¬ì´íŠ¸ì˜ í¼ë„, íŒë§¤ í˜„í™©ì„ íŒŒì•…í•˜ê³  ê° í¼ë„ ë‹¨ê³„ë³„ë¡œ ê³ ê°ê·¸ë£¹ì„ ë¶„ë¥˜í•˜ì—¬ ìº í˜ì¸ì„ ë¹ ë¥´ê²Œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'í¼ë„ í˜„í™©',\r\n            desc:\r\n              'ë°©ë¬¸ë¶€í„° ê²°ì œê¹Œì§€ ê° í¼ë„ ë‹¨ê³„ë³„ ì „í™˜ê³¼ ì´íƒˆ ìˆ˜ì¹˜ë¥¼ í™•ì¸í•˜ê³ , ì´íƒˆê³ ê°ì„ ë¶™ì¡ê¸° ìœ„í•œ ì¶”ì²œ ìº í˜ì¸ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'í¼ë„ í˜„í™©-ì£¼ìš”ê´€ë¦¬í•„ìš”êµ¬ê°„',\r\n            desc: 'ì´íƒˆ ìˆ˜ì¹˜ê°€ ê°€ì¥ ë†’ì€ í¼ë„ì˜ ê³ ê°ì„ í™•ì¸í•˜ê±°ë‚˜ ì¶”ì²œ ìº í˜ì¸ì„ ë°”ë¡œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'ìº í˜ì¸ ì„±ê³¼',\r\n            desc: 'ë¹…ì¸ì„ í†µí•´ ì§„í–‰í•œ ìº í˜ì¸ ì„±ê³¼ë¥¼ ìœ í˜•ë³„ë¡œ ìš”ì•½í•˜ì—¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'êµ¬ë§¤ í˜„í™©',\r\n            desc: 'ì‚¬ì´íŠ¸ì˜ êµ¬ë§¤ ì „í™˜ ë¶„ì„ ë°ì´í„°ì™€ ìƒí’ˆ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n        ],\r\n      },\r\n      CampaignList: {\r\n        title: 'ìº í˜ì¸',\r\n        step: [\r\n          {\r\n            desc: 'ê³ ê° í–‰ë™ ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ íƒ€ê²ŸíŒ… í•˜ì—¬ ì‚¬ì´íŠ¸ ë‚´ì—ì„œ ë˜ëŠ” ë©”ì‹ ì €ë¥¼ í†µí•´ ìë™í™” ìº í˜ì¸ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'ìº í˜ì¸ ì‹œì‘í•˜ê¸° ë²„íŠ¼ - ìº í˜ì¸ ì¢…ë¥˜ ì„ íƒ ë ˆì´ì–´',\r\n            desc: 'íŒì—…, í† ìŠ¤íŠ¸ë¥¼ í™œìš©í•´ ì›¹ ì‚¬ì´íŠ¸ ë‚´ì—ì„œ ì˜¨ì‚¬ì´íŠ¸ ìº í˜ì¸ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'ìº í˜ì¸ ì‹œì‘í•˜ê¸° ë²„íŠ¼ - ìº í˜ì¸ ì¢…ë¥˜ ì„ íƒ ë ˆì´ì–´',\r\n            desc: 'ì¹´ì¹´ì˜¤ ì¹œêµ¬í†¡/ì•Œë¦¼í†¡, SMS ë¥¼ í™œìš© í•´ ì˜¤í”„ì‚¬ì´íŠ¸ ìº í˜ì¸ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'ìº í˜ì¸ ë¦¬ìŠ¤íŠ¸',\r\n            desc: 'ìº í˜ì¸ë“¤ì˜ ì§„í–‰ ìƒí™©ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n        ],\r\n      },\r\n      SegmentSmartList: {\r\n        title: 'ìŠ¤ë§ˆíŠ¸ ê·¸ë£¹',\r\n        step: [\r\n          {\r\n            desc:\r\n              'ë°©ë¬¸, êµ¬ë§¤ì´ë ¥ ë“±ì˜ ìˆ˜ì§‘ ë°ì´í„°ë¥¼ í†µí•´ ë¹…ì¸ì˜ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë¶„ì„í•œ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ì…ë‹ˆë‹¤. SDK ë¥¼ ì„¤ì¹˜í•˜ë©´ 2ì£¼ ë’¤ì— í™œì„±í™” ë©ë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'ìŠ¤ë§ˆíŠ¸ê·¸ë£¹ ë¦¬ìŠ¤íŠ¸',\r\n            desc:\r\n              'ë¦¬ìŠ¤íŠ¸ì˜ ê³ ê° ê·¸ë£¹ì„ ì„ íƒí•˜ë©´ í•´ë‹¹í•˜ëŠ” ê³ ê° ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ë°ì´í„°ê°€ ì¶©ë¶„í•˜ì§€ ì•Šìœ¼ë©´ í•´ë‹¹ ì„¸ê·¸ë¨¼íŠ¸ì— ê³ ê° ë¦¬ìŠ¤íŠ¸ê°€ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n        ],\r\n      },\r\n      SegmentManualList: {\r\n        title: 'ê³ ê° ë¶„ë¥˜',\r\n        step: [\r\n          {\r\n            desc: 'CRM, ë§ˆì¼€íŒ… ëª©ì ì— ë§ëŠ” ê³ ê° ê·¸ë£¹ì„ ì§ì ‘ ë§Œë“¤ì–´ ìº í˜ì¸ì— í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'ê¸°ë³¸',\r\n            desc:\r\n              'ë§ˆì¼€í„°ë“¤ì´ ë§ì´ ê¶ê¸ˆí•´í•˜ëŠ” ê³ ê° ëª©ë¡ì´ ê¸°ë³¸ìœ¼ë¡œ ì œê³µ ë©ë‹ˆë‹¤. ë³„ë„ì˜ ì¡°ê±´ ì„¤ì • ì—†ì´ ë¹ ë¥´ê²Œ ê³ ê°ëª©ë¡ì„ í™•ì¸í•˜ê³  ìº í˜ì¸ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'ë§ì¶¤',\r\n            desc: 'ë¹…ì¸ ì‚¬ìš©ìê°€ ì§ì ‘ ì¡°ê±´ì„ ì„¤ì •í•´ ìƒì„±í•œ ê³ ê° ê·¸ë£¹ ì…ë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'ìƒˆ ê³ ê° ê·¸ë£¹ ìƒì„±',\r\n            desc: 'ë§ì¶¤ ê³ ê° ê·¸ë£¹ì„ ìƒì„±í•˜ëŠ” í™”ë©´ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n        ],\r\n      },\r\n      ReportList: {\r\n        title: 'ë³´ê³ ì„œ',\r\n        step: [\r\n          {\r\n            desc:\r\n              'ë¹…ì¸ SDK ë¡œ ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” í˜•íƒœë¡œ ë³´ê³ ì„œë¥¼ ë§Œë“¤ê³ , ê³ ê°ì˜ í–‰ë™ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'ë³´ê³ ì„œ ë§Œë“¤ê¸° - ì´ë²¤íŠ¸',\r\n            desc: 'ì´ë²¤íŠ¸ ë³´ê³ ì„œë¥¼ í†µí•´ ë§ˆì¼€í„°ê°€ ì§ì ‘ ë¶„ì„í•˜ê³ ì í•˜ëŠ” ì¡°ê±´ì„ ì„¤ì •í•˜ì—¬ ë³´ê³ ì„œë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'ë³´ê³ ì„œ ë§Œë“¤ê¸° - ë¼ì´ë¸Œ',\r\n            desc: 'ì‚¬ì´íŠ¸ì—ì„œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n          {\r\n            subTitle: 'ë³´ê³ ì„œ ë§Œë“¤ê¸° - ê³ ê° íƒìƒ‰',\r\n            desc: 'ì‚¬ìš©ìê°€ ìƒì„±í•œ ê³ ê° ê·¸ë£¹ì— í•´ë‹¹í•˜ëŠ” ê³ ê° ëª©ë¡ì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',\r\n          },\r\n        ],\r\n      },\r\n    };\r\n    \r\n    \r\n    //íŠœí† ë¦¬ì–¼ ìˆœì„œ ì„¤ì • ì—°ê²° ë¦¬ìŠ¤íŠ¸ ìƒì„±\r\n    export const TutorialAutomationList = new TutorialLinkedList();\r\n    tutorialHelperText.Automation.step.forEach((_, index) =>\r\n      TutorialAutomationList.add({ menu: 'Automation', tutorialStep: index }),\r\n    );\r\n    export const TutorialCampaignList = new TutorialLinkedList();\r\n    tutorialHelperText.CampaignList.step.forEach((_, index) =>\r\n      TutorialCampaignList.add({ menu: 'CampaignList', tutorialStep: index }),\r\n    );\r\n    export const TutorialSegmentSmartList = new TutorialLinkedList();\r\n    tutorialHelperText.SegmentSmartList.step.forEach((_, index) =>\r\n      TutorialSegmentSmartList.add({ menu: 'SegmentSmartList', tutorialStep: index }),\r\n    );\r\n    export const TutorialSegmentManualList = new TutorialLinkedList();\r\n    tutorialHelperText.SegmentManualList.step.forEach((_, index) =>\r\n      TutorialSegmentManualList.add({ menu: 'SegmentManualList', tutorialStep: index }),\r\n    );\r\n    export const TutorialReportList = new TutorialLinkedList();\r\n    tutorialHelperText.ReportList.step.forEach((_, index) =>\r\n      TutorialReportList.add({ menu: 'ReportList', tutorialStep: index }),\r\n    );\r\n    ```\r\n    \r\n    - ì¸í„°í˜ì´ìŠ¤, ë…¸ë“œ, ì—°ê²°ë¦¬ìŠ¤íŠ¸ ë³´ê¸°\r\n        \r\n        ```tsx\r\n        // TutorialHelper.interface.ts\r\n        \r\n        export type TutorialMenu = 'Automation' | 'CampaignList' | 'SegmentSmartList' | 'SegmentManualList' | 'ReportList';\r\n        \r\n        export type TutorialHelperText = {\r\n          [key in TutorialMenu]: {\r\n            title: string;\r\n            step: Array<{\r\n              subTitle?: string;\r\n              desc: string;\r\n            }>;\r\n          };\r\n        };\r\n        \r\n        export interface TutorialInfo {\r\n          menu: TutorialMenu;\r\n          tutorialStep: number;\r\n        }\r\n        ```\r\n        \r\n        ```tsx\r\n        // TutorialNode.ts\r\n        \r\n        import { TutorialInfo } from './TutorialHelper.interface';\r\n        \r\n        export class TutorialNode {\r\n          info: TutorialInfo;\r\n        \r\n          prev: TutorialNode | null;\r\n        \r\n          next: TutorialNode | null;\r\n        \r\n          constructor(info: TutorialInfo) {\r\n            this.info = info;\r\n            this.prev = null;\r\n            this.next = null;\r\n          }\r\n        }\r\n        ```\r\n        \r\n        ```tsx\r\n        // TutorialLinkedList.ts\r\n        \r\n        import { TutorialInfo } from './TutorialHelper.interface';\r\n        import { TutorialNode } from './TutorialNode';\r\n        \r\n        export class TutorialLinkedList {\r\n          public head: TutorialNode | null = null;\r\n        \r\n          tail: TutorialNode | null = null;\r\n        \r\n          constructor(headInfo?: TutorialInfo) {\r\n            if (headInfo) this.init(headInfo);\r\n          }\r\n        \r\n          init(headInfo: TutorialInfo): void {\r\n            this.head = new TutorialNode(headInfo);\r\n            this.tail = this.head;\r\n          }\r\n        \r\n          add(newInfo: TutorialInfo): void {\r\n            if (this.tail === null) this.init(newInfo);\r\n            else {\r\n              const newNode = new TutorialNode(newInfo);\r\n              newNode.prev = this.tail;\r\n              this.tail.next = newNode;\r\n              this.tail = newNode;\r\n            }\r\n          }\r\n        }\r\n        ```\r\n        \r\n\r\n# í¬ì»¤ìŠ¤ ì»´í¬ë„ŒíŠ¸\r\n\r\n- í¬ì»¤ìŠ¤\r\n    \r\n    ```tsx\r\n    import React, { FC, useMemo, useEffect, useRef } from 'react';\r\n    import { useRecoilValue } from 'recoil';\r\n    import { isEqual } from 'lodash';\r\n    import { demoTutorialState } from '../../../recoil/DemoTutorialState';\r\n    import { TutorialMenu } from '../TutorialHelper/TutorialHelper.interface';\r\n    import { StyledLayout } from './TutorialFocus.style';\r\n    \r\n    export interface FocusTarget {\r\n      menu: TutorialMenu;\r\n      tutorialStep: number;\r\n    }\r\n    \r\n    const isMatch = (propTarget: FocusTarget | FocusTarget[], recoilInfo: FocusTarget) => {\r\n      if (Array.isArray(propTarget)) return propTarget.some((target) => isEqual(target, recoilInfo));\r\n      return isEqual(propTarget, recoilInfo);\r\n    };\r\n    export interface TutorialFocusProps {\r\n      focusTarget: FocusTarget | FocusTarget[];\r\n      style?: React.CSSProperties;\r\n      children: React.ReactNode;\r\n    }\r\n    export const TutorialFocus: FC<TutorialFocusProps> = ({ focusTarget, style, children }: TutorialFocusProps) => {\r\n      const ref = useRef<HTMLDivElement>(null);\r\n      const { tutorialNode, isFolded } = useRecoilValue(demoTutorialState);\r\n    \r\n      const isFocusOn = useMemo(() => {\r\n        if (isFolded) return false;\r\n        if (tutorialNode === null) return false;\r\n        const { info } = tutorialNode;\r\n        return isMatch(focusTarget, info);\r\n      }, [isFolded, tutorialNode]);\r\n    \r\n      useEffect(() => {\r\n        if (isFocusOn) ref.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n      }, [isFocusOn]);\r\n    \r\n      return (\r\n        <StyledLayout isFocusOn={isFocusOn} style={style} ref={ref}>\r\n          {isFocusOn && <span className=\"dot\" />}\r\n          {children}\r\n        </StyledLayout>\r\n      );\r\n    };\r\n    ```\r\n    \r\n    - ìŠ¤íƒ€ì¼\r\n        \r\n        ```tsx\r\n        // TutorialFocus.style.tsx\r\n        \r\n        import { keyframes } from '@emotion/react';\r\n        import styled from '@emotion/styled';\r\n        \r\n        const pulse = keyframes`\r\n          0% {\r\n            transform: scale(1);\r\n          }\r\n        \r\n          70% {\r\n            opacity: 0;\r\n          }\r\n        \r\n          100% {\r\n            transform: scale(2);\r\n            opacity: 0;\r\n          }\r\n        `;\r\n        \r\n        export const StyledLayout = styled.div<{ isFocusOn: boolean }>`\r\n          label: tutorial-focus-layout;\r\n        \r\n          ${({ isFocusOn, theme }) =>\r\n            isFocusOn &&\r\n            `\r\n          border-radius: 8px;\r\n          border: solid 1px ${theme.colors.primary};\r\n          position: relative;\r\n          `}\r\n          \r\n          .dot {\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            width: 12px;\r\n            height: 12px;\r\n            background-color: ${({ theme }) => theme.colors.primary};\r\n            border-radius: 50%;\r\n            transform: translate(-50%, -50%);\r\n            z-index: 1;\r\n        \r\n            :before {\r\n              content: '';\r\n              position: absolute;\r\n              left: 0;\r\n              right: 0;\r\n              top: 0;\r\n              bottom: 0;\r\n              background-color: ${({ theme }) => theme.colors.primary};\r\n              border-radius: 50%;\r\n              animation: ${pulse} 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;\r\n            }\r\n        `;\r\n        ```\r\n        \r\n\r\n# íŠœí† ë¦¬ì–¼ FAB ì»´í¬ë„ŒíŠ¸\r\n\r\n- Tutorial FAB & PopOver\r\n    \r\n    ```tsx\r\n    // TutorialHelper.tsx\r\n    ...\r\n    import { useRecoilValue, useSetRecoilState } from 'recoil';\r\n    import { demoTutorialState, demoTutorialStateSelector } from '../../../recoil/DemoTutorialState';\r\n    ...\r\n    \r\n    export const TutorialHelper: FC = () => {\r\n      const i18next = useTranslation();\r\n    \r\n      const { title, subTitle, desc, prev, next } = useRecoilValue(demoTutorialStateSelector);\r\n      const { isDemo, isFolded } = useRecoilValue(demoTutorialState);\r\n      const setDemoTutorial = useSetRecoilState(demoTutorialState);\r\n    \r\n      const openPopOver = () => setDemoTutorial((curVal) => ({ ...curVal, isFolded: false }));\r\n      const closePopOver = () => setDemoTutorial((curVal) => ({ ...curVal, isFolded: true }));\r\n    \r\n      const toPrevTutorial = () => {\r\n        if (prev !== null) setDemoTutorial((currVal) => ({ ...currVal, tutorialNode: prev }));\r\n      };\r\n      const toNextTutorial = () => {\r\n        if (next !== null) setDemoTutorial((currVal) => ({ ...currVal, tutorialNode: next }));\r\n      };\r\n    \r\n      const List: FC<{ href: string; children: React.ReactNode }> = ({\r\n        href,\r\n        children,\r\n      }: {\r\n        href: string;\r\n        children: React.ReactNode;\r\n      }) => {\r\n        return (\r\n          <React.Fragment>\r\n            <StyledList\r\n              onClick={() => {\r\n                window.open(href, '_blank');\r\n              }}\r\n            >\r\n              <div className=\"children\">{children}</div>\r\n              <FontIcon name=\"ic-arrow-right\" size=\"16px\" />\r\n            </StyledList>\r\n          </React.Fragment>\r\n        );\r\n      };\r\n      return isDemo && title && desc ? (\r\n        <StyledLayout>\r\n          {!isFolded && (\r\n            <React.Fragment>\r\n              <StyledUpperPopOver>\r\n                <div className=\"title\">{i18next.t('ë°”ë¡œê°€ê¸°')}</div>\r\n    \r\n                <ul className=\"menu-list\">\r\n                  <List href=\"https://bigin.io/contact\">\r\n                    <span role=\"img\" aria-label=\"\">\r\n                      ğŸ’Œ\r\n                    </span>\r\n                    <span>{i18next.t('ìƒë‹´ ì‹ ì²­í•˜ê¸°')}</span>\r\n                  </List>\r\n    \r\n                  <List href=\"https://docs.google.com/forms/d/e/1FAIpQLScH1ZlWpgqPtcTS0RWHxGxOsUO_4cCYiBFdgxfh6SWEIZgEBA/viewform\">\r\n                    <span role=\"img\" aria-label=\"\">\r\n                      ğŸ‘©â€ğŸ’»\r\n                    </span>\r\n                    <span>{i18next.t('ë¹„ëŒ€ë©´ ì˜¤ë¦¬ì—”í…Œì´ì…˜ ë“£ê¸°')}</span>\r\n                    <BGTooltip\r\n                      title={\r\n                        i18next.t(\r\n                          'bigin ì˜¤ë¦¬ì—”í…Œì´ì…˜ì€ biginì„ í†µí•´ í™œìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„° í•­ëª©, ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³ ê°ì„ ë¶„ë¥˜í•˜ëŠ” ì„¸ ê°€ì§€ ë°©ë²•, CRM ë§ˆì¼€íŒ… í™œìš© ì‚¬ë¡€ë¥¼ ê³µìœ í•˜ê³  ê°„ëµí•œ bigin ëŒ€ì‹œë³´ë“œ ì‹œì—°í•©ë‹ˆë‹¤.',\r\n                        ) || ''\r\n                      }\r\n                    >\r\n                      <div className=\"tip\">\r\n                        <FontIcon name=\"ic-info\" size=\"16px\" />\r\n                      </div>\r\n                    </BGTooltip>\r\n                  </List>\r\n                </ul>\r\n              </StyledUpperPopOver>\r\n    \r\n              {title && desc && (\r\n                <StyledPopOver>\r\n                  <div className=\"border-box\">\r\n                    <div className=\"title\">{subTitle ? `${title}: ${subTitle}` : title}</div>\r\n                    <div className=\"desc\">{desc}</div>\r\n                  </div>\r\n    \r\n                  <div className=\"bottom\">\r\n                    <button type=\"button\" className=\"close\" onClick={closePopOver}>\r\n                      ì ‘ê¸°\r\n                    </button>\r\n    \r\n                    <BGButtonGroup>\r\n                      {prev !== null && (\r\n                        <BGButton appearance=\"secondary\" onClick={toPrevTutorial}>\r\n                          <FontIcon name=\"ic-arrow-left\" size=\"20px\" />\r\n                        </BGButton>\r\n                      )}\r\n    \r\n                      {next !== null && (\r\n                        <BGButton onClick={toNextTutorial}>\r\n                          <FontIcon name=\"ic-arrow-right\" size=\"20px\" />\r\n                        </BGButton>\r\n                      )}\r\n                    </BGButtonGroup>\r\n                  </div>\r\n                </StyledPopOver>\r\n              )}\r\n            </React.Fragment>\r\n          )}\r\n    \r\n          {/* button */}\r\n          <StyledFAB type=\"button\" active={!isFolded} onClick={isFolded ? openPopOver : closePopOver}>\r\n            <img\r\n              src={isFolded ? '/assets/img/demo/logo-symbol-white.svg' : '/assets/img/demo/img-tutorial-helper.svg'}\r\n              alt=\"tutorial helper\"\r\n            />\r\n          </StyledFAB>\r\n        </StyledLayout>\r\n      ) : (\r\n        <React.Fragment />\r\n      );\r\n    };\r\n    ```\r\n    \r\n    - ìŠ¤íƒ€ì¼\r\n        \r\n        ```tsx\r\n        // TutorialHelper.style.tsx\r\n        \r\n        import { keyframes, css } from '@emotion/react';\r\n        import styled from '@emotion/styled';\r\n        \r\n        const borderRadiusBig = 12;\r\n        const borderRadiusSmall = 8;\r\n        \r\n        const pulse = keyframes`\r\n          0% {\r\n            transform: scale(1);\r\n          }\r\n        \r\n          70% {\r\n            opacity: 0;\r\n          }\r\n        \r\n          100% {\r\n            transform: scale(1.2);\r\n            opacity: 0;\r\n          }\r\n        `;\r\n        \r\n        export const StyledLayout = styled.div`\r\n          label: tutorial-helper-layout;\r\n        \r\n          box-sizing: border-box;\r\n        \r\n          position: fixed;\r\n          right: 30px;\r\n          bottom: 30px;\r\n          z-index: 99;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: flex-end;\r\n        `;\r\n        \r\n        export const StyledUpperPopOver = styled.div`\r\n          label: tutorial-helper-upper-pop-over;\r\n        \r\n          box-sizing: border-box;\r\n        \r\n          width: 320px;\r\n          padding: 9px 12px;\r\n          border-radius: ${borderRadiusBig}px;\r\n          background-color: #000a29;\r\n        \r\n          .title {\r\n            font-size: 14px;\r\n            font-weight: bold;\r\n            line-height: 1.43;\r\n            color: #e3e5eb;\r\n            margin-bottom: 8px;\r\n          }\r\n        \r\n          .menu-list {\r\n            list-style: none;\r\n            margin: 0;\r\n            padding: 0;\r\n          }\r\n        `;\r\n        \r\n        export const StyledList = styled.li`\r\n          label: upper-pop-over-list;\r\n        \r\n          box-sizing: border-box;\r\n          list-style: none;\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          padding: 6px 10px;\r\n          border-radius: ${borderRadiusSmall}px;\r\n          border: solid 1px #2b4289;\r\n          font-size: 14px;\r\n          font-weight: normal;\r\n          line-height: 1.71;\r\n          color: #e4e4e4;\r\n        \r\n          :hover {\r\n            cursor: pointer;\r\n          }\r\n        \r\n          :not(:last-child) {\r\n            margin-bottom: 8px;\r\n          }\r\n        \r\n          .children {\r\n            display: flex;\r\n        \r\n            span[role='img'] {\r\n              margin-right: 10px;\r\n            }\r\n        \r\n            .tip {\r\n              margin-left: 3px;\r\n              display: flex;\r\n              align-items: center;\r\n            }\r\n          }\r\n        `;\r\n        \r\n        export const StyledPopOver = styled.div`\r\n          label: tutorial-helper-pop-over;\r\n        \r\n          box-sizing: border-box;\r\n        \r\n          width: 320px;\r\n          margin-top: 5px;\r\n          padding: 8px 8px 12px;\r\n          border-radius: ${borderRadiusBig}px;\r\n          background-color: #000a29;\r\n          position: relative;\r\n        \r\n          :before {\r\n            content: '';\r\n            position: absolute;\r\n            right: 40px;\r\n            bottom: -16px;\r\n            width: 0;\r\n            height: 0;\r\n            border-top: 16px solid black;\r\n            border-left: 16px solid transparent;\r\n          }\r\n        \r\n          .border-box {\r\n            border-radius: ${borderRadiusSmall}px;\r\n            border: solid 1px #2b4289;\r\n            padding: 12px;\r\n            margin-bottom: 18px;\r\n        \r\n            .title {\r\n              font-size: 16px;\r\n              font-weight: bold;\r\n              line-height: 1.5;\r\n              color: #fff;\r\n              margin-bottom: 12px;\r\n            }\r\n        \r\n            .desc {\r\n              font-size: 14px;\r\n              font-weight: normal;\r\n              line-height: 1.71;\r\n              color: #d8d8d8;\r\n            }\r\n          }\r\n        \r\n          .bottom {\r\n            display: flex;\r\n            justify-content: space-between;\r\n        \r\n            .close {\r\n              border: 0;\r\n              outline: 0;\r\n              background-color: transparent;\r\n              font-size: 16px;\r\n              font-weight: normal;\r\n              line-height: normal;\r\n              color: #abb3c2;\r\n        \r\n              :hover {\r\n                cursor: pointer;\r\n                font-weight: bold;\r\n                text-decoration: underline;\r\n              }\r\n            }\r\n        \r\n            .bg-button {\r\n              padding: 8px;\r\n            }\r\n          }\r\n        `;\r\n        \r\n        export const StyledFAB = styled.button<{ active?: boolean }>`\r\n          label: tutorial-helper-fab;\r\n        \r\n          all: unset;\r\n        \r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          position: relative;\r\n          transition: width 1s ease, height 1s ease;\r\n        \r\n          :hover {\r\n            cursor: pointer;\r\n          }\r\n        \r\n          ${({ active, theme }) => {\r\n            if (active)\r\n              return css`\r\n                background-color: ${theme.colors.primary};\r\n                margin-top: 30px;\r\n                border-radius: ${borderRadiusBig}px;\r\n                width: 80px;\r\n                height: 80px;\r\n        \r\n                &:before {\r\n                  content: '';\r\n                  position: absolute;\r\n                  left: 0;\r\n                  top: 0;\r\n                  right: 0;\r\n                  bottom: 0;\r\n                  border-radius: ${borderRadiusBig}px;\r\n                  transform: scale(1);\r\n                  border: 1px solid ${theme.colors.primary};\r\n                  animation: ${pulse} 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;\r\n                }\r\n        \r\n                &:after {\r\n                  content: '';\r\n                  position: absolute;\r\n                  left: 0;\r\n                  top: 0;\r\n                  right: 0;\r\n                  bottom: 0;\r\n                  border-radius: ${borderRadiusBig}px;\r\n                  transform: scale(1);\r\n                  border: 1px solid ${theme.colors.primary};\r\n                  animation: ${pulse} 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;\r\n                  animation-delay: 0.2s;\r\n                }\r\n        \r\n                img {\r\n                  width: 100%;\r\n                  height: auto;\r\n                }\r\n              `;\r\n        \r\n            return css`\r\n              background-color: #000a29;\r\n              width: 48px;\r\n              height: 48px;\r\n              border-radius: ${borderRadiusSmall}px;\r\n        \r\n              img {\r\n                width: 45%;\r\n                height: auto;\r\n              }\r\n            `;\r\n          }}\r\n        `;\r\n        ```\r\n        \r\n\r\n# ì‚¬ìš©\r\n\r\n- /demo ë¼ìš°í„°ë¡œ ë“¤ì–´ì™”ì„ ë•Œ, ë°ëª¨ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í•œ í›„ isDemo ì—…ë°ì´íŠ¸\r\n    \r\n    ```tsx\r\n    \r\n    demoLoginPromise.then((res)=>{\r\n    \t...\r\n    \tsetDemoTutorial((prev) => ({ ...prev, isDemo: true }));\r\n    \t...\r\n    })\r\n    ```\r\n    \r\n- íŠœí† ë¦¬ì–¼ FAB + íŒì˜¤ë²„\r\n    \r\n    ```tsx\r\n    // ìµœìƒë‹¨ ì»´í¬ë„ŒíŠ¸ì— ì¶”ê°€\r\n    <TutorialHelper />\r\n    ```\r\n    \r\n- í˜ì´ì§€ ì‹œì‘ ë¶€ë¶„ì—ì„œ ì´ˆê¸°í™”\r\n\r\n```tsx\r\n// /pages/Automation.tsx\r\n\r\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\r\nimport { demoTutorialState } from '@/recoil/DemoTutorialState';\r\nimport { TutorialAutomationList } from '@/components/Demo/TutorialHelper/TutorialHelper.data';\r\n\r\nexport const Automation = (): ReactElement => {\r\n\t...\r\n  const { isDemo } = useRecoilValue(demoTutorialState);\r\n  const setDemoTutorial = useSetRecoilState(demoTutorialState);\r\n\r\n\t...\r\n\r\n  useEffect(() => {\r\n    if (isDemo) setDemoTutorial((curVal) => ({ ...curVal, tutorialNode: TutorialAutomationList.head }));\r\n    return () => {\r\n      if (isDemo) setDemoTutorial((curVal) => ({ ...curVal, tutorialNode: null }));\r\n    };\r\n  }, [isDemo]);\r\n\r\n\t...\r\n\r\n  return (\r\n    <BGPage className=\"container-section\" direction=\"column\" css={[baseCss]}>\r\n      ...\r\n    </BGPage>\r\n  );\r\n};\r\n```\r\n\r\n- í¬ì»¤ìŠ¤ ì„¤ì •\r\n    - demoTutorialStateì˜ menuê°€ â€œAutomationâ€ì´ê³  focusStepì´ 1ì´ë©´ í¬ì»¤ì‹±ì´ í™œì„±í™”ëœë‹¤.\r\n\r\n```tsx\r\n<TutorialFocus focusTarget={{ menu: 'Automation', tutorialStep: 3 }}>\r\n  <BorderSection>\r\n    ...\r\n  </BorderSection> \r\n</TutorialFocus>\r\n```\r\n\r\n```tsx\r\n<TutorialFocus\r\n  focusTarget={[\r\n    { menu: 'Automation', tutorialStep: 3 },\r\n    { menu: 'CampaignList', tutorialStep: 2 },\r\n  ]}\r\n>\r\n  <BorderSection>\r\n    ...\r\n  </BorderSection>\r\n</TutorialFocus>\r\n```"},{"id":1636038000,"title":"í‰ì  ë¶„ì„ì„ ìœ„í•œ Python ë¼ì´ë¸ŒëŸ¬ë¦¬ ê¸°ì´ˆ ë¬¸ë²•ì„ ë°°ì›Œë³´ì\r","author":"jangky000\r","date":"2021.11.05\r","content":"\r\n# ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬\r\n\r\n````python\r\nimport pandas as pd\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\nimport math\r\n````\r\n\r\n# CSV ë¶ˆëŸ¬ì˜¤ê¸°\r\n\r\n````python\r\ndf = pd.read_csv('movielens/ratings.csv')\r\n````\r\n\r\n\r\n# DataFrameì˜ shape, columns í™•ì¸\r\n````python\r\nprint(df.shape)\r\nprint(df.columns)\r\n````\r\n\r\n````\r\nresult: \r\n\r\n(100004, 4)\r\nIndex(['userId', 'movieId', 'rating', 'timestamp'], dtype='object')\r\n````\r\n\r\n# iloc\r\n- integer-location based indexing\r\n- í–‰ ì„ íƒ\r\n\r\n````python\r\ndf[['userId', 'movieId', 'rating']].iloc[10:15]\r\n````\r\n\r\n````\r\nresult: \r\n\r\n\tuserId\tmovieId\trating\r\n10\t1\t1371\t2.5\r\n11\t1\t1405\t1.0\r\n12\t1\t1953\t4.0\r\n13\t1\t2105\t4.0\r\n14\t1\t2150\t3.0\r\n````\r\n\r\n# timestampë¥¼ '2009-12-14 02:52:24' í˜•íƒœë¡œ ì¶œë ¥\r\n\r\n````python\r\npd.to_datetime(df['timestamp'].astype(int), unit='s')\r\n````\r\n\r\n````\r\nresult: \r\n\r\n0        2009-12-14 02:52:24\r\n1        2009-12-14 02:52:59\r\n2        2009-12-14 02:53:02\r\n3        2009-12-14 02:53:05\r\n4        2009-12-14 02:53:25\r\n                 ...        \r\n````\r\n\r\n# 'year' ì¹¼ëŸ¼ ì¶”ê°€\r\n\r\n````python\r\ndf['date'] = pd.to_datetime(df['timestamp'].astype(int), unit='s')\r\ndf['year'] = df['date'].apply(lambda x: x.year)\r\ndf\r\n````\r\n\r\n````\r\nresult: \r\n\r\n        userId  movieId  rating   timestamp                date  year\r\n0            1       31     2.5  1260759144 2009-12-14 02:52:24  2009\r\n1            1     1029     3.0  1260759179 2009-12-14 02:52:59  2009\r\n2            1     1061     3.0  1260759182 2009-12-14 02:53:02  2009\r\n3            1     1129     2.0  1260759185 2009-12-14 02:53:05  2009\r\n4            1     1172     4.0  1260759205 2009-12-14 02:53:25  2009\r\n...        ...      ...     ...         ...                 ...   ...\r\n````\r\n\r\n# ê·¸ë£¹ë³„ Count\r\n- group by(), size()\r\n\r\n````python\r\nyearCounts = df.groupby('year').size()\r\nprint(type(yearCounts))\r\nyearCounts\r\n````\r\n\r\n````\r\nresult: \r\n\r\n<class 'pandas.core.series.Series'>\r\nyear\r\n1995        3\r\n1996     6239\r\n1997     3294\r\n1998     1825\r\n1999     5901\r\n2000    13869\r\n2001     4658\r\n2002     3938\r\n...\r\n````\r\n\r\n# ë°” ì°¨íŠ¸ ê·¸ë¦¬ê¸°\r\n\r\n````python\r\nyearCounts = pd.DataFrame(data = yearCounts, columns = ['counts']) # DataFrame\r\nyearCounts.plot(kind='bar', figsize=(12, 8), label='counts', legend=True)\r\n````\r\n\r\n````\r\nresult: \r\n````\r\n<img src=\"https://user-images.githubusercontent.com/46799722/140495795-36473127-33d3-488c-afcc-16d3570d05f5.png\" style=\"width: 100%;\"/>\r\n\r\n# Train Data ì¶”ì¶œ\r\n- frac: ì¶”ì¶œí•  í‘œë³¸ ë¹„ìœ¨\r\n- random_state: ë‚œìˆ˜ ë°œìƒ ì´ˆê¸°ê°’, ì¬í˜„ ê°€ëŠ¥ì„±ì„ ìœ„í•´ í•„ìš”, seed for random number generator\r\n\r\n````python\r\ntrain = df.sample(frac=0.9, random_state=1)\r\ntrain['type'] = 'train'\r\ntrain.head()\r\n````\r\n\r\n````\r\nresult: \r\n\r\n       userId  movieId  rating   timestamp                date  year   type\r\n99778     667      446     4.0   847271818 1996-11-06 09:16:58  1996  train\r\n16170     104    71135     3.5  1446674062 2015-11-04 21:54:22  2015  train\r\n3521       19     1394     5.0   855192061 1997-02-06 01:21:01  1997  train\r\n55070     395      671     5.0   953007109 2000-03-14 04:11:49  2000  train\r\n25477     187      953     3.0  1230361942 2008-12-27 07:12:22  2008  train\r\n````\r\n\r\n# Test Data ì¶”ì¶œ\r\n\r\n````python\r\ntest = df.drop(train.index)\r\ntest['type'] = 'test'\r\ntest.head()\r\n````\r\n\r\n````\r\nresult: \r\n\r\n    userId  movieId  rating   timestamp                date  year  type\r\n9        1     1343     2.0  1260759131 2009-12-14 02:52:11  2009  test\r\n15       1     2193     2.0  1260759198 2009-12-14 02:53:18  2009  test\r\n18       1     2968     1.0  1260759200 2009-12-14 02:53:20  2009  test\r\n27       2      110     4.0   835355532 1996-06-21 11:12:12  1996  test\r\n47       2      273     4.0   835355779 1996-06-21 11:16:19  1996  test\r\n````\r\n\r\n---\r\n\r\n# ì˜í™” ì „ì²´ì˜ í‰ê·  í‰ì ìœ¼ë¡œ ê°ê°ì˜ ì˜í™” í‰ì  ì˜ˆì¸¡\r\n\r\n## Train Dataì˜ í‰ì  í‰ê· ì„ ê³„ì‚°\r\n\r\n````python\r\navgRating = train['rating'].mean()\r\navgRating\r\n````\r\n\r\n````\r\nresult: \r\n\r\n3.5421147948980045\r\n````\r\n\r\n## Test ë°ì´í„°ì˜ 'pred' ì¹¼ëŸ¼ì— Train Dataì˜ í‰ì  í‰ê· ì„ ëª¨ë‘ ì¶”ê°€\r\n\r\n````python\r\navgPred = test[['userId', 'movieId', 'rating']].copy()\r\navgPred['pred'] = avgRating\r\navgPred.head()\r\n````\r\n\r\n````\r\nresult: \r\n\r\n\tuserId\tmovieId\trating\tpred\r\n9\t1\t1343\t2.0\t3.542115\r\n15\t1\t2193\t2.0\t3.542115\r\n18\t1\t2968\t1.0\t3.542115\r\n27\t2\t110\t4.0\t3.542115\r\n47\t2\t273\t4.0\t3.542115\r\n````\r\n\r\n## Test ë°ì´í„°ì˜ í‰ì ê³¼ ì˜ˆì¸¡ê°’ ì‚¬ì´ì˜ MAE, RMSEë¥¼ ê³„ì‚°\r\n\r\n- í‰ì  ì˜ˆì¸¡ ê¸°ì¤€ì´ ì„¸ë¶„í™”ë˜ì§€ ì•Šì•„ ì—ëŸ¬ê°€ í¬ë‹¤.\r\n- rmseëŠ” í‰ì ê³¼ ì˜ˆì¸¡ê°’ ì‚¬ì´ì˜ ì°¨ì´ê°€ í´ìˆ˜ë¡ maeì— ë¹„í•´ ì—ëŸ¬ê°’ì´ ì¦ê°€\r\n\r\n````python\r\navgPredErrors = avgPred['pred'] - avgPred['rating']\r\nmae = avgPredErrors.abs().mean()\r\nrmse = math.sqrt(avgPredErrors.pow(2).mean())\r\nprint(mae)\r\nprint(rmse)\r\n````\r\n\r\n````\r\nresult: \r\n\r\n0.8586874505577531\r\n1.0629409004509323\r\n````\r\n\r\n---\r\n\r\n# ì‚¬ìš©ì IDë³„ ì˜í™” í‰ê·  í‰ì ìœ¼ë¡œ ê°ê°ì˜ ì˜í™” í‰ì  ì˜ˆì¸¡\r\n\r\n- ì‚¬ìš©ìì˜ í‰ì  ì„±í–¥ì„ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.\r\n\r\n## Train ë°ì´í„°ì—ì„œ ì‚¬ìš©ì IDë³„ë¡œ ê·¸ë£¹ í‰ê·  ê³„ì‚°\r\n\r\n- .groupby('userId').mean() === .groupby('userId').agg('mean')\r\n- aggëŠ” ê·¸ë£¹ë³„ë¡œ ê²°ê³¼ë¥¼ ì–»ëŠ” ì¡°ì‘ì„ Aggregationì˜ ì•½ì\r\n- .agg({'price': my_mean, 'quantity': np.sum}) ë“±ìœ¼ë¡œ ë‘ ê°œ ì´ìƒì˜ ê·¸ë£¹ ê³„ì‚°ì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤.\r\n\r\n````python\r\nuserAvgRatings = train[['userId', 'rating']].groupby('userId').agg('mean')\r\nuserAvgRatings.columns = ['pred']\r\nuserAvgRatings\r\n````\r\n\r\n````\r\nresult: \r\n\r\n1\t2.705882\r\n2\t3.485294\r\n3\t3.579545\r\n4\t4.351351\r\n5\t3.893617\r\n````\r\n\r\n## merge: left inner join\r\n\r\n- Test ë°ì´í„°ì— ì‚¬ìš©ìë³„ ì˜ˆì¸¡ í‰ì ì„ ì¶”ê°€í•œë‹¤.\r\n- right_index: Use the index from the left DataFrame as the join key(s). \r\n- right_indexëŠ” defaultê°€ falseì´ë¯€ë¡œ í‘œê¸°í•  í•„ìš” ì—†ë‹¤.\r\n\r\n````python\r\nuserAvgPred = test[['userId', 'movieId', 'rating']]\r\nuserAvgPred = pd.merge(userAvgPred, userAvgRatings, how='left', left_on=['userId'], right_on=['userId'], right_index = False)\r\nuserAvgPred.head()\r\n\r\n````\r\n\r\n````\r\nresult: \r\n\r\n\tuserId\tmovieId\trating\tpred\r\n0\t1\t1343\t2.0\t2.705882\r\n1\t1\t2193\t2.0\t2.705882\r\n2\t1\t2968\t1.0\t2.705882\r\n3\t2\t110\t4.0\t3.485294\r\n4\t2\t273\t4.0\t3.485294\r\n````\r\n\r\n## MAE, RMSE ê³„ì‚°\r\n\r\n- ì‚¬ìš©ìì˜ ì„±í–¥ì´ ê³ ë ¤ë˜ì–´ ì—ëŸ¬ ê°’ì´ ë‚®ì•„ì¡Œë‹¤.\r\n- MAE: 0.8586874505577531 -> 0.7581636860631077\r\n- RSME: 1.0629409004509323 -> 0.9652871605248908\r\n\r\n````python\r\nuserAvgPredErrors = userAvgPred['pred'] - userAvgPred['rating']\r\nmae2 = userAvgPredErrors.abs().mean()\r\nrmse2 = math.sqrt(userAvgPredErrors.pow(2).mean())\r\nprint(mae2)\r\nprint(rmse2)\r\n````\r\n\r\n````\r\nresult: \r\n\r\n0.7581636860631077\r\n0.9652871605248908\r\n````\r\n\r\n---\r\n\r\n# ì˜í™”ë³„ í‰ì  í‰ê· ì„ í†µí•œ ì˜í™” í‰ì  ì˜ˆì¸¡\r\n\r\n## movieId ê·¸ë£¹ë³„ë¡œ í‰ê·  ê³„ì‚°\r\n\r\n````python\r\nitemAvgRatings = train[['movieId', 'rating']].groupby('movieId').agg('mean')\r\nitemAvgRatings.columns = ['pred'] # 'rating' ì¹¼ëŸ¼ì˜ ì´ë¦„ì„ 'pred'ë¡œ ìˆ˜ì •\r\nitemAvgRatings.head()\r\n\r\n````\r\n\r\n````\r\nresult: \r\n\r\n\tpred\r\nmovieId\t\r\n1\t3.870044\r\n2\t3.435644\r\n3\t3.200000\r\n4\t2.388889\r\n5\t3.294118\r\n````\r\n\r\n## merge\r\n\r\n````python\r\nitemAvgPred = test[['userId', 'movieId', 'rating']]\r\nitemAvgPred = pd.merge(itemAvgPred, itemAvgRatings, how='left', left_on=['movieId'], right_on=['movieId'], right_index = False)\r\nitemAvgPred.head()\r\n````\r\n\r\n````\r\nresult: \r\n\r\n  userId\tmovieId\trating\tpred\r\n0\t1\t1343\t2.0\t3.720588\r\n1\t1\t2193\t2.0\t3.166667\r\n2\t1\t2968\t1.0\t3.587500\r\n3\t2\t110\t4.0\t3.923858\r\n4\t2\t273\t4.0\t3.125000\r\n````\r\n\r\n## MAE, RMSE\r\n\r\n- ì‚¬ìš©ì ë³„ë¡œ í‰ì ì„ ì˜ˆì¸¡ í–ˆì„ ë•Œë³´ë‹¤ ì—ëŸ¬ê°€ ì¡°ê¸ˆ ìƒìŠ¹í–ˆë‹¤.\r\n\r\n````python\r\nitemAvgPredErrors = itemAvgPred['pred'] - itemAvgPred['rating']\r\nmae3 = itemAvgPredErrors.abs().mean()\r\nrmse3 = math.sqrt(itemAvgPredErrors.pow(2).mean())\r\nprint(mae3)\r\nprint(rmse3)\r\n````\r\n\r\n````\r\nresult: \r\n\r\n0.761464979636912\r\n0.974768257763819\r\n````\r\n\r\n---\r\n\r\n# URLì„ ì£¼í”¼í„° ë…¸íŠ¸ë¶ì—ì„œ ì´ë¯¸ì§€ë¡œ í™•ì¸í•˜ê¸°\r\n\r\n## ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° \r\n````python\r\ndfMovie = pd.read_csv('movielens/movies_w_imgurl.csv')\r\ndfMovie.head()\r\n````\r\n\r\n````\r\nresult: \r\n\r\n\r\n  movieId\timdbId\ttitle\tgenres\timgurl\r\n0\t1\t114709\tToy Story (1995)\tAdventure|Animation|Children|Comedy|Fantasy\thttps://images-na.ssl-images-amazon.com/images...\r\n1\t2\t113497\tJumanji (1995)\tAdventure|Children|Fantasy\thttps://images-na.ssl-images-amazon.com/images...\r\n2\t3\t113228\tGrumpier Old Men (1995)\tComedy|Romance\thttps://images-na.ssl-images-amazon.com/images...\r\n3\t4\t114885\tWaiting to Exhale (1995)\tComedy|Drama|Romance\thttps://images-na.ssl-images-amazon.com/images...\r\n4\t5\t113041\tFather of the Bride Part II (1995)\tComedy\thttps://images-na.ssl-images-amazon.com/images...\r\n````\r\n\r\n## ì£¼í”¼í„° ë…¸íŠ¸ë¶ ì…€ ì‹¤í–‰í™”ë©´ì— ë‹¤ìŒê³¼ ê°™ì´ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\r\n\r\n````python\r\nfrom IPython.display import Image, display\r\n\r\nfor i in range(0, 5):\r\n    display(Image(dfMovie['imgurl'].iloc[i]))\r\n````\r\n\r\n````\r\nresult: \r\n````\r\n<img src=\"https://user-images.githubusercontent.com/46799722/140501330-31eaf555-3d63-4dba-910d-a065f680b14b.png\" style=\"width: 100%;\"/>\r\n"},{"id":1635951600,"title":"React HOCë¥¼ ì‚¬ìš©í•´ë³´ì\r","author":"jangky000\r","date":"2021.11.04\r","content":"\r\n# ìƒí™© #1\r\n\r\nì´ë²ˆì— íšŒì‚¬ì—ì„œ React í”„ë¡œì íŠ¸ì— 4ê°œì˜ ìƒˆë¡œìš´ í˜ì´ì§€ë¥¼ ì¶”ê°€í•˜ëŠ” íƒœìŠ¤í¬ë¥¼ ë§¡ê²Œ ë˜ì—ˆë‹¤. \r\n\r\nì•„ë˜ì™€ ê°™ì´ 4ê°œì˜ í˜ì´ì§€ë¥¼ ì œì‘í•´ì•¼ í•œë‹¤ê³  í•˜ì, 4ê°œì˜ í˜ì´ì§€ì—ëŠ” ê³µí†µì ìœ¼ë¡œ ë‚ ì§œë¥¼ ì„ íƒí•  ìˆ˜ ìˆëŠ” Calendar Selectorê°€ ìˆê³ , ì´ ì…€ë ‰í„°ì—ëŠ” ì‚¬ìš©ìì— ë”°ë¼ **ì„ íƒ ê°€ëŠ¥í•œ ê¸°ê°„**ê³¼ **ê¸°ë³¸ ì„¤ì • ê¸°ê°„** ì •ë³´ê°€ í•„ìš”í•˜ë‹¤.\r\n- **ì„ íƒ ê°€ëŠ¥í•œ ê¸°ê°„**ì€ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ ì „ì—­ ìƒíƒœë¡œ ê´€ë¦¬ë˜ê³  ìˆëŠ” ë°ì´í„°ë‹¤.\r\n- **ê¸°ë³¸ ì„¤ì • ê¸°ê°„** ì—­ì‹œ ì „ì—­ ìƒíƒœ ë°ì´í„°ë‹¤.\r\n- ê°ê°ì˜ í˜ì´ì§€ëŠ” Calendar Selectorì—ì„œ ì„ íƒí•œ ê¸°ê°„ì— ë”°ë¼ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ ì¶œë ¥í•´ì•¼ í•œë‹¤.\r\n\r\n<div style=\"display: grid;grid-template-columns: repeat(2, 1fr);grid-column-gap: 20px;grid-row-gap: 20px;\">\r\n    <img src=\"https://user-images.githubusercontent.com/46799722/140294319-00c25762-be33-4452-93ad-b9ffec94b290.png\" style=\"width:100%;\"/>\r\n    <img src=\"https://user-images.githubusercontent.com/46799722/140294330-2092adfa-5527-4b24-a23b-2c75838e98f7.png\" style=\"width:100%;\"/>\r\n    <img src=\"https://user-images.githubusercontent.com/46799722/140294336-21ddcf01-228d-4ff0-b74c-4148139496cc.png\" style=\"width:100%;\"/>\r\n    <img src=\"https://user-images.githubusercontent.com/46799722/140294339-c4061391-c5a0-47ab-b619-4a34e8a11ec8.png\" style=\"width:100%;\"/>\r\n</div>\r\n\r\n# ì½”ë“œì˜ ì¬ì‚¬ìš©\r\n\r\n*ì „ì—­ ìƒíƒœ ê´€ë¦¬ ìŠ¤í† ì–´ì—ì„œ **ì„ íƒ ê°€ëŠ¥í•œ ê¸°ê°„**ê³¼ **ê¸°ë³¸ ì„¤ì • ê¸°ê°„**ì„ ê°€ì ¸ì™€ ë°ì´í„°ë¥¼ ê²€ì¦ì„ í•œ ë’¤ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤, 4ê°œì˜ í˜ì´ì§€ì—ì„œ ë˜‘ê°™ì´.*\r\n\r\n**ì„ íƒ ê°€ëŠ¥í•œ ê¸°ê°„**ê³¼, **ê¸°ë³¸ ì„¤ì • ê¸°ê°„** ì •ë„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë°, ì´ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê² ë‹¤ê³  ê²°ì‹¬í•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\r\n\r\n- ìœ ì§€ ë³´ìˆ˜í•  ë•Œ, ë³µì‚¬ ë¶™ì—¬ë„£ê¸° ë˜ì–´ ìˆëŠ” 4ê°œì˜ ì†ŒìŠ¤ë¥¼ í•˜ë‚˜ì”© ì°¾ì•„ ê³ ì¹˜ê³  ì‹¶ì§€ ì•Šë‹¤.\r\n- ê°ê°ì˜ í˜ì´ì§€ì—ì„œ ìµœëŒ€í•œ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ëŠ” ë¡œì§ì„ ì œê±°í•˜ê³ , Viewë¥¼ ê·¸ë¦¬ëŠ” ì—­í• ì—ë§Œ ì§‘ì¤‘í•˜ê³  ì‹¶ë‹¤.\r\n\r\n# ë¦¬ì•¡íŠ¸ì—ì„œ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•\r\n\r\n- Util ì„± ìˆœìˆ˜ í•¨ìˆ˜\r\n- Composition\r\n- Render Props\r\n- HOC\r\n- Custom Hook\r\n\r\n# ì´ì¤‘ HOCë¥¼ ì„ íƒí•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\r\n\r\n- Util ì„± ìˆœìˆ˜í•¨ìˆ˜ëŠ” ì „ì—­ ìƒíƒœ ê´€ë¦¬ ìŠ¤í† ì–´ ê°’ì„ í™œìš© í•  ìˆ˜ ì—†ë‹¤.(ìˆœìˆ˜ í•¨ìˆ˜ ì •ì˜ì— ìœ„ë°°)\r\n- Compositionì€, Render PropsëŠ” JSX Element í˜•íƒœë¡œ ì‚¬ìš©í•˜ì—¬ ë™ì ìœ¼ë¡œ ë¬´ì—‡ì„ ê·¸ë¦´ì§€ì— ì´ˆì ì´ ìˆëŠ” ëŠë‚Œì´ë‹¤.\r\n- í•˜ì§€ë§Œ ë‚´ê²Œ í•„ìš”í•œ ê¸°ëŠ¥ì€ ë‹¨ìˆœíˆ ì „ì—­ ìƒíƒœ ê´€ë¦¬ ìŠ¤í† ì–´ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥ì´ë‹¤.\r\n- <s>ì„ íƒì§€ê°€ ì•„ì§ ë‘ ê°œê°€ ë‚¨ì•˜ì§€ë§Œ ë‚´ê²Œ ê°€ì¥ ë‚¯ì„  HOCë¥¼ ì‚¬ìš©í•´ë³´ê³  ì‹¶ì—ˆë‹¤.</s>\r\n\r\n# HOC(Higher Order Component): ê³ ì°¨í•¨ìˆ˜\r\n\r\n> ê³ ì°¨ ì»´í¬ë„ŒíŠ¸(HOC, Higher Order Component)ëŠ” ì»´í¬ë„ŒíŠ¸ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•œ Reactì˜ ê³ ê¸‰ ê¸°ìˆ ì´ë‹¤. ê³ ì°¨ ì»´í¬ë„ŒíŠ¸(HOC)ëŠ” React APIì˜ ì¼ë¶€ê°€ ì•„ë‹ˆë©°, Reactì˜ êµ¬ì„±ì  íŠ¹ì„±ì—ì„œ ë‚˜ì˜¤ëŠ” íŒ¨í„´ì´ë‹¤. ([ì°¸ê³ ](https://ko.reactjs.org/docs/higher-order-components.html))\r\n\r\n> *\"íš¡ë‹¨ ê´€ì‹¬ì‚¬(Cross-Cutting Concerns)ì— ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\"*\r\n\r\nì´ ì„¤ëª…ì„ ë³´ê³  JAVAì˜ AOPê°€ ë– ì˜¬ëë‹¤. ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¡œì§ì„ íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¡œ ë³´ì•„ í•˜ë‚˜ë¡œ ë¬¶ì–´ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.\r\n\r\n## HOCëŠ”\r\n\r\n- ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¸ìë¡œ ë°›ì•„ì„œ ë‹¤ë¥¸ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜\r\n- ì»´í¬ë„ŒíŠ¸ì— íŠ¹ì • ê¸°ëŠ¥ì„ ë¶€ì—¬í•œë‹¤.\r\n- íŠ¹ì •í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œ í›„ ì¸ìë¡œ ë°›ì€ ì»´í¬ë„ŒíŠ¸ì— ë°ì´í„°ë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ë„ ìˆë‹¤.\r\n\r\n\r\n# ì–´ë– í•œ ê²½ìš°ì— HOCë¥¼ ì‚¬ìš©í• ê¹Œ?\r\n\r\n- ë¡œë”©, ì—ëŸ¬, ë°ì´í„° ìš”ì²­ ë“± ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¡œì§ì„ ì»´í¬ë„ŒíŠ¸ ë°”ê¹¥ìœ¼ë¡œ ë¶„ë¦¬í•  ë•Œ ê³ ë ¤ë  ìˆ˜ ìˆë‹¤.\r\n\r\n# Functionalí•˜ê²Œ HOC ì‚¬ìš©í•˜ê¸°\r\n\r\n- React ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œëŠ” class í˜•íƒœë¡œ HOCë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œê°€ ë‚˜ì™€ ìˆì§€ë§Œ, ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ì—ì„œ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë¡œ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, í•¨ìˆ˜ì˜ í˜•íƒœë¡œ HOCë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì¡°ì‚¬í–ˆë‹¤.\r\n\r\n# ì‚¬ìš© ì˜ˆì œ\r\n\r\n````typescript\r\n// HOC í•¨ìˆ˜: withCalendarDateRange\r\nimport React, { FC, useMemo } from 'react';\r\nimport moment from 'moment';\r\nimport { useDataStore } from './context/Store';\r\nimport { DateRange } from './Calendar';\r\n\r\nexport interface CalendarDateRangeProps {\r\n  selectableDateRange: DateRange;\r\n  initSelectedDateRange: DateRange;\r\n}\r\n\r\ninterface WrapperProps extends CalendarDateRangeProps {\r\n  [props: string]: unknown;\r\n}\r\n\r\nexport const withCalendarDateRange = <OriginProps,>(WrappedComponent: FC<WrapperProps>): FC<OriginProps> => {\r\n  const WrapperComponent = (props?: OriginProps) => {\r\n    const { projectStore } = useDataStore();\r\n\r\n    const selectableDateRange = useMemo(() => {\r\n      const dateRange = projectStore.date.selectable\r\n      // ê²€ì¦ ë¡œì§...\r\n      return dateRange;\r\n    }, []);\r\n\r\n    const initSelectedDateRange = useMemo(() => {\r\n      const dateRange = projectStore.date.init\r\n      // ê²€ì¦ ë¡œì§...\r\n      return dateRange;\r\n    }, []);\r\n\r\n    return (\r\n      <WrappedComponent\r\n        {...props}\r\n        selectableDateRange={selectableDateRange}\r\n        initSelectedDateRange={initSelectedDateRange}\r\n      />\r\n    );\r\n  };\r\n  WrapperComponent.displayName = WrappedComponent.displayName || WrappedComponent.name || 'CalendarDateRangeWrapper';\r\n  return WrapperComponent;\r\n};\r\n````\r\n\r\n````typescript\r\n// ê³µí†µ ë¡œì§ì„ ì¶”ê°€í•  ì»´í¬ë„ŒíŠ¸: WrappedVisitStatus\r\n// Propsë¥¼ í†µí•´ selectableDateRange, initSelectedDateRange ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤.\r\nimport React, { useState } from 'react';\r\nimport { Calendar, DateRange } from './Calendar';\r\nimport { withCalendarDateRange, CalendarDateRangeProps } from './HOC/withCalendarDateRange';\r\n\r\ntype WrappedVisitStatusProps = CalendarDateRangeProps;\r\n\r\nconst WrappedVisitStatus = ({ selectableDateRange, initSelectedDateRange }: WrappedVisitStatusProps) => {\r\n  const [dateRange, setDateRange] = useState<DateRange>();\r\n  const handleDateRange = (changedDateRange: DateRange) => setDateRange(changedDateRange);\r\n\r\n  return (\r\n    <StyledLayout>\r\n      <StyledTitleWrapper>\r\n        <StyledTitle>ë°©ë¬¸ í˜„í™©</StyledTitle>\r\n        <Calendar\r\n          selectableRange={selectableDateRange}\r\n          initDateRange={initSelectedDateRange}\r\n          dateHandle={handleDateRange}\r\n        />\r\n      </StyledTitleWrapper>\r\n    </StyledLayout>\r\n  );\r\n};\r\n\r\n// HOCë¥¼ í†µí•´ ìº˜ë¦°ë” ë°ì´í„° Props ì‚½ì…\r\nexport const VisitStatus = withCalendarDateRange(WrappedVisitStatus);\r\n````\r\n\r\n````typescript\r\n// ê³µí†µ ë¡œì§ì´ ì¶”ê°€ëœ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©: Dashboard\r\nimport React, { FC, useState } from 'react';\r\nimport { BGTab, ITab } from './components/BGTab';\r\nimport { TopNavBar } from './components/TopNavBar';\r\nimport { Container } from './Dashboard.style';\r\nimport { tabList } from './Dashboard.data';\r\nimport { BorderSection } from './components/BorderSection';\r\nimport { VisitStatus } from './components/VisitStatus';\r\n\r\ninterface IUseTab {\r\n  selectedTab: ITab;\r\n  handleTab: (tab: ITab) => void;\r\n}\r\nexport const useTab = (defaultTab: ITab): IUseTab => {\r\n  const [selectedTab, setTab] = useState<ITab>(defaultTab);\r\n  const handleTab = (tab: ITab) => {\r\n    setTab(tab);\r\n  };\r\n  return { selectedTab, handleTab };\r\n};\r\n\r\nexport const Dashboard: FC = () => {\r\n  const { selectedTab, handleTab } = useTab(tabList[0]);\r\n\r\n  return (\r\n    <Container>\r\n      <TopNavBar title=\"CRM ëŒ€ì‹œë³´ë“œ\" style={{ border: 0 }} />\r\n      <BGTab tabList={tabList} selectedTab={selectedTab} handleTab={handleTab} />\r\n      <BorderSection style={{ marginTop: '32px', borderRadius: '8px' }}>\r\n        {selectedTab.key === 'visitStatus' && <VisitStatus />}\r\n      </BorderSection>\r\n    </Container>\r\n  );\r\n};\r\n\r\n````\r\n\r\n# ì¢€ ë” ê°„ë‹¨í•œ ì½”ë“œ\r\n\r\n````javascript\r\n// HOC\r\nexport const withHOC = WrappedComponent => {\r\n  const NewComponent = async (props) => {\r\n    // ê³µí†µ ë¡œì§\r\n    const { newData } = await fetchNewDate(); // newData = 'Higher Order Component'\r\n    return (\r\n        <WrappedComponent {...props} data={newData} />\r\n      );\r\n  }\r\n  NewComponent.displayName = 'NewComponent'\r\n  return NewComponent;\r\n}\r\n````\r\n\r\n````javascript\r\n// ê³µí†µ ë¡œì§ì„ ì¶”ê°€í•  ì»´í¬ë„ŒíŠ¸\r\nimport { withHOC } from 'withHOC.tsx'\r\nconst WrappedComponent = ({text, data})=>{\r\n    // nameì€ PageComponentì—ì„œ propsë¡œ ë„˜ê²¨ì¤€ ë°ì´í„°\r\n    // dataëŠ” HOCì— ì˜í•´ propsì— ì¶”ê°€ëœ\r\n    return (\r\n        <div>\r\n            <div>{text}</div>\r\n            <div>{data}</div>\r\n        </div>\r\n    );\r\n}\r\nexport const MyComponent = withHOC(WrappedComponent)\r\n````\r\n\r\n````javascript\r\nimport { MyComponent } from 'MyComponent.tsx'\r\n// ê³µí†µ ë¡œì§ì´ ì¶”ê°€ëœ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©\r\nconst PageComponentì—ì„œ = ()=>{\r\n    return <MyComponent text={'HOC'}/>\r\n}\r\n````\r\n````\r\nê²°ê³¼ í™”ë©´:\r\n\r\nHOC\r\nHigher Order Component\r\n````\r\n\r\n# ê·¸ëŸ°ë°,\r\n\r\nì–´ì°Œì €ì°Œ HOCë¥¼ ì‚¬ìš©í•´ë³´ê³  ì‹¶ì€ ì§€ì ì¸ ìš•ì‹¬ì€ í’€ì—ˆìœ¼ë‚˜ HOCì˜ ë‹¨ì ë“¤ì´ ëˆˆì— ë“¤ì–´ì˜¤ê¸° ì‹œì‘í–ˆë‹¤.\r\n\r\n- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤ë©´, íƒ€ì…ì„ ë§ì¶”ê¸°ë„ ì–´ë ¤ìš¸ ë¿ë”ëŸ¬, ì½ê¸°ë„ ì–´ë µë‹¤.\r\n\r\n````typescript\r\nexport interface CalendarDateRangeProps {\r\n  selectableDateRange: DateRange;\r\n  initSelectedDateRange: DateRange;\r\n}\r\n\r\ninterface WrapperProps extends CalendarDateRangeProps {\r\n  [props: string]: unknown;\r\n}\r\n\r\nexport const withCalendarDateRange = <OriginProps,>(WrappedComponent: FC<WrapperProps>): FC<OriginProps> => {\r\n  const WrapperComponent = (props?: OriginProps) => {\r\n    ...\r\n````\r\n\r\n- ì—¬ëŸ¬ HOCë¥¼ í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•´ì•¼ í•  ê²½ìš°ê°€ ìƒê¸´ë‹¤ë©´, `withA(withB(withC(MyComponent)))` ì²˜ëŸ¼ í•¨ìˆ˜ í˜¸ì¶œ Depthê°€ ê¹Šì–´ì§„ë‹¤(Nesting).\r\n\r\n# ë‚˜ëŠ” í‰ì†Œ Hooksë¥¼ ì†Œì¤‘íˆ ì—¬ê¸°ì§€ ì•Šì•˜ì§€\r\n\r\ní•„ìëŠ” ë¦¬ì•¡íŠ¸ë¥¼ ì²˜ìŒ ì‹œì‘í•  ë•Œë¶€í„° í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì™€ ë¦¬ì•¡íŠ¸ Hooksë¥¼ ì‚¬ìš©í•´ì™”ê¸° ë•Œë¬¸ì— Hooksì˜ í¸ë¦¬í•¨ì„ ì˜ ëª°ëë‹¤. [ë¦¬ì•¡íŠ¸ HooksëŠ” ëŒ€ë¶€ë¶„ì˜ HOCì™€ Render Propsë¥¼ ëŒ€ì²´ ê°€ëŠ¥í•˜ë©°, ë” ê°„ë‹¨í•˜ê³  ë¦¬ì•¡íŠ¸ ê°€ìƒ DOM Treeì˜ Nestingì„ ì¤„ì—¬ì¤€ë‹¤.](https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components)\r\në‹¤ìŒê³¼ ê°™ì´ Custom Hookì„ ì‚¬ìš©í•˜ì—¬ í•´ê²°ì´ ê°€ëŠ¥í•˜ë‹¤.\r\n\r\n````typescript\r\n// useCalendarDateRange.ts\r\nconst useCalendarDateRange = ()=>{\r\n  const { projectStore } = useDataStore();\r\n\r\n    const selectableDateRange = useMemo(() => {\r\n      const dateRange = projectStore.date.selectable\r\n      // ê²€ì¦ ë¡œì§...\r\n      return dateRange;\r\n    }, []);\r\n\r\n    const initSelectedDateRange = useMemo(() => {\r\n      const dateRange = projectStore.date.init\r\n      // ê²€ì¦ ë¡œì§...\r\n      return dateRange;\r\n    }, []);\r\n  return {selectableDateRange, initSelectedDateRange}\r\n}\r\n````\r\n\r\n````typescript\r\n// ê³µí†µ ë¡œì§ì„ ì¶”ê°€í•  ì»´í¬ë„ŒíŠ¸: VisitStatus\r\n// Propsë¥¼ í†µí•´ì„œê°€ ì•„ë‹Œ useCalendarDateRange()ë¥¼ í˜¸ì¶œí•´ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤.\r\nimport React, { useState } from 'react';\r\nimport { Calendar, DateRange } from './Calendar';\r\nimport { useCalendarDateRange } from './hooks/useCalendarDateRange';\r\n\r\nexport const VisitStatus = () => {\r\n  const [dateRange, setDateRange] = useState<DateRange>();\r\n  const handleDateRange = (changedDateRange: DateRange) => setDateRange(changedDateRange);\r\n  const {selectableDateRange, initSelectedDateRange} = useCalendarDateRange();\r\n\r\n  return (\r\n    <StyledLayout>\r\n      <StyledTitleWrapper>\r\n        <StyledTitle>ë°©ë¬¸ í˜„í™©</StyledTitle>\r\n        <Calendar\r\n          selectableRange={selectableDateRange}\r\n          initDateRange={initSelectedDateRange}\r\n          dateHandle={handleDateRange}\r\n        />\r\n      </StyledTitleWrapper>\r\n    </StyledLayout>\r\n  );\r\n};\r\n````\r\n\r\n# ê²°ë¡ \r\n\r\n- HOCëŠ” í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì™€ ë¦¬ì•¡íŠ¸ Hooksê°€ ë‚˜ì˜¤ê¸° ì´ì „ë¶€í„° Class Component ê°œë°œì—ì„œ ë¦¬ì•¡íŠ¸ Life Cycleì— ì¢…ì†ì ì´ì§€ ì•Šì€ ì¤‘ë³µëœ ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ì—ˆë‹¤. (ê·¸ë˜ì„œ ê³µì‹ í™ˆí˜ì´ì§€ì— í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ì–´ì§„ HOC ì˜ˆì œê°€ ìˆë‚˜ë³´ë‹¤.)\r\n- HOCëŠ” í´ë˜ìŠ¤í˜•, ê·¸ë¦¬ê³  í•¨ìˆ˜í˜• ëª¨ë‘ì— ì ìš©í•  ìˆ˜ ìˆì–´, ë ˆê±°ì‹œì™€ ëª¨ë˜í•œ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ì—ì„œ ì—°ê²° ë‹¤ë¦¬ì²˜ëŸ¼ ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. \r\n- í˜„ì¬ëŠ” ë¦¬ì•¡íŠ¸ Hooksë¥¼ ì‚¬ìš©í•´ Custom Hookì„ ë§Œë“¤ì–´ HOCë¥¼ ëŒ€ë¶€ë¶„ ëŒ€ì²´í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë ‡ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ê°„ë‹¨í•˜ê³  ì§ê´€ì ì´ë‹¤.\r\n- ê·¸ëŸ¬ë‹ˆ ë‹¤ì‹œ ì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•˜ëŸ¬ ê°€ì•¼ê² ë‹¤.\r\n\r\n# ì°¸ê³ \r\n- [https://ko.reactjs.org/docs/higher-order-components.html](https://ko.reactjs.org/docs/higher-order-components.html)\r\n- [https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components](https://reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components)\r\n- [https://velog.io/@yeonseo07/%EB%AA%A8%EB%8B%AC%EC%9D%84-%EB%A7%8C%EB%93%A4%EB%8B%A4-%EC%83%9D%EA%B8%B4-%EC%9D%BC](https://velog.io/@yeonseo07/%EB%AA%A8%EB%8B%AC%EC%9D%84-%EB%A7%8C%EB%93%A4%EB%8B%A4-%EC%83%9D%EA%B8%B4-%EC%9D%BC)\r\n- [https://yceffort.kr/2020/10/react-hooks-and-hocs](https://yceffort.kr/2020/10/react-hooks-and-hocs)"},{"id":1635778800,"title":"ì²« ê²Œì‹œê¸€\r","author":"jangky000\r","date":"2021.11.02\r","content":"\r\nNextJS í”„ë ˆì„ì›Œí¬ë¡œ ë§Œë“  Markdown ë¸”ë¡œê·¸ì…ë‹ˆë‹¤."}]